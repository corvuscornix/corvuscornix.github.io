!function(n){var t={};function r(e){if(t[e])return t[e].exports;var u=t[e]={i:e,l:!1,exports:{}};return n[e].call(u.exports,u,u.exports,r),u.l=!0,u.exports}r.m=n,r.c=t,r.d=function(n,t,e){r.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:e})},r.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},r.t=function(n,t){if(1&t&&(n=r(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.__esModule)return n;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var u in n)r.d(e,u,function(t){return n[t]}.bind(null,u));return e},r.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return r.d(t,"a",t),t},r.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},r.p="",r(r.s=1)}([function(n,t,r){(function(n,r){var e;!function(){var u="object"==typeof self&&self.self===self&&self||"object"==typeof n&&n.global===n&&n||this||{},i=u._,o=Array.prototype,a=Object.prototype,c="undefined"!=typeof Symbol?Symbol.prototype:null,l=o.push,f=o.slice,s=a.toString,p=a.hasOwnProperty,h=Array.isArray,v=Object.keys,y=Object.create,d=function(){},g=function(n){return n instanceof g?n:this instanceof g?void(this._wrapped=n):new g(n)};t.nodeType?u._=g:(!r.nodeType&&r.exports&&(t=r.exports=g),t._=g),g.VERSION="1.9.1";var m,b=function(n,t,r){if(void 0===t)return n;switch(null==r?3:r){case 1:return function(r){return n.call(t,r)};case 3:return function(r,e,u){return n.call(t,r,e,u)};case 4:return function(r,e,u,i){return n.call(t,r,e,u,i)}}return function(){return n.apply(t,arguments)}},j=function(n,t,r){return g.iteratee!==m?g.iteratee(n,t):null==n?g.identity:g.isFunction(n)?b(n,t,r):g.isObject(n)&&!g.isArray(n)?g.matcher(n):g.property(n)};g.iteratee=m=function(n,t){return j(n,t,1/0)};var x=function(n,t){return t=null==t?n.length-1:+t,function(){for(var r=Math.max(arguments.length-t,0),e=Array(r),u=0;u<r;u++)e[u]=arguments[u+t];switch(t){case 0:return n.call(this,e);case 1:return n.call(this,arguments[0],e);case 2:return n.call(this,arguments[0],arguments[1],e)}var i=Array(t+1);for(u=0;u<t;u++)i[u]=arguments[u];return i[t]=e,n.apply(this,i)}},w=function(n){if(!g.isObject(n))return{};if(y)return y(n);d.prototype=n;var t=new d;return d.prototype=null,t},_=function(n){return function(t){return null==t?void 0:t[n]}},O=function(n,t){return null!=n&&p.call(n,t)},k=function(n,t){for(var r=t.length,e=0;e<r;e++){if(null==n)return;n=n[t[e]]}return r?n:void 0},A=Math.pow(2,53)-1,S=_("length"),M=function(n){var t=S(n);return"number"==typeof t&&t>=0&&t<=A};g.each=g.forEach=function(n,t,r){var e,u;if(t=b(t,r),M(n))for(e=0,u=n.length;e<u;e++)t(n[e],e,n);else{var i=g.keys(n);for(e=0,u=i.length;e<u;e++)t(n[i[e]],i[e],n)}return n},g.map=g.collect=function(n,t,r){t=j(t,r);for(var e=!M(n)&&g.keys(n),u=(e||n).length,i=Array(u),o=0;o<u;o++){var a=e?e[o]:o;i[o]=t(n[a],a,n)}return i};var E=function(n){var t=function(t,r,e,u){var i=!M(t)&&g.keys(t),o=(i||t).length,a=n>0?0:o-1;for(u||(e=t[i?i[a]:a],a+=n);a>=0&&a<o;a+=n){var c=i?i[a]:a;e=r(e,t[c],c,t)}return e};return function(n,r,e,u){var i=arguments.length>=3;return t(n,b(r,u,4),e,i)}};g.reduce=g.foldl=g.inject=E(1),g.reduceRight=g.foldr=E(-1),g.find=g.detect=function(n,t,r){var e=(M(n)?g.findIndex:g.findKey)(n,t,r);if(void 0!==e&&-1!==e)return n[e]},g.filter=g.select=function(n,t,r){var e=[];return t=j(t,r),g.each(n,function(n,r,u){t(n,r,u)&&e.push(n)}),e},g.reject=function(n,t,r){return g.filter(n,g.negate(j(t)),r)},g.every=g.all=function(n,t,r){t=j(t,r);for(var e=!M(n)&&g.keys(n),u=(e||n).length,i=0;i<u;i++){var o=e?e[i]:i;if(!t(n[o],o,n))return!1}return!0},g.some=g.any=function(n,t,r){t=j(t,r);for(var e=!M(n)&&g.keys(n),u=(e||n).length,i=0;i<u;i++){var o=e?e[i]:i;if(t(n[o],o,n))return!0}return!1},g.contains=g.includes=g.include=function(n,t,r,e){return M(n)||(n=g.values(n)),("number"!=typeof r||e)&&(r=0),g.indexOf(n,t,r)>=0},g.invoke=x(function(n,t,r){var e,u;return g.isFunction(t)?u=t:g.isArray(t)&&(e=t.slice(0,-1),t=t[t.length-1]),g.map(n,function(n){var i=u;if(!i){if(e&&e.length&&(n=k(n,e)),null==n)return;i=n[t]}return null==i?i:i.apply(n,r)})}),g.pluck=function(n,t){return g.map(n,g.property(t))},g.where=function(n,t){return g.filter(n,g.matcher(t))},g.findWhere=function(n,t){return g.find(n,g.matcher(t))},g.max=function(n,t,r){var e,u,i=-1/0,o=-1/0;if(null==t||"number"==typeof t&&"object"!=typeof n[0]&&null!=n)for(var a=0,c=(n=M(n)?n:g.values(n)).length;a<c;a++)null!=(e=n[a])&&e>i&&(i=e);else t=j(t,r),g.each(n,function(n,r,e){((u=t(n,r,e))>o||u===-1/0&&i===-1/0)&&(i=n,o=u)});return i},g.min=function(n,t,r){var e,u,i=1/0,o=1/0;if(null==t||"number"==typeof t&&"object"!=typeof n[0]&&null!=n)for(var a=0,c=(n=M(n)?n:g.values(n)).length;a<c;a++)null!=(e=n[a])&&e<i&&(i=e);else t=j(t,r),g.each(n,function(n,r,e){((u=t(n,r,e))<o||u===1/0&&i===1/0)&&(i=n,o=u)});return i},g.shuffle=function(n){return g.sample(n,1/0)},g.sample=function(n,t,r){if(null==t||r)return M(n)||(n=g.values(n)),n[g.random(n.length-1)];var e=M(n)?g.clone(n):g.values(n),u=S(e);t=Math.max(Math.min(t,u),0);for(var i=u-1,o=0;o<t;o++){var a=g.random(o,i),c=e[o];e[o]=e[a],e[a]=c}return e.slice(0,t)},g.sortBy=function(n,t,r){var e=0;return t=j(t,r),g.pluck(g.map(n,function(n,r,u){return{value:n,index:e++,criteria:t(n,r,u)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||void 0===r)return 1;if(r<e||void 0===e)return-1}return n.index-t.index}),"value")};var F=function(n,t){return function(r,e,u){var i=t?[[],[]]:{};return e=j(e,u),g.each(r,function(t,u){var o=e(t,u,r);n(i,t,o)}),i}};g.groupBy=F(function(n,t,r){O(n,r)?n[r].push(t):n[r]=[t]}),g.indexBy=F(function(n,t,r){n[r]=t}),g.countBy=F(function(n,t,r){O(n,r)?n[r]++:n[r]=1});var I=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;g.toArray=function(n){return n?g.isArray(n)?f.call(n):g.isString(n)?n.match(I):M(n)?g.map(n,g.identity):g.values(n):[]},g.size=function(n){return null==n?0:M(n)?n.length:g.keys(n).length},g.partition=F(function(n,t,r){n[r?0:1].push(t)},!0),g.first=g.head=g.take=function(n,t,r){return null==n||n.length<1?null==t?void 0:[]:null==t||r?n[0]:g.initial(n,n.length-t)},g.initial=function(n,t,r){return f.call(n,0,Math.max(0,n.length-(null==t||r?1:t)))},g.last=function(n,t,r){return null==n||n.length<1?null==t?void 0:[]:null==t||r?n[n.length-1]:g.rest(n,Math.max(0,n.length-t))},g.rest=g.tail=g.drop=function(n,t,r){return f.call(n,null==t||r?1:t)},g.compact=function(n){return g.filter(n,Boolean)};var N=function(n,t,r,e){for(var u=(e=e||[]).length,i=0,o=S(n);i<o;i++){var a=n[i];if(M(a)&&(g.isArray(a)||g.isArguments(a)))if(t)for(var c=0,l=a.length;c<l;)e[u++]=a[c++];else N(a,t,r,e),u=e.length;else r||(e[u++]=a)}return e};g.flatten=function(n,t){return N(n,t,!1)},g.without=x(function(n,t){return g.difference(n,t)}),g.uniq=g.unique=function(n,t,r,e){g.isBoolean(t)||(e=r,r=t,t=!1),null!=r&&(r=j(r,e));for(var u=[],i=[],o=0,a=S(n);o<a;o++){var c=n[o],l=r?r(c,o,n):c;t&&!r?(o&&i===l||u.push(c),i=l):r?g.contains(i,l)||(i.push(l),u.push(c)):g.contains(u,c)||u.push(c)}return u},g.union=x(function(n){return g.uniq(N(n,!0,!0))}),g.intersection=function(n){for(var t=[],r=arguments.length,e=0,u=S(n);e<u;e++){var i=n[e];if(!g.contains(t,i)){var o;for(o=1;o<r&&g.contains(arguments[o],i);o++);o===r&&t.push(i)}}return t},g.difference=x(function(n,t){return t=N(t,!0,!0),g.filter(n,function(n){return!g.contains(t,n)})}),g.unzip=function(n){for(var t=n&&g.max(n,S).length||0,r=Array(t),e=0;e<t;e++)r[e]=g.pluck(n,e);return r},g.zip=x(g.unzip),g.object=function(n,t){for(var r={},e=0,u=S(n);e<u;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r};var T=function(n){return function(t,r,e){r=j(r,e);for(var u=S(t),i=n>0?0:u-1;i>=0&&i<u;i+=n)if(r(t[i],i,t))return i;return-1}};g.findIndex=T(1),g.findLastIndex=T(-1),g.sortedIndex=function(n,t,r,e){for(var u=(r=j(r,e,1))(t),i=0,o=S(n);i<o;){var a=Math.floor((i+o)/2);r(n[a])<u?i=a+1:o=a}return i};var B=function(n,t,r){return function(e,u,i){var o=0,a=S(e);if("number"==typeof i)n>0?o=i>=0?i:Math.max(i+a,o):a=i>=0?Math.min(i+1,a):i+a+1;else if(r&&i&&a)return e[i=r(e,u)]===u?i:-1;if(u!=u)return(i=t(f.call(e,o,a),g.isNaN))>=0?i+o:-1;for(i=n>0?o:a-1;i>=0&&i<a;i+=n)if(e[i]===u)return i;return-1}};g.indexOf=B(1,g.findIndex,g.sortedIndex),g.lastIndexOf=B(-1,g.findLastIndex),g.range=function(n,t,r){null==t&&(t=n||0,n=0),r||(r=t<n?-1:1);for(var e=Math.max(Math.ceil((t-n)/r),0),u=Array(e),i=0;i<e;i++,n+=r)u[i]=n;return u},g.chunk=function(n,t){if(null==t||t<1)return[];for(var r=[],e=0,u=n.length;e<u;)r.push(f.call(n,e,e+=t));return r};var P=function(n,t,r,e,u){if(!(e instanceof t))return n.apply(r,u);var i=w(n.prototype),o=n.apply(i,u);return g.isObject(o)?o:i};g.bind=x(function(n,t,r){if(!g.isFunction(n))throw new TypeError("Bind must be called on a function");var e=x(function(u){return P(n,e,t,this,r.concat(u))});return e}),g.partial=x(function(n,t){var r=g.partial.placeholder,e=function(){for(var u=0,i=t.length,o=Array(i),a=0;a<i;a++)o[a]=t[a]===r?arguments[u++]:t[a];for(;u<arguments.length;)o.push(arguments[u++]);return P(n,e,this,this,o)};return e}),g.partial.placeholder=g,g.bindAll=x(function(n,t){var r=(t=N(t,!1,!1)).length;if(r<1)throw new Error("bindAll must be passed function names");for(;r--;){var e=t[r];n[e]=g.bind(n[e],n)}}),g.memoize=function(n,t){var r=function(e){var u=r.cache,i=""+(t?t.apply(this,arguments):e);return O(u,i)||(u[i]=n.apply(this,arguments)),u[i]};return r.cache={},r},g.delay=x(function(n,t,r){return setTimeout(function(){return n.apply(null,r)},t)}),g.defer=g.partial(g.delay,g,1),g.throttle=function(n,t,r){var e,u,i,o,a=0;r||(r={});var c=function(){a=!1===r.leading?0:g.now(),e=null,o=n.apply(u,i),e||(u=i=null)},l=function(){var l=g.now();a||!1!==r.leading||(a=l);var f=t-(l-a);return u=this,i=arguments,f<=0||f>t?(e&&(clearTimeout(e),e=null),a=l,o=n.apply(u,i),e||(u=i=null)):e||!1===r.trailing||(e=setTimeout(c,f)),o};return l.cancel=function(){clearTimeout(e),a=0,e=u=i=null},l},g.debounce=function(n,t,r){var e,u,i=function(t,r){e=null,r&&(u=n.apply(t,r))},o=x(function(o){if(e&&clearTimeout(e),r){var a=!e;e=setTimeout(i,t),a&&(u=n.apply(this,o))}else e=g.delay(i,t,this,o);return u});return o.cancel=function(){clearTimeout(e),e=null},o},g.wrap=function(n,t){return g.partial(t,n)},g.negate=function(n){return function(){return!n.apply(this,arguments)}},g.compose=function(){var n=arguments,t=n.length-1;return function(){for(var r=t,e=n[t].apply(this,arguments);r--;)e=n[r].call(this,e);return e}},g.after=function(n,t){return function(){if(--n<1)return t.apply(this,arguments)}},g.before=function(n,t){var r;return function(){return--n>0&&(r=t.apply(this,arguments)),n<=1&&(t=null),r}},g.once=g.partial(g.before,2),g.restArguments=x;var q=!{toString:null}.propertyIsEnumerable("toString"),L=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],C=function(n,t){var r=L.length,e=n.constructor,u=g.isFunction(e)&&e.prototype||a,i="constructor";for(O(n,i)&&!g.contains(t,i)&&t.push(i);r--;)(i=L[r])in n&&n[i]!==u[i]&&!g.contains(t,i)&&t.push(i)};g.keys=function(n){if(!g.isObject(n))return[];if(v)return v(n);var t=[];for(var r in n)O(n,r)&&t.push(r);return q&&C(n,t),t},g.allKeys=function(n){if(!g.isObject(n))return[];var t=[];for(var r in n)t.push(r);return q&&C(n,t),t},g.values=function(n){for(var t=g.keys(n),r=t.length,e=Array(r),u=0;u<r;u++)e[u]=n[t[u]];return e},g.mapObject=function(n,t,r){t=j(t,r);for(var e=g.keys(n),u=e.length,i={},o=0;o<u;o++){var a=e[o];i[a]=t(n[a],a,n)}return i},g.pairs=function(n){for(var t=g.keys(n),r=t.length,e=Array(r),u=0;u<r;u++)e[u]=[t[u],n[t[u]]];return e},g.invert=function(n){for(var t={},r=g.keys(n),e=0,u=r.length;e<u;e++)t[n[r[e]]]=r[e];return t},g.functions=g.methods=function(n){var t=[];for(var r in n)g.isFunction(n[r])&&t.push(r);return t.sort()};var R=function(n,t){return function(r){var e=arguments.length;if(t&&(r=Object(r)),e<2||null==r)return r;for(var u=1;u<e;u++)for(var i=arguments[u],o=n(i),a=o.length,c=0;c<a;c++){var l=o[c];t&&void 0!==r[l]||(r[l]=i[l])}return r}};g.extend=R(g.allKeys),g.extendOwn=g.assign=R(g.keys),g.findKey=function(n,t,r){t=j(t,r);for(var e,u=g.keys(n),i=0,o=u.length;i<o;i++)if(t(n[e=u[i]],e,n))return e};var z,K,D=function(n,t,r){return t in r};g.pick=x(function(n,t){var r={},e=t[0];if(null==n)return r;g.isFunction(e)?(t.length>1&&(e=b(e,t[1])),t=g.allKeys(n)):(e=D,t=N(t,!1,!1),n=Object(n));for(var u=0,i=t.length;u<i;u++){var o=t[u],a=n[o];e(a,o,n)&&(r[o]=a)}return r}),g.omit=x(function(n,t){var r,e=t[0];return g.isFunction(e)?(e=g.negate(e),t.length>1&&(r=t[1])):(t=g.map(N(t,!1,!1),String),e=function(n,r){return!g.contains(t,r)}),g.pick(n,e,r)}),g.defaults=R(g.allKeys,!0),g.create=function(n,t){var r=w(n);return t&&g.extendOwn(r,t),r},g.clone=function(n){return g.isObject(n)?g.isArray(n)?n.slice():g.extend({},n):n},g.tap=function(n,t){return t(n),n},g.isMatch=function(n,t){var r=g.keys(t),e=r.length;if(null==n)return!e;for(var u=Object(n),i=0;i<e;i++){var o=r[i];if(t[o]!==u[o]||!(o in u))return!1}return!0},z=function(n,t,r,e){if(n===t)return 0!==n||1/n==1/t;if(null==n||null==t)return!1;if(n!=n)return t!=t;var u=typeof n;return("function"===u||"object"===u||"object"==typeof t)&&K(n,t,r,e)},K=function(n,t,r,e){n instanceof g&&(n=n._wrapped),t instanceof g&&(t=t._wrapped);var u=s.call(n);if(u!==s.call(t))return!1;switch(u){case"[object RegExp]":case"[object String]":return""+n==""+t;case"[object Number]":return+n!=+n?+t!=+t:0==+n?1/+n==1/t:+n==+t;case"[object Date]":case"[object Boolean]":return+n==+t;case"[object Symbol]":return c.valueOf.call(n)===c.valueOf.call(t)}var i="[object Array]"===u;if(!i){if("object"!=typeof n||"object"!=typeof t)return!1;var o=n.constructor,a=t.constructor;if(o!==a&&!(g.isFunction(o)&&o instanceof o&&g.isFunction(a)&&a instanceof a)&&"constructor"in n&&"constructor"in t)return!1}e=e||[];for(var l=(r=r||[]).length;l--;)if(r[l]===n)return e[l]===t;if(r.push(n),e.push(t),i){if((l=n.length)!==t.length)return!1;for(;l--;)if(!z(n[l],t[l],r,e))return!1}else{var f,p=g.keys(n);if(l=p.length,g.keys(t).length!==l)return!1;for(;l--;)if(f=p[l],!O(t,f)||!z(n[f],t[f],r,e))return!1}return r.pop(),e.pop(),!0},g.isEqual=function(n,t){return z(n,t)},g.isEmpty=function(n){return null==n||(M(n)&&(g.isArray(n)||g.isString(n)||g.isArguments(n))?0===n.length:0===g.keys(n).length)},g.isElement=function(n){return!(!n||1!==n.nodeType)},g.isArray=h||function(n){return"[object Array]"===s.call(n)},g.isObject=function(n){var t=typeof n;return"function"===t||"object"===t&&!!n},g.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],function(n){g["is"+n]=function(t){return s.call(t)==="[object "+n+"]"}}),g.isArguments(arguments)||(g.isArguments=function(n){return O(n,"callee")});var H=u.document&&u.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof H&&(g.isFunction=function(n){return"function"==typeof n||!1}),g.isFinite=function(n){return!g.isSymbol(n)&&isFinite(n)&&!isNaN(parseFloat(n))},g.isNaN=function(n){return g.isNumber(n)&&isNaN(n)},g.isBoolean=function(n){return!0===n||!1===n||"[object Boolean]"===s.call(n)},g.isNull=function(n){return null===n},g.isUndefined=function(n){return void 0===n},g.has=function(n,t){if(!g.isArray(t))return O(n,t);for(var r=t.length,e=0;e<r;e++){var u=t[e];if(null==n||!p.call(n,u))return!1;n=n[u]}return!!r},g.noConflict=function(){return u._=i,this},g.identity=function(n){return n},g.constant=function(n){return function(){return n}},g.noop=function(){},g.property=function(n){return g.isArray(n)?function(t){return k(t,n)}:_(n)},g.propertyOf=function(n){return null==n?function(){}:function(t){return g.isArray(t)?k(n,t):n[t]}},g.matcher=g.matches=function(n){return n=g.extendOwn({},n),function(t){return g.isMatch(t,n)}},g.times=function(n,t,r){var e=Array(Math.max(0,n));t=b(t,r,1);for(var u=0;u<n;u++)e[u]=t(u);return e},g.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))},g.now=Date.now||function(){return(new Date).getTime()};var W={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Z=g.invert(W),$=function(n){var t=function(t){return n[t]},r="(?:"+g.keys(n).join("|")+")",e=RegExp(r),u=RegExp(r,"g");return function(n){return n=null==n?"":""+n,e.test(n)?n.replace(u,t):n}};g.escape=$(W),g.unescape=$(Z),g.result=function(n,t,r){g.isArray(t)||(t=[t]);var e=t.length;if(!e)return g.isFunction(r)?r.call(n):r;for(var u=0;u<e;u++){var i=null==n?void 0:n[t[u]];void 0===i&&(i=r,u=e),n=g.isFunction(i)?i.call(n):i}return n};var G=0;g.uniqueId=function(n){var t=++G+"";return n?n+t:t},g.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var U=/(.)^/,J={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},V=/\\|'|\r|\n|\u2028|\u2029/g,Y=function(n){return"\\"+J[n]};g.template=function(n,t,r){!t&&r&&(t=r),t=g.defaults({},t,g.templateSettings);var e,u=RegExp([(t.escape||U).source,(t.interpolate||U).source,(t.evaluate||U).source].join("|")+"|$","g"),i=0,o="__p+='";n.replace(u,function(t,r,e,u,a){return o+=n.slice(i,a).replace(V,Y),i=a+t.length,r?o+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":e?o+="'+\n((__t=("+e+"))==null?'':__t)+\n'":u&&(o+="';\n"+u+"\n__p+='"),t}),o+="';\n",t.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{e=new Function(t.variable||"obj","_",o)}catch(n){throw n.source=o,n}var a=function(n){return e.call(this,n,g)},c=t.variable||"obj";return a.source="function("+c+"){\n"+o+"}",a},g.chain=function(n){var t=g(n);return t._chain=!0,t};var Q=function(n,t){return n._chain?g(t).chain():t};g.mixin=function(n){return g.each(g.functions(n),function(t){var r=g[t]=n[t];g.prototype[t]=function(){var n=[this._wrapped];return l.apply(n,arguments),Q(this,r.apply(g,n))}}),g},g.mixin(g),g.each(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=o[n];g.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!==n&&"splice"!==n||0!==r.length||delete r[0],Q(this,r)}}),g.each(["concat","join","slice"],function(n){var t=o[n];g.prototype[n]=function(){return Q(this,t.apply(this._wrapped,arguments))}}),g.prototype.value=function(){return this._wrapped},g.prototype.valueOf=g.prototype.toJSON=g.prototype.value,g.prototype.toString=function(){return String(this._wrapped)},void 0===(e=function(){return g}.apply(t,[]))||(r.exports=e)}()}).call(this,r(2),r(3)(n))},function(n,t,r){"use strict";r.r(t);var e=r(0);const u=Object(e.template)('<article><div class="article-info"><h3><a target="_blank" href="<%= url %>"><%= title %></a></h3><p><%= description %></p></div><div class="article-rating" style="color: <%= color %>"><%= rating %></div></article>'),i=Object(e.template)('<span>Based on scores from <%= count %> sites the product\'s total score is</span><span class="total-score-value" style="color: <%= color %>"><%= score %></span>');function o(){const n=document.getElementById("searchkey").value;if(n&&n.length>5){document.getElementById("error").textContent="";const t=document.getElementById("results-list"),r=document.getElementById("total-score");t.innerHTML="",r.innerHTML="Searching...",Promise.all([c(n,1),c(n,2),c(n,3),c(n,4),c(n,5)]).then(n=>Promise.all(n.map(n=>n.json()))).then(n=>n.map(n=>n.items||n.error).flat()).then(function(n){let e=0,o=0;if(n.forEach(n=>{if(!n)return;if(n.errors&&"dailyLimitExceeded"===n.errors[0].reason)return void(document.getElementById("error").textContent="Maximum number of queries for the day has been reached. Try again tomorrow.");let r=n.title+" -- ";if(n.pagemap.aggregaterating&&n.pagemap.aggregaterating.length&&void 0!==n.pagemap.aggregaterating[0].bestrating){const t=l(parseFloat(n.pagemap.aggregaterating[0].ratingvalue),parseFloat(n.pagemap.aggregaterating[0].bestrating));if(isNaN(t))return;r+="Score: "+t,e++,o+=t}else if(n.pagemap.rating){const i=n.pagemap.rating.map(n=>{const t=l(parseFloat(n.ratingvalue),parseFloat(n.bestrating));if(!isNaN(t))return e++,o+=t,t}),c=i.reduce((n,t)=>n+t,0)/i.length;if(isNaN(c))return;t.innerHTML+=u({title:n.title,url:n.link,description:n.snippet,rating:(5*c).toFixed(1),color:a(5*c)}),r+="Score: "+c}}),e>0){const n=5*o/e;r.innerHTML=i({score:n.toFixed(1),count:e,color:a(n)})}})}else document.getElementById("error").textContent="Search term minimum length is 5"}function a(n){return n<2?"brown":n<3?"red":n<4?"#f1f100":n<4.5?"limegreen":"seagreen"}function c(n,t=1){return n?fetch(`https://www.googleapis.com/customsearch/v1?cx=005042070686331231502:7crlel-6ae8&key=AIzaSyCLu_FyerPoUZZpci5q0Z-cw3IYmD0rGCw&q=${n}&num=10&start=${10*t}`,{method:"GET",headers:{"Content-Type":"application/json"}}):null}function l(n,t){return n/t}document.getElementById("submit").onclick=o,document.getElementById("searchkey").onkeypress=n=>{13===n.keyCode&&o()}},function(n,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(n){"object"==typeof window&&(r=window)}n.exports=r},function(n,t){n.exports=function(n){return n.webpackPolyfill||(n.deprecate=function(){},n.paths=[],n.children||(n.children=[]),Object.defineProperty(n,"loaded",{enumerable:!0,get:function(){return n.l}}),Object.defineProperty(n,"id",{enumerable:!0,get:function(){return n.i}}),n.webpackPolyfill=1),n}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3VuZGVyc2NvcmUvdW5kZXJzY29yZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbWFpbi50cyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vZ2xvYmFsLmpzIiwid2VicGFjazovLy8od2VicGFjaykvYnVpbGRpbi9tb2R1bGUuanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJnbG9iYWwiLCJfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyIsInJvb3QiLCJzZWxmIiwidGhpcyIsInByZXZpb3VzVW5kZXJzY29yZSIsIl8iLCJBcnJheVByb3RvIiwiQXJyYXkiLCJPYmpQcm90byIsIlN5bWJvbFByb3RvIiwicHVzaCIsInNsaWNlIiwidG9TdHJpbmciLCJuYXRpdmVJc0FycmF5IiwiaXNBcnJheSIsIm5hdGl2ZUtleXMiLCJrZXlzIiwibmF0aXZlQ3JlYXRlIiwiQ3RvciIsIm9iaiIsIl93cmFwcGVkIiwibm9kZVR5cGUiLCJWRVJTSU9OIiwiYnVpbHRpbkl0ZXJhdGVlIiwib3B0aW1pemVDYiIsImZ1bmMiLCJjb250ZXh0IiwiYXJnQ291bnQiLCJpbmRleCIsImNvbGxlY3Rpb24iLCJhY2N1bXVsYXRvciIsImFwcGx5IiwiYXJndW1lbnRzIiwiY2IiLCJpdGVyYXRlZSIsImlkZW50aXR5IiwiaXNGdW5jdGlvbiIsImlzT2JqZWN0IiwibWF0Y2hlciIsIkluZmluaXR5IiwicmVzdEFyZ3VtZW50cyIsInN0YXJ0SW5kZXgiLCJsZW5ndGgiLCJNYXRoIiwibWF4IiwicmVzdCIsImFyZ3MiLCJiYXNlQ3JlYXRlIiwicmVzdWx0Iiwic2hhbGxvd1Byb3BlcnR5IiwiaGFzIiwicGF0aCIsImRlZXBHZXQiLCJNQVhfQVJSQVlfSU5ERVgiLCJwb3ciLCJnZXRMZW5ndGgiLCJpc0FycmF5TGlrZSIsImVhY2giLCJmb3JFYWNoIiwibWFwIiwiY29sbGVjdCIsInJlc3VsdHMiLCJjdXJyZW50S2V5IiwiY3JlYXRlUmVkdWNlIiwiZGlyIiwicmVkdWNlciIsIm1lbW8iLCJpbml0aWFsIiwicmVkdWNlIiwiZm9sZGwiLCJpbmplY3QiLCJyZWR1Y2VSaWdodCIsImZvbGRyIiwiZmluZCIsImRldGVjdCIsInByZWRpY2F0ZSIsImZpbmRJbmRleCIsImZpbmRLZXkiLCJmaWx0ZXIiLCJzZWxlY3QiLCJsaXN0IiwicmVqZWN0IiwibmVnYXRlIiwiZXZlcnkiLCJhbGwiLCJzb21lIiwiYW55IiwiY29udGFpbnMiLCJpbmNsdWRlcyIsImluY2x1ZGUiLCJpdGVtIiwiZnJvbUluZGV4IiwiZ3VhcmQiLCJ2YWx1ZXMiLCJpbmRleE9mIiwiaW52b2tlIiwiY29udGV4dFBhdGgiLCJtZXRob2QiLCJwbHVjayIsIndoZXJlIiwiYXR0cnMiLCJmaW5kV2hlcmUiLCJjb21wdXRlZCIsImxhc3RDb21wdXRlZCIsInYiLCJtaW4iLCJzaHVmZmxlIiwic2FtcGxlIiwicmFuZG9tIiwiY2xvbmUiLCJsYXN0IiwicmFuZCIsInRlbXAiLCJzb3J0QnkiLCJjcml0ZXJpYSIsInNvcnQiLCJsZWZ0IiwicmlnaHQiLCJhIiwiYiIsImdyb3VwIiwiYmVoYXZpb3IiLCJwYXJ0aXRpb24iLCJncm91cEJ5IiwiaW5kZXhCeSIsImNvdW50QnkiLCJyZVN0clN5bWJvbCIsInRvQXJyYXkiLCJpc1N0cmluZyIsIm1hdGNoIiwic2l6ZSIsInBhc3MiLCJmaXJzdCIsImhlYWQiLCJ0YWtlIiwiYXJyYXkiLCJ0YWlsIiwiZHJvcCIsImNvbXBhY3QiLCJCb29sZWFuIiwiZmxhdHRlbiIsImlucHV0Iiwic2hhbGxvdyIsInN0cmljdCIsIm91dHB1dCIsImlkeCIsImlzQXJndW1lbnRzIiwiaiIsImxlbiIsIndpdGhvdXQiLCJvdGhlckFycmF5cyIsImRpZmZlcmVuY2UiLCJ1bmlxIiwidW5pcXVlIiwiaXNTb3J0ZWQiLCJpc0Jvb2xlYW4iLCJzZWVuIiwidW5pb24iLCJhcnJheXMiLCJpbnRlcnNlY3Rpb24iLCJhcmdzTGVuZ3RoIiwidW56aXAiLCJ6aXAiLCJjcmVhdGVQcmVkaWNhdGVJbmRleEZpbmRlciIsImZpbmRMYXN0SW5kZXgiLCJzb3J0ZWRJbmRleCIsImxvdyIsImhpZ2giLCJtaWQiLCJmbG9vciIsImNyZWF0ZUluZGV4RmluZGVyIiwicHJlZGljYXRlRmluZCIsImlzTmFOIiwibGFzdEluZGV4T2YiLCJyYW5nZSIsInN0YXJ0Iiwic3RvcCIsInN0ZXAiLCJjZWlsIiwiY2h1bmsiLCJjb3VudCIsImV4ZWN1dGVCb3VuZCIsInNvdXJjZUZ1bmMiLCJib3VuZEZ1bmMiLCJjYWxsaW5nQ29udGV4dCIsIlR5cGVFcnJvciIsImJvdW5kIiwiY2FsbEFyZ3MiLCJjb25jYXQiLCJwYXJ0aWFsIiwiYm91bmRBcmdzIiwicGxhY2Vob2xkZXIiLCJwb3NpdGlvbiIsImJpbmRBbGwiLCJFcnJvciIsIm1lbW9pemUiLCJoYXNoZXIiLCJjYWNoZSIsImFkZHJlc3MiLCJkZWxheSIsIndhaXQiLCJzZXRUaW1lb3V0IiwiZGVmZXIiLCJ0aHJvdHRsZSIsIm9wdGlvbnMiLCJ0aW1lb3V0IiwicHJldmlvdXMiLCJsYXRlciIsImxlYWRpbmciLCJub3ciLCJ0aHJvdHRsZWQiLCJyZW1haW5pbmciLCJjbGVhclRpbWVvdXQiLCJ0cmFpbGluZyIsImNhbmNlbCIsImRlYm91bmNlIiwiaW1tZWRpYXRlIiwiZGVib3VuY2VkIiwiY2FsbE5vdyIsIndyYXAiLCJ3cmFwcGVyIiwiY29tcG9zZSIsImFmdGVyIiwidGltZXMiLCJiZWZvcmUiLCJvbmNlIiwiaGFzRW51bUJ1ZyIsInByb3BlcnR5SXNFbnVtZXJhYmxlIiwibm9uRW51bWVyYWJsZVByb3BzIiwiY29sbGVjdE5vbkVudW1Qcm9wcyIsIm5vbkVudW1JZHgiLCJjb25zdHJ1Y3RvciIsInByb3RvIiwicHJvcCIsImFsbEtleXMiLCJtYXBPYmplY3QiLCJwYWlycyIsImludmVydCIsImZ1bmN0aW9ucyIsIm1ldGhvZHMiLCJuYW1lcyIsImNyZWF0ZUFzc2lnbmVyIiwia2V5c0Z1bmMiLCJkZWZhdWx0cyIsInNvdXJjZSIsImV4dGVuZCIsImV4dGVuZE93biIsImFzc2lnbiIsImVxIiwiZGVlcEVxIiwia2V5SW5PYmoiLCJwaWNrIiwib21pdCIsIlN0cmluZyIsInByb3BzIiwidGFwIiwiaW50ZXJjZXB0b3IiLCJpc01hdGNoIiwiYVN0YWNrIiwiYlN0YWNrIiwidHlwZSIsImNsYXNzTmFtZSIsInZhbHVlT2YiLCJhcmVBcnJheXMiLCJhQ3RvciIsImJDdG9yIiwicG9wIiwiaXNFcXVhbCIsImlzRW1wdHkiLCJpc0VsZW1lbnQiLCJub2RlbGlzdCIsImRvY3VtZW50IiwiY2hpbGROb2RlcyIsIkludDhBcnJheSIsImlzRmluaXRlIiwiaXNTeW1ib2wiLCJwYXJzZUZsb2F0IiwiaXNOdW1iZXIiLCJpc051bGwiLCJpc1VuZGVmaW5lZCIsIm5vQ29uZmxpY3QiLCJjb25zdGFudCIsIm5vb3AiLCJwcm9wZXJ0eU9mIiwibWF0Y2hlcyIsImFjY3VtIiwiRGF0ZSIsImdldFRpbWUiLCJlc2NhcGVNYXAiLCImIiwiPCIsIj4iLCJcIiIsIiciLCJgIiwidW5lc2NhcGVNYXAiLCJjcmVhdGVFc2NhcGVyIiwiZXNjYXBlciIsImpvaW4iLCJ0ZXN0UmVnZXhwIiwiUmVnRXhwIiwicmVwbGFjZVJlZ2V4cCIsInN0cmluZyIsInRlc3QiLCJyZXBsYWNlIiwiZXNjYXBlIiwidW5lc2NhcGUiLCJmYWxsYmFjayIsImlkQ291bnRlciIsInVuaXF1ZUlkIiwicHJlZml4IiwiaWQiLCJ0ZW1wbGF0ZVNldHRpbmdzIiwiZXZhbHVhdGUiLCJpbnRlcnBvbGF0ZSIsIm5vTWF0Y2giLCJlc2NhcGVzIiwiXFwiLCJcciIsIlxuIiwi4oCoIiwi4oCpIiwiZXNjYXBlUmVnRXhwIiwiZXNjYXBlQ2hhciIsInRlbXBsYXRlIiwidGV4dCIsInNldHRpbmdzIiwib2xkU2V0dGluZ3MiLCJyZW5kZXIiLCJvZmZzZXQiLCJ2YXJpYWJsZSIsIkZ1bmN0aW9uIiwiZSIsImRhdGEiLCJhcmd1bWVudCIsImNoYWluIiwiaW5zdGFuY2UiLCJfY2hhaW4iLCJjaGFpblJlc3VsdCIsIm1peGluIiwidG9KU09OIiwidW5kZWZpbmVkIiwiX193ZWJwYWNrX2V4cG9ydHNfXyIsInVuZGVyc2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyIsImFydGljbGVUZW1wbGF0ZSIsInRvdGFsU2NvcmVUZW1wbGF0ZSIsInNlYXJjaCIsInNlYXJjaGtleSIsImdldEVsZW1lbnRCeUlkIiwidGV4dENvbnRlbnQiLCJyZXN1bHRzTGlzdEVsZW1lbnQiLCJ0b3RhbFNjb3JlRWxlbWVudCIsImlubmVySFRNTCIsIlByb21pc2UiLCJmZXRjaFJlc3VsdHNQYWdlIiwidGhlbiIsInJlc3BvbnNlcyIsInJlc3BvbnNlIiwianNvbiIsInJlc3BvbnNlSnNvbnMiLCJyZXNwb25zZUpzb24iLCJpdGVtcyIsImVycm9yIiwiZmxhdCIsInJhdGluZ3NUb3RhbENvdW50IiwicmF0aW5nc1RvdGFsVmFsdWUiLCJlcnJvcnMiLCJyZWFzb24iLCJwcmludCIsInRpdGxlIiwicGFnZW1hcCIsImFnZ3JlZ2F0ZXJhdGluZyIsImJlc3RyYXRpbmciLCJub3JtYWxpemVkUmF0aW5nIiwibm9ybWFsaXplUmF0aW5nIiwicmF0aW5ndmFsdWUiLCJyYXRpbmciLCJwYWdlUmF0aW5ncyIsInNjb3JlIiwiY3VtdWxhdGVkVmFsdWUiLCJ1cmwiLCJsaW5rIiwiZGVzY3JpcHRpb24iLCJzbmlwcGV0IiwidG9GaXhlZCIsImNvbG9yIiwiZ2V0Q29sb3JGb3JTY29yZSIsInBhZ2UiLCJmZXRjaCIsImhlYWRlcnMiLCJDb250ZW50LVR5cGUiLCJvbmNsaWNrIiwib25rZXlwcmVzcyIsImV2ZW50Iiwia2V5Q29kZSIsImciLCJ3aW5kb3ciLCJ3ZWJwYWNrUG9seWZpbGwiLCJkZXByZWNhdGUiLCJwYXRocyIsImNoaWxkcmVuIl0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxFQUFBLEdBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsR0FBQSxDQUNBRyxFQUFBSCxFQUNBSSxHQUFBLEVBQ0FILFFBQUEsSUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBS0FGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcsT0FBQUMsZUFBQWIsRUFBQVMsRUFBQSxDQUEwQ0ssWUFBQSxFQUFBQyxJQUFBTCxLQUsxQ1osRUFBQWtCLEVBQUEsU0FBQWhCLEdBQ0Esb0JBQUFpQixlQUFBQyxhQUNBTixPQUFBQyxlQUFBYixFQUFBaUIsT0FBQUMsWUFBQSxDQUF3REMsTUFBQSxXQUV4RFAsT0FBQUMsZUFBQWIsRUFBQSxjQUFpRG1CLE9BQUEsS0FRakRyQixFQUFBc0IsRUFBQSxTQUFBRCxFQUFBRSxHQUVBLEdBREEsRUFBQUEsSUFBQUYsRUFBQXJCLEVBQUFxQixJQUNBLEVBQUFFLEVBQUEsT0FBQUYsRUFDQSxLQUFBRSxHQUFBLGlCQUFBRixRQUFBRyxXQUFBLE9BQUFILEVBQ0EsSUFBQUksRUFBQVgsT0FBQVksT0FBQSxNQUdB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dCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMSk7XG4iLCIvLyAgICAgVW5kZXJzY29yZS5qcyAxLjkuMVxuLy8gICAgIGh0dHA6Ly91bmRlcnNjb3JlanMub3JnXG4vLyAgICAgKGMpIDIwMDktMjAxOCBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuLy8gICAgIFVuZGVyc2NvcmUgbWF5IGJlIGZyZWVseSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5cbihmdW5jdGlvbigpIHtcblxuICAvLyBCYXNlbGluZSBzZXR1cFxuICAvLyAtLS0tLS0tLS0tLS0tLVxuXG4gIC8vIEVzdGFibGlzaCB0aGUgcm9vdCBvYmplY3QsIGB3aW5kb3dgIChgc2VsZmApIGluIHRoZSBicm93c2VyLCBgZ2xvYmFsYFxuICAvLyBvbiB0aGUgc2VydmVyLCBvciBgdGhpc2AgaW4gc29tZSB2aXJ0dWFsIG1hY2hpbmVzLiBXZSB1c2UgYHNlbGZgXG4gIC8vIGluc3RlYWQgb2YgYHdpbmRvd2AgZm9yIGBXZWJXb3JrZXJgIHN1cHBvcnQuXG4gIHZhciByb290ID0gdHlwZW9mIHNlbGYgPT0gJ29iamVjdCcgJiYgc2VsZi5zZWxmID09PSBzZWxmICYmIHNlbGYgfHxcbiAgICAgICAgICAgIHR5cGVvZiBnbG9iYWwgPT0gJ29iamVjdCcgJiYgZ2xvYmFsLmdsb2JhbCA9PT0gZ2xvYmFsICYmIGdsb2JhbCB8fFxuICAgICAgICAgICAgdGhpcyB8fFxuICAgICAgICAgICAge307XG5cbiAgLy8gU2F2ZSB0aGUgcHJldmlvdXMgdmFsdWUgb2YgdGhlIGBfYCB2YXJpYWJsZS5cbiAgdmFyIHByZXZpb3VzVW5kZXJzY29yZSA9IHJvb3QuXztcblxuICAvLyBTYXZlIGJ5dGVzIGluIHRoZSBtaW5pZmllZCAoYnV0IG5vdCBnemlwcGVkKSB2ZXJzaW9uOlxuICB2YXIgQXJyYXlQcm90byA9IEFycmF5LnByb3RvdHlwZSwgT2JqUHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuICB2YXIgU3ltYm9sUHJvdG8gPSB0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyA/IFN5bWJvbC5wcm90b3R5cGUgOiBudWxsO1xuXG4gIC8vIENyZWF0ZSBxdWljayByZWZlcmVuY2UgdmFyaWFibGVzIGZvciBzcGVlZCBhY2Nlc3MgdG8gY29yZSBwcm90b3R5cGVzLlxuICB2YXIgcHVzaCA9IEFycmF5UHJvdG8ucHVzaCxcbiAgICAgIHNsaWNlID0gQXJyYXlQcm90by5zbGljZSxcbiAgICAgIHRvU3RyaW5nID0gT2JqUHJvdG8udG9TdHJpbmcsXG4gICAgICBoYXNPd25Qcm9wZXJ0eSA9IE9ialByb3RvLmhhc093blByb3BlcnR5O1xuXG4gIC8vIEFsbCAqKkVDTUFTY3JpcHQgNSoqIG5hdGl2ZSBmdW5jdGlvbiBpbXBsZW1lbnRhdGlvbnMgdGhhdCB3ZSBob3BlIHRvIHVzZVxuICAvLyBhcmUgZGVjbGFyZWQgaGVyZS5cbiAgdmFyIG5hdGl2ZUlzQXJyYXkgPSBBcnJheS5pc0FycmF5LFxuICAgICAgbmF0aXZlS2V5cyA9IE9iamVjdC5rZXlzLFxuICAgICAgbmF0aXZlQ3JlYXRlID0gT2JqZWN0LmNyZWF0ZTtcblxuICAvLyBOYWtlZCBmdW5jdGlvbiByZWZlcmVuY2UgZm9yIHN1cnJvZ2F0ZS1wcm90b3R5cGUtc3dhcHBpbmcuXG4gIHZhciBDdG9yID0gZnVuY3Rpb24oKXt9O1xuXG4gIC8vIENyZWF0ZSBhIHNhZmUgcmVmZXJlbmNlIHRvIHRoZSBVbmRlcnNjb3JlIG9iamVjdCBmb3IgdXNlIGJlbG93LlxuICB2YXIgXyA9IGZ1bmN0aW9uKG9iaikge1xuICAgIGlmIChvYmogaW5zdGFuY2VvZiBfKSByZXR1cm4gb2JqO1xuICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBfKSkgcmV0dXJuIG5ldyBfKG9iaik7XG4gICAgdGhpcy5fd3JhcHBlZCA9IG9iajtcbiAgfTtcblxuICAvLyBFeHBvcnQgdGhlIFVuZGVyc2NvcmUgb2JqZWN0IGZvciAqKk5vZGUuanMqKiwgd2l0aFxuICAvLyBiYWNrd2FyZHMtY29tcGF0aWJpbGl0eSBmb3IgdGhlaXIgb2xkIG1vZHVsZSBBUEkuIElmIHdlJ3JlIGluXG4gIC8vIHRoZSBicm93c2VyLCBhZGQgYF9gIGFzIGEgZ2xvYmFsIG9iamVjdC5cbiAgLy8gKGBub2RlVHlwZWAgaXMgY2hlY2tlZCB0byBlbnN1cmUgdGhhdCBgbW9kdWxlYFxuICAvLyBhbmQgYGV4cG9ydHNgIGFyZSBub3QgSFRNTCBlbGVtZW50cy4pXG4gIGlmICh0eXBlb2YgZXhwb3J0cyAhPSAndW5kZWZpbmVkJyAmJiAhZXhwb3J0cy5ub2RlVHlwZSkge1xuICAgIGlmICh0eXBlb2YgbW9kdWxlICE9ICd1bmRlZmluZWQnICYmICFtb2R1bGUubm9kZVR5cGUgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICAgIGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IF87XG4gICAgfVxuICAgIGV4cG9ydHMuXyA9IF87XG4gIH0gZWxzZSB7XG4gICAgcm9vdC5fID0gXztcbiAgfVxuXG4gIC8vIEN1cnJlbnQgdmVyc2lvbi5cbiAgXy5WRVJTSU9OID0gJzEuOS4xJztcblxuICAvLyBJbnRlcm5hbCBmdW5jdGlvbiB0aGF0IHJldHVybnMgYW4gZWZmaWNpZW50IChmb3IgY3VycmVudCBlbmdpbmVzKSB2ZXJzaW9uXG4gIC8vIG9mIHRoZSBwYXNzZWQtaW4gY2FsbGJhY2ssIHRvIGJlIHJlcGVhdGVkbHkgYXBwbGllZCBpbiBvdGhlciBVbmRlcnNjb3JlXG4gIC8vIGZ1bmN0aW9ucy5cbiAgdmFyIG9wdGltaXplQ2IgPSBmdW5jdGlvbihmdW5jLCBjb250ZXh0LCBhcmdDb3VudCkge1xuICAgIGlmIChjb250ZXh0ID09PSB2b2lkIDApIHJldHVybiBmdW5jO1xuICAgIHN3aXRjaCAoYXJnQ291bnQgPT0gbnVsbCA/IDMgOiBhcmdDb3VudCkge1xuICAgICAgY2FzZSAxOiByZXR1cm4gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmMuY2FsbChjb250ZXh0LCB2YWx1ZSk7XG4gICAgICB9O1xuICAgICAgLy8gVGhlIDItYXJndW1lbnQgY2FzZSBpcyBvbWl0dGVkIGJlY2F1c2Ugd2XigJlyZSBub3QgdXNpbmcgaXQuXG4gICAgICBjYXNlIDM6IHJldHVybiBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIGZ1bmMuY2FsbChjb250ZXh0LCB2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pO1xuICAgICAgfTtcbiAgICAgIGNhc2UgNDogcmV0dXJuIGZ1bmN0aW9uKGFjY3VtdWxhdG9yLCB2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIGZ1bmMuY2FsbChjb250ZXh0LCBhY2N1bXVsYXRvciwgdmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKTtcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3VtZW50cyk7XG4gICAgfTtcbiAgfTtcblxuICB2YXIgYnVpbHRpbkl0ZXJhdGVlO1xuXG4gIC8vIEFuIGludGVybmFsIGZ1bmN0aW9uIHRvIGdlbmVyYXRlIGNhbGxiYWNrcyB0aGF0IGNhbiBiZSBhcHBsaWVkIHRvIGVhY2hcbiAgLy8gZWxlbWVudCBpbiBhIGNvbGxlY3Rpb24sIHJldHVybmluZyB0aGUgZGVzaXJlZCByZXN1bHQg4oCUIGVpdGhlciBgaWRlbnRpdHlgLFxuICAvLyBhbiBhcmJpdHJhcnkgY2FsbGJhY2ssIGEgcHJvcGVydHkgbWF0Y2hlciwgb3IgYSBwcm9wZXJ0eSBhY2Nlc3Nvci5cbiAgdmFyIGNiID0gZnVuY3Rpb24odmFsdWUsIGNvbnRleHQsIGFyZ0NvdW50KSB7XG4gICAgaWYgKF8uaXRlcmF0ZWUgIT09IGJ1aWx0aW5JdGVyYXRlZSkgcmV0dXJuIF8uaXRlcmF0ZWUodmFsdWUsIGNvbnRleHQpO1xuICAgIGlmICh2YWx1ZSA9PSBudWxsKSByZXR1cm4gXy5pZGVudGl0eTtcbiAgICBpZiAoXy5pc0Z1bmN0aW9uKHZhbHVlKSkgcmV0dXJuIG9wdGltaXplQ2IodmFsdWUsIGNvbnRleHQsIGFyZ0NvdW50KTtcbiAgICBpZiAoXy5pc09iamVjdCh2YWx1ZSkgJiYgIV8uaXNBcnJheSh2YWx1ZSkpIHJldHVybiBfLm1hdGNoZXIodmFsdWUpO1xuICAgIHJldHVybiBfLnByb3BlcnR5KHZhbHVlKTtcbiAgfTtcblxuICAvLyBFeHRlcm5hbCB3cmFwcGVyIGZvciBvdXIgY2FsbGJhY2sgZ2VuZXJhdG9yLiBVc2VycyBtYXkgY3VzdG9taXplXG4gIC8vIGBfLml0ZXJhdGVlYCBpZiB0aGV5IHdhbnQgYWRkaXRpb25hbCBwcmVkaWNhdGUvaXRlcmF0ZWUgc2hvcnRoYW5kIHN0eWxlcy5cbiAgLy8gVGhpcyBhYnN0cmFjdGlvbiBoaWRlcyB0aGUgaW50ZXJuYWwtb25seSBhcmdDb3VudCBhcmd1bWVudC5cbiAgXy5pdGVyYXRlZSA9IGJ1aWx0aW5JdGVyYXRlZSA9IGZ1bmN0aW9uKHZhbHVlLCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGNiKHZhbHVlLCBjb250ZXh0LCBJbmZpbml0eSk7XG4gIH07XG5cbiAgLy8gU29tZSBmdW5jdGlvbnMgdGFrZSBhIHZhcmlhYmxlIG51bWJlciBvZiBhcmd1bWVudHMsIG9yIGEgZmV3IGV4cGVjdGVkXG4gIC8vIGFyZ3VtZW50cyBhdCB0aGUgYmVnaW5uaW5nIGFuZCB0aGVuIGEgdmFyaWFibGUgbnVtYmVyIG9mIHZhbHVlcyB0byBvcGVyYXRlXG4gIC8vIG9uLiBUaGlzIGhlbHBlciBhY2N1bXVsYXRlcyBhbGwgcmVtYWluaW5nIGFyZ3VtZW50cyBwYXN0IHRoZSBmdW5jdGlvbuKAmXNcbiAgLy8gYXJndW1lbnQgbGVuZ3RoIChvciBhbiBleHBsaWNpdCBgc3RhcnRJbmRleGApLCBpbnRvIGFuIGFycmF5IHRoYXQgYmVjb21lc1xuICAvLyB0aGUgbGFzdCBhcmd1bWVudC4gU2ltaWxhciB0byBFUzbigJlzIFwicmVzdCBwYXJhbWV0ZXJcIi5cbiAgdmFyIHJlc3RBcmd1bWVudHMgPSBmdW5jdGlvbihmdW5jLCBzdGFydEluZGV4KSB7XG4gICAgc3RhcnRJbmRleCA9IHN0YXJ0SW5kZXggPT0gbnVsbCA/IGZ1bmMubGVuZ3RoIC0gMSA6ICtzdGFydEluZGV4O1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBsZW5ndGggPSBNYXRoLm1heChhcmd1bWVudHMubGVuZ3RoIC0gc3RhcnRJbmRleCwgMCksXG4gICAgICAgICAgcmVzdCA9IEFycmF5KGxlbmd0aCksXG4gICAgICAgICAgaW5kZXggPSAwO1xuICAgICAgZm9yICg7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgIHJlc3RbaW5kZXhdID0gYXJndW1lbnRzW2luZGV4ICsgc3RhcnRJbmRleF07XG4gICAgICB9XG4gICAgICBzd2l0Y2ggKHN0YXJ0SW5kZXgpIHtcbiAgICAgICAgY2FzZSAwOiByZXR1cm4gZnVuYy5jYWxsKHRoaXMsIHJlc3QpO1xuICAgICAgICBjYXNlIDE6IHJldHVybiBmdW5jLmNhbGwodGhpcywgYXJndW1lbnRzWzBdLCByZXN0KTtcbiAgICAgICAgY2FzZSAyOiByZXR1cm4gZnVuYy5jYWxsKHRoaXMsIGFyZ3VtZW50c1swXSwgYXJndW1lbnRzWzFdLCByZXN0KTtcbiAgICAgIH1cbiAgICAgIHZhciBhcmdzID0gQXJyYXkoc3RhcnRJbmRleCArIDEpO1xuICAgICAgZm9yIChpbmRleCA9IDA7IGluZGV4IDwgc3RhcnRJbmRleDsgaW5kZXgrKykge1xuICAgICAgICBhcmdzW2luZGV4XSA9IGFyZ3VtZW50c1tpbmRleF07XG4gICAgICB9XG4gICAgICBhcmdzW3N0YXJ0SW5kZXhdID0gcmVzdDtcbiAgICAgIHJldHVybiBmdW5jLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgIH07XG4gIH07XG5cbiAgLy8gQW4gaW50ZXJuYWwgZnVuY3Rpb24gZm9yIGNyZWF0aW5nIGEgbmV3IG9iamVjdCB0aGF0IGluaGVyaXRzIGZyb20gYW5vdGhlci5cbiAgdmFyIGJhc2VDcmVhdGUgPSBmdW5jdGlvbihwcm90b3R5cGUpIHtcbiAgICBpZiAoIV8uaXNPYmplY3QocHJvdG90eXBlKSkgcmV0dXJuIHt9O1xuICAgIGlmIChuYXRpdmVDcmVhdGUpIHJldHVybiBuYXRpdmVDcmVhdGUocHJvdG90eXBlKTtcbiAgICBDdG9yLnByb3RvdHlwZSA9IHByb3RvdHlwZTtcbiAgICB2YXIgcmVzdWx0ID0gbmV3IEN0b3I7XG4gICAgQ3Rvci5wcm90b3R5cGUgPSBudWxsO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgdmFyIHNoYWxsb3dQcm9wZXJ0eSA9IGZ1bmN0aW9uKGtleSkge1xuICAgIHJldHVybiBmdW5jdGlvbihvYmopIHtcbiAgICAgIHJldHVybiBvYmogPT0gbnVsbCA/IHZvaWQgMCA6IG9ialtrZXldO1xuICAgIH07XG4gIH07XG5cbiAgdmFyIGhhcyA9IGZ1bmN0aW9uKG9iaiwgcGF0aCkge1xuICAgIHJldHVybiBvYmogIT0gbnVsbCAmJiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcGF0aCk7XG4gIH1cblxuICB2YXIgZGVlcEdldCA9IGZ1bmN0aW9uKG9iaiwgcGF0aCkge1xuICAgIHZhciBsZW5ndGggPSBwYXRoLmxlbmd0aDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAob2JqID09IG51bGwpIHJldHVybiB2b2lkIDA7XG4gICAgICBvYmogPSBvYmpbcGF0aFtpXV07XG4gICAgfVxuICAgIHJldHVybiBsZW5ndGggPyBvYmogOiB2b2lkIDA7XG4gIH07XG5cbiAgLy8gSGVscGVyIGZvciBjb2xsZWN0aW9uIG1ldGhvZHMgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgYSBjb2xsZWN0aW9uXG4gIC8vIHNob3VsZCBiZSBpdGVyYXRlZCBhcyBhbiBhcnJheSBvciBhcyBhbiBvYmplY3QuXG4gIC8vIFJlbGF0ZWQ6IGh0dHA6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLXRvbGVuZ3RoXG4gIC8vIEF2b2lkcyBhIHZlcnkgbmFzdHkgaU9TIDggSklUIGJ1ZyBvbiBBUk0tNjQuICMyMDk0XG4gIHZhciBNQVhfQVJSQVlfSU5ERVggPSBNYXRoLnBvdygyLCA1MykgLSAxO1xuICB2YXIgZ2V0TGVuZ3RoID0gc2hhbGxvd1Byb3BlcnR5KCdsZW5ndGgnKTtcbiAgdmFyIGlzQXJyYXlMaWtlID0gZnVuY3Rpb24oY29sbGVjdGlvbikge1xuICAgIHZhciBsZW5ndGggPSBnZXRMZW5ndGgoY29sbGVjdGlvbik7XG4gICAgcmV0dXJuIHR5cGVvZiBsZW5ndGggPT0gJ251bWJlcicgJiYgbGVuZ3RoID49IDAgJiYgbGVuZ3RoIDw9IE1BWF9BUlJBWV9JTkRFWDtcbiAgfTtcblxuICAvLyBDb2xsZWN0aW9uIEZ1bmN0aW9uc1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIC8vIFRoZSBjb3JuZXJzdG9uZSwgYW4gYGVhY2hgIGltcGxlbWVudGF0aW9uLCBha2EgYGZvckVhY2hgLlxuICAvLyBIYW5kbGVzIHJhdyBvYmplY3RzIGluIGFkZGl0aW9uIHRvIGFycmF5LWxpa2VzLiBUcmVhdHMgYWxsXG4gIC8vIHNwYXJzZSBhcnJheS1saWtlcyBhcyBpZiB0aGV5IHdlcmUgZGVuc2UuXG4gIF8uZWFjaCA9IF8uZm9yRWFjaCA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICBpdGVyYXRlZSA9IG9wdGltaXplQ2IoaXRlcmF0ZWUsIGNvbnRleHQpO1xuICAgIHZhciBpLCBsZW5ndGg7XG4gICAgaWYgKGlzQXJyYXlMaWtlKG9iaikpIHtcbiAgICAgIGZvciAoaSA9IDAsIGxlbmd0aCA9IG9iai5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBpdGVyYXRlZShvYmpbaV0sIGksIG9iaik7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBrZXlzID0gXy5rZXlzKG9iaik7XG4gICAgICBmb3IgKGkgPSAwLCBsZW5ndGggPSBrZXlzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGl0ZXJhdGVlKG9ialtrZXlzW2ldXSwga2V5c1tpXSwgb2JqKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG9iajtcbiAgfTtcblxuICAvLyBSZXR1cm4gdGhlIHJlc3VsdHMgb2YgYXBwbHlpbmcgdGhlIGl0ZXJhdGVlIHRvIGVhY2ggZWxlbWVudC5cbiAgXy5tYXAgPSBfLmNvbGxlY3QgPSBmdW5jdGlvbihvYmosIGl0ZXJhdGVlLCBjb250ZXh0KSB7XG4gICAgaXRlcmF0ZWUgPSBjYihpdGVyYXRlZSwgY29udGV4dCk7XG4gICAgdmFyIGtleXMgPSAhaXNBcnJheUxpa2Uob2JqKSAmJiBfLmtleXMob2JqKSxcbiAgICAgICAgbGVuZ3RoID0gKGtleXMgfHwgb2JqKS5sZW5ndGgsXG4gICAgICAgIHJlc3VsdHMgPSBBcnJheShsZW5ndGgpO1xuICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIHZhciBjdXJyZW50S2V5ID0ga2V5cyA/IGtleXNbaW5kZXhdIDogaW5kZXg7XG4gICAgICByZXN1bHRzW2luZGV4XSA9IGl0ZXJhdGVlKG9ialtjdXJyZW50S2V5XSwgY3VycmVudEtleSwgb2JqKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH07XG5cbiAgLy8gQ3JlYXRlIGEgcmVkdWNpbmcgZnVuY3Rpb24gaXRlcmF0aW5nIGxlZnQgb3IgcmlnaHQuXG4gIHZhciBjcmVhdGVSZWR1Y2UgPSBmdW5jdGlvbihkaXIpIHtcbiAgICAvLyBXcmFwIGNvZGUgdGhhdCByZWFzc2lnbnMgYXJndW1lbnQgdmFyaWFibGVzIGluIGEgc2VwYXJhdGUgZnVuY3Rpb24gdGhhblxuICAgIC8vIHRoZSBvbmUgdGhhdCBhY2Nlc3NlcyBgYXJndW1lbnRzLmxlbmd0aGAgdG8gYXZvaWQgYSBwZXJmIGhpdC4gKCMxOTkxKVxuICAgIHZhciByZWR1Y2VyID0gZnVuY3Rpb24ob2JqLCBpdGVyYXRlZSwgbWVtbywgaW5pdGlhbCkge1xuICAgICAgdmFyIGtleXMgPSAhaXNBcnJheUxpa2Uob2JqKSAmJiBfLmtleXMob2JqKSxcbiAgICAgICAgICBsZW5ndGggPSAoa2V5cyB8fCBvYmopLmxlbmd0aCxcbiAgICAgICAgICBpbmRleCA9IGRpciA+IDAgPyAwIDogbGVuZ3RoIC0gMTtcbiAgICAgIGlmICghaW5pdGlhbCkge1xuICAgICAgICBtZW1vID0gb2JqW2tleXMgPyBrZXlzW2luZGV4XSA6IGluZGV4XTtcbiAgICAgICAgaW5kZXggKz0gZGlyO1xuICAgICAgfVxuICAgICAgZm9yICg7IGluZGV4ID49IDAgJiYgaW5kZXggPCBsZW5ndGg7IGluZGV4ICs9IGRpcikge1xuICAgICAgICB2YXIgY3VycmVudEtleSA9IGtleXMgPyBrZXlzW2luZGV4XSA6IGluZGV4O1xuICAgICAgICBtZW1vID0gaXRlcmF0ZWUobWVtbywgb2JqW2N1cnJlbnRLZXldLCBjdXJyZW50S2V5LCBvYmopO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG1lbW87XG4gICAgfTtcblxuICAgIHJldHVybiBmdW5jdGlvbihvYmosIGl0ZXJhdGVlLCBtZW1vLCBjb250ZXh0KSB7XG4gICAgICB2YXIgaW5pdGlhbCA9IGFyZ3VtZW50cy5sZW5ndGggPj0gMztcbiAgICAgIHJldHVybiByZWR1Y2VyKG9iaiwgb3B0aW1pemVDYihpdGVyYXRlZSwgY29udGV4dCwgNCksIG1lbW8sIGluaXRpYWwpO1xuICAgIH07XG4gIH07XG5cbiAgLy8gKipSZWR1Y2UqKiBidWlsZHMgdXAgYSBzaW5nbGUgcmVzdWx0IGZyb20gYSBsaXN0IG9mIHZhbHVlcywgYWthIGBpbmplY3RgLFxuICAvLyBvciBgZm9sZGxgLlxuICBfLnJlZHVjZSA9IF8uZm9sZGwgPSBfLmluamVjdCA9IGNyZWF0ZVJlZHVjZSgxKTtcblxuICAvLyBUaGUgcmlnaHQtYXNzb2NpYXRpdmUgdmVyc2lvbiBvZiByZWR1Y2UsIGFsc28ga25vd24gYXMgYGZvbGRyYC5cbiAgXy5yZWR1Y2VSaWdodCA9IF8uZm9sZHIgPSBjcmVhdGVSZWR1Y2UoLTEpO1xuXG4gIC8vIFJldHVybiB0aGUgZmlyc3QgdmFsdWUgd2hpY2ggcGFzc2VzIGEgdHJ1dGggdGVzdC4gQWxpYXNlZCBhcyBgZGV0ZWN0YC5cbiAgXy5maW5kID0gXy5kZXRlY3QgPSBmdW5jdGlvbihvYmosIHByZWRpY2F0ZSwgY29udGV4dCkge1xuICAgIHZhciBrZXlGaW5kZXIgPSBpc0FycmF5TGlrZShvYmopID8gXy5maW5kSW5kZXggOiBfLmZpbmRLZXk7XG4gICAgdmFyIGtleSA9IGtleUZpbmRlcihvYmosIHByZWRpY2F0ZSwgY29udGV4dCk7XG4gICAgaWYgKGtleSAhPT0gdm9pZCAwICYmIGtleSAhPT0gLTEpIHJldHVybiBvYmpba2V5XTtcbiAgfTtcblxuICAvLyBSZXR1cm4gYWxsIHRoZSBlbGVtZW50cyB0aGF0IHBhc3MgYSB0cnV0aCB0ZXN0LlxuICAvLyBBbGlhc2VkIGFzIGBzZWxlY3RgLlxuICBfLmZpbHRlciA9IF8uc2VsZWN0ID0gZnVuY3Rpb24ob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpIHtcbiAgICB2YXIgcmVzdWx0cyA9IFtdO1xuICAgIHByZWRpY2F0ZSA9IGNiKHByZWRpY2F0ZSwgY29udGV4dCk7XG4gICAgXy5lYWNoKG9iaiwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBsaXN0KSB7XG4gICAgICBpZiAocHJlZGljYXRlKHZhbHVlLCBpbmRleCwgbGlzdCkpIHJlc3VsdHMucHVzaCh2YWx1ZSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH07XG5cbiAgLy8gUmV0dXJuIGFsbCB0aGUgZWxlbWVudHMgZm9yIHdoaWNoIGEgdHJ1dGggdGVzdCBmYWlscy5cbiAgXy5yZWplY3QgPSBmdW5jdGlvbihvYmosIHByZWRpY2F0ZSwgY29udGV4dCkge1xuICAgIHJldHVybiBfLmZpbHRlcihvYmosIF8ubmVnYXRlKGNiKHByZWRpY2F0ZSkpLCBjb250ZXh0KTtcbiAgfTtcblxuICAvLyBEZXRlcm1pbmUgd2hldGhlciBhbGwgb2YgdGhlIGVsZW1lbnRzIG1hdGNoIGEgdHJ1dGggdGVzdC5cbiAgLy8gQWxpYXNlZCBhcyBgYWxsYC5cbiAgXy5ldmVyeSA9IF8uYWxsID0gZnVuY3Rpb24ob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpIHtcbiAgICBwcmVkaWNhdGUgPSBjYihwcmVkaWNhdGUsIGNvbnRleHQpO1xuICAgIHZhciBrZXlzID0gIWlzQXJyYXlMaWtlKG9iaikgJiYgXy5rZXlzKG9iaiksXG4gICAgICAgIGxlbmd0aCA9IChrZXlzIHx8IG9iaikubGVuZ3RoO1xuICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIHZhciBjdXJyZW50S2V5ID0ga2V5cyA/IGtleXNbaW5kZXhdIDogaW5kZXg7XG4gICAgICBpZiAoIXByZWRpY2F0ZShvYmpbY3VycmVudEtleV0sIGN1cnJlbnRLZXksIG9iaikpIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH07XG5cbiAgLy8gRGV0ZXJtaW5lIGlmIGF0IGxlYXN0IG9uZSBlbGVtZW50IGluIHRoZSBvYmplY3QgbWF0Y2hlcyBhIHRydXRoIHRlc3QuXG4gIC8vIEFsaWFzZWQgYXMgYGFueWAuXG4gIF8uc29tZSA9IF8uYW55ID0gZnVuY3Rpb24ob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpIHtcbiAgICBwcmVkaWNhdGUgPSBjYihwcmVkaWNhdGUsIGNvbnRleHQpO1xuICAgIHZhciBrZXlzID0gIWlzQXJyYXlMaWtlKG9iaikgJiYgXy5rZXlzKG9iaiksXG4gICAgICAgIGxlbmd0aCA9IChrZXlzIHx8IG9iaikubGVuZ3RoO1xuICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIHZhciBjdXJyZW50S2V5ID0ga2V5cyA/IGtleXNbaW5kZXhdIDogaW5kZXg7XG4gICAgICBpZiAocHJlZGljYXRlKG9ialtjdXJyZW50S2V5XSwgY3VycmVudEtleSwgb2JqKSkgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICAvLyBEZXRlcm1pbmUgaWYgdGhlIGFycmF5IG9yIG9iamVjdCBjb250YWlucyBhIGdpdmVuIGl0ZW0gKHVzaW5nIGA9PT1gKS5cbiAgLy8gQWxpYXNlZCBhcyBgaW5jbHVkZXNgIGFuZCBgaW5jbHVkZWAuXG4gIF8uY29udGFpbnMgPSBfLmluY2x1ZGVzID0gXy5pbmNsdWRlID0gZnVuY3Rpb24ob2JqLCBpdGVtLCBmcm9tSW5kZXgsIGd1YXJkKSB7XG4gICAgaWYgKCFpc0FycmF5TGlrZShvYmopKSBvYmogPSBfLnZhbHVlcyhvYmopO1xuICAgIGlmICh0eXBlb2YgZnJvbUluZGV4ICE9ICdudW1iZXInIHx8IGd1YXJkKSBmcm9tSW5kZXggPSAwO1xuICAgIHJldHVybiBfLmluZGV4T2Yob2JqLCBpdGVtLCBmcm9tSW5kZXgpID49IDA7XG4gIH07XG5cbiAgLy8gSW52b2tlIGEgbWV0aG9kICh3aXRoIGFyZ3VtZW50cykgb24gZXZlcnkgaXRlbSBpbiBhIGNvbGxlY3Rpb24uXG4gIF8uaW52b2tlID0gcmVzdEFyZ3VtZW50cyhmdW5jdGlvbihvYmosIHBhdGgsIGFyZ3MpIHtcbiAgICB2YXIgY29udGV4dFBhdGgsIGZ1bmM7XG4gICAgaWYgKF8uaXNGdW5jdGlvbihwYXRoKSkge1xuICAgICAgZnVuYyA9IHBhdGg7XG4gICAgfSBlbHNlIGlmIChfLmlzQXJyYXkocGF0aCkpIHtcbiAgICAgIGNvbnRleHRQYXRoID0gcGF0aC5zbGljZSgwLCAtMSk7XG4gICAgICBwYXRoID0gcGF0aFtwYXRoLmxlbmd0aCAtIDFdO1xuICAgIH1cbiAgICByZXR1cm4gXy5tYXAob2JqLCBmdW5jdGlvbihjb250ZXh0KSB7XG4gICAgICB2YXIgbWV0aG9kID0gZnVuYztcbiAgICAgIGlmICghbWV0aG9kKSB7XG4gICAgICAgIGlmIChjb250ZXh0UGF0aCAmJiBjb250ZXh0UGF0aC5sZW5ndGgpIHtcbiAgICAgICAgICBjb250ZXh0ID0gZGVlcEdldChjb250ZXh0LCBjb250ZXh0UGF0aCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbnRleHQgPT0gbnVsbCkgcmV0dXJuIHZvaWQgMDtcbiAgICAgICAgbWV0aG9kID0gY29udGV4dFtwYXRoXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBtZXRob2QgPT0gbnVsbCA/IG1ldGhvZCA6IG1ldGhvZC5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgLy8gQ29udmVuaWVuY2UgdmVyc2lvbiBvZiBhIGNvbW1vbiB1c2UgY2FzZSBvZiBgbWFwYDogZmV0Y2hpbmcgYSBwcm9wZXJ0eS5cbiAgXy5wbHVjayA9IGZ1bmN0aW9uKG9iaiwga2V5KSB7XG4gICAgcmV0dXJuIF8ubWFwKG9iaiwgXy5wcm9wZXJ0eShrZXkpKTtcbiAgfTtcblxuICAvLyBDb252ZW5pZW5jZSB2ZXJzaW9uIG9mIGEgY29tbW9uIHVzZSBjYXNlIG9mIGBmaWx0ZXJgOiBzZWxlY3Rpbmcgb25seSBvYmplY3RzXG4gIC8vIGNvbnRhaW5pbmcgc3BlY2lmaWMgYGtleTp2YWx1ZWAgcGFpcnMuXG4gIF8ud2hlcmUgPSBmdW5jdGlvbihvYmosIGF0dHJzKSB7XG4gICAgcmV0dXJuIF8uZmlsdGVyKG9iaiwgXy5tYXRjaGVyKGF0dHJzKSk7XG4gIH07XG5cbiAgLy8gQ29udmVuaWVuY2UgdmVyc2lvbiBvZiBhIGNvbW1vbiB1c2UgY2FzZSBvZiBgZmluZGA6IGdldHRpbmcgdGhlIGZpcnN0IG9iamVjdFxuICAvLyBjb250YWluaW5nIHNwZWNpZmljIGBrZXk6dmFsdWVgIHBhaXJzLlxuICBfLmZpbmRXaGVyZSA9IGZ1bmN0aW9uKG9iaiwgYXR0cnMpIHtcbiAgICByZXR1cm4gXy5maW5kKG9iaiwgXy5tYXRjaGVyKGF0dHJzKSk7XG4gIH07XG5cbiAgLy8gUmV0dXJuIHRoZSBtYXhpbXVtIGVsZW1lbnQgKG9yIGVsZW1lbnQtYmFzZWQgY29tcHV0YXRpb24pLlxuICBfLm1heCA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICB2YXIgcmVzdWx0ID0gLUluZmluaXR5LCBsYXN0Q29tcHV0ZWQgPSAtSW5maW5pdHksXG4gICAgICAgIHZhbHVlLCBjb21wdXRlZDtcbiAgICBpZiAoaXRlcmF0ZWUgPT0gbnVsbCB8fCB0eXBlb2YgaXRlcmF0ZWUgPT0gJ251bWJlcicgJiYgdHlwZW9mIG9ialswXSAhPSAnb2JqZWN0JyAmJiBvYmogIT0gbnVsbCkge1xuICAgICAgb2JqID0gaXNBcnJheUxpa2Uob2JqKSA/IG9iaiA6IF8udmFsdWVzKG9iaik7XG4gICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gb2JqLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhbHVlID0gb2JqW2ldO1xuICAgICAgICBpZiAodmFsdWUgIT0gbnVsbCAmJiB2YWx1ZSA+IHJlc3VsdCkge1xuICAgICAgICAgIHJlc3VsdCA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGl0ZXJhdGVlID0gY2IoaXRlcmF0ZWUsIGNvbnRleHQpO1xuICAgICAgXy5lYWNoKG9iaiwgZnVuY3Rpb24odiwgaW5kZXgsIGxpc3QpIHtcbiAgICAgICAgY29tcHV0ZWQgPSBpdGVyYXRlZSh2LCBpbmRleCwgbGlzdCk7XG4gICAgICAgIGlmIChjb21wdXRlZCA+IGxhc3RDb21wdXRlZCB8fCBjb21wdXRlZCA9PT0gLUluZmluaXR5ICYmIHJlc3VsdCA9PT0gLUluZmluaXR5KSB7XG4gICAgICAgICAgcmVzdWx0ID0gdjtcbiAgICAgICAgICBsYXN0Q29tcHV0ZWQgPSBjb21wdXRlZDtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgLy8gUmV0dXJuIHRoZSBtaW5pbXVtIGVsZW1lbnQgKG9yIGVsZW1lbnQtYmFzZWQgY29tcHV0YXRpb24pLlxuICBfLm1pbiA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICB2YXIgcmVzdWx0ID0gSW5maW5pdHksIGxhc3RDb21wdXRlZCA9IEluZmluaXR5LFxuICAgICAgICB2YWx1ZSwgY29tcHV0ZWQ7XG4gICAgaWYgKGl0ZXJhdGVlID09IG51bGwgfHwgdHlwZW9mIGl0ZXJhdGVlID09ICdudW1iZXInICYmIHR5cGVvZiBvYmpbMF0gIT0gJ29iamVjdCcgJiYgb2JqICE9IG51bGwpIHtcbiAgICAgIG9iaiA9IGlzQXJyYXlMaWtlKG9iaikgPyBvYmogOiBfLnZhbHVlcyhvYmopO1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IG9iai5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICB2YWx1ZSA9IG9ialtpXTtcbiAgICAgICAgaWYgKHZhbHVlICE9IG51bGwgJiYgdmFsdWUgPCByZXN1bHQpIHtcbiAgICAgICAgICByZXN1bHQgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpdGVyYXRlZSA9IGNiKGl0ZXJhdGVlLCBjb250ZXh0KTtcbiAgICAgIF8uZWFjaChvYmosIGZ1bmN0aW9uKHYsIGluZGV4LCBsaXN0KSB7XG4gICAgICAgIGNvbXB1dGVkID0gaXRlcmF0ZWUodiwgaW5kZXgsIGxpc3QpO1xuICAgICAgICBpZiAoY29tcHV0ZWQgPCBsYXN0Q29tcHV0ZWQgfHwgY29tcHV0ZWQgPT09IEluZmluaXR5ICYmIHJlc3VsdCA9PT0gSW5maW5pdHkpIHtcbiAgICAgICAgICByZXN1bHQgPSB2O1xuICAgICAgICAgIGxhc3RDb21wdXRlZCA9IGNvbXB1dGVkO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICAvLyBTaHVmZmxlIGEgY29sbGVjdGlvbi5cbiAgXy5zaHVmZmxlID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgcmV0dXJuIF8uc2FtcGxlKG9iaiwgSW5maW5pdHkpO1xuICB9O1xuXG4gIC8vIFNhbXBsZSAqKm4qKiByYW5kb20gdmFsdWVzIGZyb20gYSBjb2xsZWN0aW9uIHVzaW5nIHRoZSBtb2Rlcm4gdmVyc2lvbiBvZiB0aGVcbiAgLy8gW0Zpc2hlci1ZYXRlcyBzaHVmZmxlXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0Zpc2hlcuKAk1lhdGVzX3NodWZmbGUpLlxuICAvLyBJZiAqKm4qKiBpcyBub3Qgc3BlY2lmaWVkLCByZXR1cm5zIGEgc2luZ2xlIHJhbmRvbSBlbGVtZW50LlxuICAvLyBUaGUgaW50ZXJuYWwgYGd1YXJkYCBhcmd1bWVudCBhbGxvd3MgaXQgdG8gd29yayB3aXRoIGBtYXBgLlxuICBfLnNhbXBsZSA9IGZ1bmN0aW9uKG9iaiwgbiwgZ3VhcmQpIHtcbiAgICBpZiAobiA9PSBudWxsIHx8IGd1YXJkKSB7XG4gICAgICBpZiAoIWlzQXJyYXlMaWtlKG9iaikpIG9iaiA9IF8udmFsdWVzKG9iaik7XG4gICAgICByZXR1cm4gb2JqW18ucmFuZG9tKG9iai5sZW5ndGggLSAxKV07XG4gICAgfVxuICAgIHZhciBzYW1wbGUgPSBpc0FycmF5TGlrZShvYmopID8gXy5jbG9uZShvYmopIDogXy52YWx1ZXMob2JqKTtcbiAgICB2YXIgbGVuZ3RoID0gZ2V0TGVuZ3RoKHNhbXBsZSk7XG4gICAgbiA9IE1hdGgubWF4KE1hdGgubWluKG4sIGxlbmd0aCksIDApO1xuICAgIHZhciBsYXN0ID0gbGVuZ3RoIC0gMTtcbiAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgbjsgaW5kZXgrKykge1xuICAgICAgdmFyIHJhbmQgPSBfLnJhbmRvbShpbmRleCwgbGFzdCk7XG4gICAgICB2YXIgdGVtcCA9IHNhbXBsZVtpbmRleF07XG4gICAgICBzYW1wbGVbaW5kZXhdID0gc2FtcGxlW3JhbmRdO1xuICAgICAgc2FtcGxlW3JhbmRdID0gdGVtcDtcbiAgICB9XG4gICAgcmV0dXJuIHNhbXBsZS5zbGljZSgwLCBuKTtcbiAgfTtcblxuICAvLyBTb3J0IHRoZSBvYmplY3QncyB2YWx1ZXMgYnkgYSBjcml0ZXJpb24gcHJvZHVjZWQgYnkgYW4gaXRlcmF0ZWUuXG4gIF8uc29ydEJ5ID0gZnVuY3Rpb24ob2JqLCBpdGVyYXRlZSwgY29udGV4dCkge1xuICAgIHZhciBpbmRleCA9IDA7XG4gICAgaXRlcmF0ZWUgPSBjYihpdGVyYXRlZSwgY29udGV4dCk7XG4gICAgcmV0dXJuIF8ucGx1Y2soXy5tYXAob2JqLCBmdW5jdGlvbih2YWx1ZSwga2V5LCBsaXN0KSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgIGluZGV4OiBpbmRleCsrLFxuICAgICAgICBjcml0ZXJpYTogaXRlcmF0ZWUodmFsdWUsIGtleSwgbGlzdClcbiAgICAgIH07XG4gICAgfSkuc29ydChmdW5jdGlvbihsZWZ0LCByaWdodCkge1xuICAgICAgdmFyIGEgPSBsZWZ0LmNyaXRlcmlhO1xuICAgICAgdmFyIGIgPSByaWdodC5jcml0ZXJpYTtcbiAgICAgIGlmIChhICE9PSBiKSB7XG4gICAgICAgIGlmIChhID4gYiB8fCBhID09PSB2b2lkIDApIHJldHVybiAxO1xuICAgICAgICBpZiAoYSA8IGIgfHwgYiA9PT0gdm9pZCAwKSByZXR1cm4gLTE7XG4gICAgICB9XG4gICAgICByZXR1cm4gbGVmdC5pbmRleCAtIHJpZ2h0LmluZGV4O1xuICAgIH0pLCAndmFsdWUnKTtcbiAgfTtcblxuICAvLyBBbiBpbnRlcm5hbCBmdW5jdGlvbiB1c2VkIGZvciBhZ2dyZWdhdGUgXCJncm91cCBieVwiIG9wZXJhdGlvbnMuXG4gIHZhciBncm91cCA9IGZ1bmN0aW9uKGJlaGF2aW9yLCBwYXJ0aXRpb24pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24ob2JqLCBpdGVyYXRlZSwgY29udGV4dCkge1xuICAgICAgdmFyIHJlc3VsdCA9IHBhcnRpdGlvbiA/IFtbXSwgW11dIDoge307XG4gICAgICBpdGVyYXRlZSA9IGNiKGl0ZXJhdGVlLCBjb250ZXh0KTtcbiAgICAgIF8uZWFjaChvYmosIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCkge1xuICAgICAgICB2YXIga2V5ID0gaXRlcmF0ZWUodmFsdWUsIGluZGV4LCBvYmopO1xuICAgICAgICBiZWhhdmlvcihyZXN1bHQsIHZhbHVlLCBrZXkpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG4gIH07XG5cbiAgLy8gR3JvdXBzIHRoZSBvYmplY3QncyB2YWx1ZXMgYnkgYSBjcml0ZXJpb24uIFBhc3MgZWl0aGVyIGEgc3RyaW5nIGF0dHJpYnV0ZVxuICAvLyB0byBncm91cCBieSwgb3IgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIGNyaXRlcmlvbi5cbiAgXy5ncm91cEJ5ID0gZ3JvdXAoZnVuY3Rpb24ocmVzdWx0LCB2YWx1ZSwga2V5KSB7XG4gICAgaWYgKGhhcyhyZXN1bHQsIGtleSkpIHJlc3VsdFtrZXldLnB1c2godmFsdWUpOyBlbHNlIHJlc3VsdFtrZXldID0gW3ZhbHVlXTtcbiAgfSk7XG5cbiAgLy8gSW5kZXhlcyB0aGUgb2JqZWN0J3MgdmFsdWVzIGJ5IGEgY3JpdGVyaW9uLCBzaW1pbGFyIHRvIGBncm91cEJ5YCwgYnV0IGZvclxuICAvLyB3aGVuIHlvdSBrbm93IHRoYXQgeW91ciBpbmRleCB2YWx1ZXMgd2lsbCBiZSB1bmlxdWUuXG4gIF8uaW5kZXhCeSA9IGdyb3VwKGZ1bmN0aW9uKHJlc3VsdCwgdmFsdWUsIGtleSkge1xuICAgIHJlc3VsdFtrZXldID0gdmFsdWU7XG4gIH0pO1xuXG4gIC8vIENvdW50cyBpbnN0YW5jZXMgb2YgYW4gb2JqZWN0IHRoYXQgZ3JvdXAgYnkgYSBjZXJ0YWluIGNyaXRlcmlvbi4gUGFzc1xuICAvLyBlaXRoZXIgYSBzdHJpbmcgYXR0cmlidXRlIHRvIGNvdW50IGJ5LCBvciBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGVcbiAgLy8gY3JpdGVyaW9uLlxuICBfLmNvdW50QnkgPSBncm91cChmdW5jdGlvbihyZXN1bHQsIHZhbHVlLCBrZXkpIHtcbiAgICBpZiAoaGFzKHJlc3VsdCwga2V5KSkgcmVzdWx0W2tleV0rKzsgZWxzZSByZXN1bHRba2V5XSA9IDE7XG4gIH0pO1xuXG4gIHZhciByZVN0clN5bWJvbCA9IC9bXlxcdWQ4MDAtXFx1ZGZmZl18W1xcdWQ4MDAtXFx1ZGJmZl1bXFx1ZGMwMC1cXHVkZmZmXXxbXFx1ZDgwMC1cXHVkZmZmXS9nO1xuICAvLyBTYWZlbHkgY3JlYXRlIGEgcmVhbCwgbGl2ZSBhcnJheSBmcm9tIGFueXRoaW5nIGl0ZXJhYmxlLlxuICBfLnRvQXJyYXkgPSBmdW5jdGlvbihvYmopIHtcbiAgICBpZiAoIW9iaikgcmV0dXJuIFtdO1xuICAgIGlmIChfLmlzQXJyYXkob2JqKSkgcmV0dXJuIHNsaWNlLmNhbGwob2JqKTtcbiAgICBpZiAoXy5pc1N0cmluZyhvYmopKSB7XG4gICAgICAvLyBLZWVwIHN1cnJvZ2F0ZSBwYWlyIGNoYXJhY3RlcnMgdG9nZXRoZXJcbiAgICAgIHJldHVybiBvYmoubWF0Y2gocmVTdHJTeW1ib2wpO1xuICAgIH1cbiAgICBpZiAoaXNBcnJheUxpa2Uob2JqKSkgcmV0dXJuIF8ubWFwKG9iaiwgXy5pZGVudGl0eSk7XG4gICAgcmV0dXJuIF8udmFsdWVzKG9iaik7XG4gIH07XG5cbiAgLy8gUmV0dXJuIHRoZSBudW1iZXIgb2YgZWxlbWVudHMgaW4gYW4gb2JqZWN0LlxuICBfLnNpemUgPSBmdW5jdGlvbihvYmopIHtcbiAgICBpZiAob2JqID09IG51bGwpIHJldHVybiAwO1xuICAgIHJldHVybiBpc0FycmF5TGlrZShvYmopID8gb2JqLmxlbmd0aCA6IF8ua2V5cyhvYmopLmxlbmd0aDtcbiAgfTtcblxuICAvLyBTcGxpdCBhIGNvbGxlY3Rpb24gaW50byB0d28gYXJyYXlzOiBvbmUgd2hvc2UgZWxlbWVudHMgYWxsIHNhdGlzZnkgdGhlIGdpdmVuXG4gIC8vIHByZWRpY2F0ZSwgYW5kIG9uZSB3aG9zZSBlbGVtZW50cyBhbGwgZG8gbm90IHNhdGlzZnkgdGhlIHByZWRpY2F0ZS5cbiAgXy5wYXJ0aXRpb24gPSBncm91cChmdW5jdGlvbihyZXN1bHQsIHZhbHVlLCBwYXNzKSB7XG4gICAgcmVzdWx0W3Bhc3MgPyAwIDogMV0ucHVzaCh2YWx1ZSk7XG4gIH0sIHRydWUpO1xuXG4gIC8vIEFycmF5IEZ1bmN0aW9uc1xuICAvLyAtLS0tLS0tLS0tLS0tLS1cblxuICAvLyBHZXQgdGhlIGZpcnN0IGVsZW1lbnQgb2YgYW4gYXJyYXkuIFBhc3NpbmcgKipuKiogd2lsbCByZXR1cm4gdGhlIGZpcnN0IE5cbiAgLy8gdmFsdWVzIGluIHRoZSBhcnJheS4gQWxpYXNlZCBhcyBgaGVhZGAgYW5kIGB0YWtlYC4gVGhlICoqZ3VhcmQqKiBjaGVja1xuICAvLyBhbGxvd3MgaXQgdG8gd29yayB3aXRoIGBfLm1hcGAuXG4gIF8uZmlyc3QgPSBfLmhlYWQgPSBfLnRha2UgPSBmdW5jdGlvbihhcnJheSwgbiwgZ3VhcmQpIHtcbiAgICBpZiAoYXJyYXkgPT0gbnVsbCB8fCBhcnJheS5sZW5ndGggPCAxKSByZXR1cm4gbiA9PSBudWxsID8gdm9pZCAwIDogW107XG4gICAgaWYgKG4gPT0gbnVsbCB8fCBndWFyZCkgcmV0dXJuIGFycmF5WzBdO1xuICAgIHJldHVybiBfLmluaXRpYWwoYXJyYXksIGFycmF5Lmxlbmd0aCAtIG4pO1xuICB9O1xuXG4gIC8vIFJldHVybnMgZXZlcnl0aGluZyBidXQgdGhlIGxhc3QgZW50cnkgb2YgdGhlIGFycmF5LiBFc3BlY2lhbGx5IHVzZWZ1bCBvblxuICAvLyB0aGUgYXJndW1lbnRzIG9iamVjdC4gUGFzc2luZyAqKm4qKiB3aWxsIHJldHVybiBhbGwgdGhlIHZhbHVlcyBpblxuICAvLyB0aGUgYXJyYXksIGV4Y2x1ZGluZyB0aGUgbGFzdCBOLlxuICBfLmluaXRpYWwgPSBmdW5jdGlvbihhcnJheSwgbiwgZ3VhcmQpIHtcbiAgICByZXR1cm4gc2xpY2UuY2FsbChhcnJheSwgMCwgTWF0aC5tYXgoMCwgYXJyYXkubGVuZ3RoIC0gKG4gPT0gbnVsbCB8fCBndWFyZCA/IDEgOiBuKSkpO1xuICB9O1xuXG4gIC8vIEdldCB0aGUgbGFzdCBlbGVtZW50IG9mIGFuIGFycmF5LiBQYXNzaW5nICoqbioqIHdpbGwgcmV0dXJuIHRoZSBsYXN0IE5cbiAgLy8gdmFsdWVzIGluIHRoZSBhcnJheS5cbiAgXy5sYXN0ID0gZnVuY3Rpb24oYXJyYXksIG4sIGd1YXJkKSB7XG4gICAgaWYgKGFycmF5ID09IG51bGwgfHwgYXJyYXkubGVuZ3RoIDwgMSkgcmV0dXJuIG4gPT0gbnVsbCA/IHZvaWQgMCA6IFtdO1xuICAgIGlmIChuID09IG51bGwgfHwgZ3VhcmQpIHJldHVybiBhcnJheVthcnJheS5sZW5ndGggLSAxXTtcbiAgICByZXR1cm4gXy5yZXN0KGFycmF5LCBNYXRoLm1heCgwLCBhcnJheS5sZW5ndGggLSBuKSk7XG4gIH07XG5cbiAgLy8gUmV0dXJucyBldmVyeXRoaW5nIGJ1dCB0aGUgZmlyc3QgZW50cnkgb2YgdGhlIGFycmF5LiBBbGlhc2VkIGFzIGB0YWlsYCBhbmQgYGRyb3BgLlxuICAvLyBFc3BlY2lhbGx5IHVzZWZ1bCBvbiB0aGUgYXJndW1lbnRzIG9iamVjdC4gUGFzc2luZyBhbiAqKm4qKiB3aWxsIHJldHVyblxuICAvLyB0aGUgcmVzdCBOIHZhbHVlcyBpbiB0aGUgYXJyYXkuXG4gIF8ucmVzdCA9IF8udGFpbCA9IF8uZHJvcCA9IGZ1bmN0aW9uKGFycmF5LCBuLCBndWFyZCkge1xuICAgIHJldHVybiBzbGljZS5jYWxsKGFycmF5LCBuID09IG51bGwgfHwgZ3VhcmQgPyAxIDogbik7XG4gIH07XG5cbiAgLy8gVHJpbSBvdXQgYWxsIGZhbHN5IHZhbHVlcyBmcm9tIGFuIGFycmF5LlxuICBfLmNvbXBhY3QgPSBmdW5jdGlvbihhcnJheSkge1xuICAgIHJldHVybiBfLmZpbHRlcihhcnJheSwgQm9vbGVhbik7XG4gIH07XG5cbiAgLy8gSW50ZXJuYWwgaW1wbGVtZW50YXRpb24gb2YgYSByZWN1cnNpdmUgYGZsYXR0ZW5gIGZ1bmN0aW9uLlxuICB2YXIgZmxhdHRlbiA9IGZ1bmN0aW9uKGlucHV0LCBzaGFsbG93LCBzdHJpY3QsIG91dHB1dCkge1xuICAgIG91dHB1dCA9IG91dHB1dCB8fCBbXTtcbiAgICB2YXIgaWR4ID0gb3V0cHV0Lmxlbmd0aDtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gZ2V0TGVuZ3RoKGlucHV0KTsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgdmFsdWUgPSBpbnB1dFtpXTtcbiAgICAgIGlmIChpc0FycmF5TGlrZSh2YWx1ZSkgJiYgKF8uaXNBcnJheSh2YWx1ZSkgfHwgXy5pc0FyZ3VtZW50cyh2YWx1ZSkpKSB7XG4gICAgICAgIC8vIEZsYXR0ZW4gY3VycmVudCBsZXZlbCBvZiBhcnJheSBvciBhcmd1bWVudHMgb2JqZWN0LlxuICAgICAgICBpZiAoc2hhbGxvdykge1xuICAgICAgICAgIHZhciBqID0gMCwgbGVuID0gdmFsdWUubGVuZ3RoO1xuICAgICAgICAgIHdoaWxlIChqIDwgbGVuKSBvdXRwdXRbaWR4KytdID0gdmFsdWVbaisrXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmbGF0dGVuKHZhbHVlLCBzaGFsbG93LCBzdHJpY3QsIG91dHB1dCk7XG4gICAgICAgICAgaWR4ID0gb3V0cHV0Lmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICghc3RyaWN0KSB7XG4gICAgICAgIG91dHB1dFtpZHgrK10gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dDtcbiAgfTtcblxuICAvLyBGbGF0dGVuIG91dCBhbiBhcnJheSwgZWl0aGVyIHJlY3Vyc2l2ZWx5IChieSBkZWZhdWx0KSwgb3IganVzdCBvbmUgbGV2ZWwuXG4gIF8uZmxhdHRlbiA9IGZ1bmN0aW9uKGFycmF5LCBzaGFsbG93KSB7XG4gICAgcmV0dXJuIGZsYXR0ZW4oYXJyYXksIHNoYWxsb3csIGZhbHNlKTtcbiAgfTtcblxuICAvLyBSZXR1cm4gYSB2ZXJzaW9uIG9mIHRoZSBhcnJheSB0aGF0IGRvZXMgbm90IGNvbnRhaW4gdGhlIHNwZWNpZmllZCB2YWx1ZShzKS5cbiAgXy53aXRob3V0ID0gcmVzdEFyZ3VtZW50cyhmdW5jdGlvbihhcnJheSwgb3RoZXJBcnJheXMpIHtcbiAgICByZXR1cm4gXy5kaWZmZXJlbmNlKGFycmF5LCBvdGhlckFycmF5cyk7XG4gIH0pO1xuXG4gIC8vIFByb2R1Y2UgYSBkdXBsaWNhdGUtZnJlZSB2ZXJzaW9uIG9mIHRoZSBhcnJheS4gSWYgdGhlIGFycmF5IGhhcyBhbHJlYWR5XG4gIC8vIGJlZW4gc29ydGVkLCB5b3UgaGF2ZSB0aGUgb3B0aW9uIG9mIHVzaW5nIGEgZmFzdGVyIGFsZ29yaXRobS5cbiAgLy8gVGhlIGZhc3RlciBhbGdvcml0aG0gd2lsbCBub3Qgd29yayB3aXRoIGFuIGl0ZXJhdGVlIGlmIHRoZSBpdGVyYXRlZVxuICAvLyBpcyBub3QgYSBvbmUtdG8tb25lIGZ1bmN0aW9uLCBzbyBwcm92aWRpbmcgYW4gaXRlcmF0ZWUgd2lsbCBkaXNhYmxlXG4gIC8vIHRoZSBmYXN0ZXIgYWxnb3JpdGhtLlxuICAvLyBBbGlhc2VkIGFzIGB1bmlxdWVgLlxuICBfLnVuaXEgPSBfLnVuaXF1ZSA9IGZ1bmN0aW9uKGFycmF5LCBpc1NvcnRlZCwgaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICBpZiAoIV8uaXNCb29sZWFuKGlzU29ydGVkKSkge1xuICAgICAgY29udGV4dCA9IGl0ZXJhdGVlO1xuICAgICAgaXRlcmF0ZWUgPSBpc1NvcnRlZDtcbiAgICAgIGlzU29ydGVkID0gZmFsc2U7XG4gICAgfVxuICAgIGlmIChpdGVyYXRlZSAhPSBudWxsKSBpdGVyYXRlZSA9IGNiKGl0ZXJhdGVlLCBjb250ZXh0KTtcbiAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgdmFyIHNlZW4gPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gZ2V0TGVuZ3RoKGFycmF5KTsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgdmFsdWUgPSBhcnJheVtpXSxcbiAgICAgICAgICBjb21wdXRlZCA9IGl0ZXJhdGVlID8gaXRlcmF0ZWUodmFsdWUsIGksIGFycmF5KSA6IHZhbHVlO1xuICAgICAgaWYgKGlzU29ydGVkICYmICFpdGVyYXRlZSkge1xuICAgICAgICBpZiAoIWkgfHwgc2VlbiAhPT0gY29tcHV0ZWQpIHJlc3VsdC5wdXNoKHZhbHVlKTtcbiAgICAgICAgc2VlbiA9IGNvbXB1dGVkO1xuICAgICAgfSBlbHNlIGlmIChpdGVyYXRlZSkge1xuICAgICAgICBpZiAoIV8uY29udGFpbnMoc2VlbiwgY29tcHV0ZWQpKSB7XG4gICAgICAgICAgc2Vlbi5wdXNoKGNvbXB1dGVkKTtcbiAgICAgICAgICByZXN1bHQucHVzaCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoIV8uY29udGFpbnMocmVzdWx0LCB2YWx1ZSkpIHtcbiAgICAgICAgcmVzdWx0LnB1c2godmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIC8vIFByb2R1Y2UgYW4gYXJyYXkgdGhhdCBjb250YWlucyB0aGUgdW5pb246IGVhY2ggZGlzdGluY3QgZWxlbWVudCBmcm9tIGFsbCBvZlxuICAvLyB0aGUgcGFzc2VkLWluIGFycmF5cy5cbiAgXy51bmlvbiA9IHJlc3RBcmd1bWVudHMoZnVuY3Rpb24oYXJyYXlzKSB7XG4gICAgcmV0dXJuIF8udW5pcShmbGF0dGVuKGFycmF5cywgdHJ1ZSwgdHJ1ZSkpO1xuICB9KTtcblxuICAvLyBQcm9kdWNlIGFuIGFycmF5IHRoYXQgY29udGFpbnMgZXZlcnkgaXRlbSBzaGFyZWQgYmV0d2VlbiBhbGwgdGhlXG4gIC8vIHBhc3NlZC1pbiBhcnJheXMuXG4gIF8uaW50ZXJzZWN0aW9uID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgdmFyIGFyZ3NMZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBnZXRMZW5ndGgoYXJyYXkpOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBpdGVtID0gYXJyYXlbaV07XG4gICAgICBpZiAoXy5jb250YWlucyhyZXN1bHQsIGl0ZW0pKSBjb250aW51ZTtcbiAgICAgIHZhciBqO1xuICAgICAgZm9yIChqID0gMTsgaiA8IGFyZ3NMZW5ndGg7IGorKykge1xuICAgICAgICBpZiAoIV8uY29udGFpbnMoYXJndW1lbnRzW2pdLCBpdGVtKSkgYnJlYWs7XG4gICAgICB9XG4gICAgICBpZiAoaiA9PT0gYXJnc0xlbmd0aCkgcmVzdWx0LnB1c2goaXRlbSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgLy8gVGFrZSB0aGUgZGlmZmVyZW5jZSBiZXR3ZWVuIG9uZSBhcnJheSBhbmQgYSBudW1iZXIgb2Ygb3RoZXIgYXJyYXlzLlxuICAvLyBPbmx5IHRoZSBlbGVtZW50cyBwcmVzZW50IGluIGp1c3QgdGhlIGZpcnN0IGFycmF5IHdpbGwgcmVtYWluLlxuICBfLmRpZmZlcmVuY2UgPSByZXN0QXJndW1lbnRzKGZ1bmN0aW9uKGFycmF5LCByZXN0KSB7XG4gICAgcmVzdCA9IGZsYXR0ZW4ocmVzdCwgdHJ1ZSwgdHJ1ZSk7XG4gICAgcmV0dXJuIF8uZmlsdGVyKGFycmF5LCBmdW5jdGlvbih2YWx1ZSl7XG4gICAgICByZXR1cm4gIV8uY29udGFpbnMocmVzdCwgdmFsdWUpO1xuICAgIH0pO1xuICB9KTtcblxuICAvLyBDb21wbGVtZW50IG9mIF8uemlwLiBVbnppcCBhY2NlcHRzIGFuIGFycmF5IG9mIGFycmF5cyBhbmQgZ3JvdXBzXG4gIC8vIGVhY2ggYXJyYXkncyBlbGVtZW50cyBvbiBzaGFyZWQgaW5kaWNlcy5cbiAgXy51bnppcCA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgdmFyIGxlbmd0aCA9IGFycmF5ICYmIF8ubWF4KGFycmF5LCBnZXRMZW5ndGgpLmxlbmd0aCB8fCAwO1xuICAgIHZhciByZXN1bHQgPSBBcnJheShsZW5ndGgpO1xuXG4gICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgcmVzdWx0W2luZGV4XSA9IF8ucGx1Y2soYXJyYXksIGluZGV4KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICAvLyBaaXAgdG9nZXRoZXIgbXVsdGlwbGUgbGlzdHMgaW50byBhIHNpbmdsZSBhcnJheSAtLSBlbGVtZW50cyB0aGF0IHNoYXJlXG4gIC8vIGFuIGluZGV4IGdvIHRvZ2V0aGVyLlxuICBfLnppcCA9IHJlc3RBcmd1bWVudHMoXy51bnppcCk7XG5cbiAgLy8gQ29udmVydHMgbGlzdHMgaW50byBvYmplY3RzLiBQYXNzIGVpdGhlciBhIHNpbmdsZSBhcnJheSBvZiBgW2tleSwgdmFsdWVdYFxuICAvLyBwYWlycywgb3IgdHdvIHBhcmFsbGVsIGFycmF5cyBvZiB0aGUgc2FtZSBsZW5ndGggLS0gb25lIG9mIGtleXMsIGFuZCBvbmUgb2ZcbiAgLy8gdGhlIGNvcnJlc3BvbmRpbmcgdmFsdWVzLiBQYXNzaW5nIGJ5IHBhaXJzIGlzIHRoZSByZXZlcnNlIG9mIF8ucGFpcnMuXG4gIF8ub2JqZWN0ID0gZnVuY3Rpb24obGlzdCwgdmFsdWVzKSB7XG4gICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBnZXRMZW5ndGgobGlzdCk7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHZhbHVlcykge1xuICAgICAgICByZXN1bHRbbGlzdFtpXV0gPSB2YWx1ZXNbaV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHRbbGlzdFtpXVswXV0gPSBsaXN0W2ldWzFdO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIC8vIEdlbmVyYXRvciBmdW5jdGlvbiB0byBjcmVhdGUgdGhlIGZpbmRJbmRleCBhbmQgZmluZExhc3RJbmRleCBmdW5jdGlvbnMuXG4gIHZhciBjcmVhdGVQcmVkaWNhdGVJbmRleEZpbmRlciA9IGZ1bmN0aW9uKGRpcikge1xuICAgIHJldHVybiBmdW5jdGlvbihhcnJheSwgcHJlZGljYXRlLCBjb250ZXh0KSB7XG4gICAgICBwcmVkaWNhdGUgPSBjYihwcmVkaWNhdGUsIGNvbnRleHQpO1xuICAgICAgdmFyIGxlbmd0aCA9IGdldExlbmd0aChhcnJheSk7XG4gICAgICB2YXIgaW5kZXggPSBkaXIgPiAwID8gMCA6IGxlbmd0aCAtIDE7XG4gICAgICBmb3IgKDsgaW5kZXggPj0gMCAmJiBpbmRleCA8IGxlbmd0aDsgaW5kZXggKz0gZGlyKSB7XG4gICAgICAgIGlmIChwcmVkaWNhdGUoYXJyYXlbaW5kZXhdLCBpbmRleCwgYXJyYXkpKSByZXR1cm4gaW5kZXg7XG4gICAgICB9XG4gICAgICByZXR1cm4gLTE7XG4gICAgfTtcbiAgfTtcblxuICAvLyBSZXR1cm5zIHRoZSBmaXJzdCBpbmRleCBvbiBhbiBhcnJheS1saWtlIHRoYXQgcGFzc2VzIGEgcHJlZGljYXRlIHRlc3QuXG4gIF8uZmluZEluZGV4ID0gY3JlYXRlUHJlZGljYXRlSW5kZXhGaW5kZXIoMSk7XG4gIF8uZmluZExhc3RJbmRleCA9IGNyZWF0ZVByZWRpY2F0ZUluZGV4RmluZGVyKC0xKTtcblxuICAvLyBVc2UgYSBjb21wYXJhdG9yIGZ1bmN0aW9uIHRvIGZpZ3VyZSBvdXQgdGhlIHNtYWxsZXN0IGluZGV4IGF0IHdoaWNoXG4gIC8vIGFuIG9iamVjdCBzaG91bGQgYmUgaW5zZXJ0ZWQgc28gYXMgdG8gbWFpbnRhaW4gb3JkZXIuIFVzZXMgYmluYXJ5IHNlYXJjaC5cbiAgXy5zb3J0ZWRJbmRleCA9IGZ1bmN0aW9uKGFycmF5LCBvYmosIGl0ZXJhdGVlLCBjb250ZXh0KSB7XG4gICAgaXRlcmF0ZWUgPSBjYihpdGVyYXRlZSwgY29udGV4dCwgMSk7XG4gICAgdmFyIHZhbHVlID0gaXRlcmF0ZWUob2JqKTtcbiAgICB2YXIgbG93ID0gMCwgaGlnaCA9IGdldExlbmd0aChhcnJheSk7XG4gICAgd2hpbGUgKGxvdyA8IGhpZ2gpIHtcbiAgICAgIHZhciBtaWQgPSBNYXRoLmZsb29yKChsb3cgKyBoaWdoKSAvIDIpO1xuICAgICAgaWYgKGl0ZXJhdGVlKGFycmF5W21pZF0pIDwgdmFsdWUpIGxvdyA9IG1pZCArIDE7IGVsc2UgaGlnaCA9IG1pZDtcbiAgICB9XG4gICAgcmV0dXJuIGxvdztcbiAgfTtcblxuICAvLyBHZW5lcmF0b3IgZnVuY3Rpb24gdG8gY3JlYXRlIHRoZSBpbmRleE9mIGFuZCBsYXN0SW5kZXhPZiBmdW5jdGlvbnMuXG4gIHZhciBjcmVhdGVJbmRleEZpbmRlciA9IGZ1bmN0aW9uKGRpciwgcHJlZGljYXRlRmluZCwgc29ydGVkSW5kZXgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oYXJyYXksIGl0ZW0sIGlkeCkge1xuICAgICAgdmFyIGkgPSAwLCBsZW5ndGggPSBnZXRMZW5ndGgoYXJyYXkpO1xuICAgICAgaWYgKHR5cGVvZiBpZHggPT0gJ251bWJlcicpIHtcbiAgICAgICAgaWYgKGRpciA+IDApIHtcbiAgICAgICAgICBpID0gaWR4ID49IDAgPyBpZHggOiBNYXRoLm1heChpZHggKyBsZW5ndGgsIGkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxlbmd0aCA9IGlkeCA+PSAwID8gTWF0aC5taW4oaWR4ICsgMSwgbGVuZ3RoKSA6IGlkeCArIGxlbmd0aCArIDE7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoc29ydGVkSW5kZXggJiYgaWR4ICYmIGxlbmd0aCkge1xuICAgICAgICBpZHggPSBzb3J0ZWRJbmRleChhcnJheSwgaXRlbSk7XG4gICAgICAgIHJldHVybiBhcnJheVtpZHhdID09PSBpdGVtID8gaWR4IDogLTE7XG4gICAgICB9XG4gICAgICBpZiAoaXRlbSAhPT0gaXRlbSkge1xuICAgICAgICBpZHggPSBwcmVkaWNhdGVGaW5kKHNsaWNlLmNhbGwoYXJyYXksIGksIGxlbmd0aCksIF8uaXNOYU4pO1xuICAgICAgICByZXR1cm4gaWR4ID49IDAgPyBpZHggKyBpIDogLTE7XG4gICAgICB9XG4gICAgICBmb3IgKGlkeCA9IGRpciA+IDAgPyBpIDogbGVuZ3RoIC0gMTsgaWR4ID49IDAgJiYgaWR4IDwgbGVuZ3RoOyBpZHggKz0gZGlyKSB7XG4gICAgICAgIGlmIChhcnJheVtpZHhdID09PSBpdGVtKSByZXR1cm4gaWR4O1xuICAgICAgfVxuICAgICAgcmV0dXJuIC0xO1xuICAgIH07XG4gIH07XG5cbiAgLy8gUmV0dXJuIHRoZSBwb3NpdGlvbiBvZiB0aGUgZmlyc3Qgb2NjdXJyZW5jZSBvZiBhbiBpdGVtIGluIGFuIGFycmF5LFxuICAvLyBvciAtMSBpZiB0aGUgaXRlbSBpcyBub3QgaW5jbHVkZWQgaW4gdGhlIGFycmF5LlxuICAvLyBJZiB0aGUgYXJyYXkgaXMgbGFyZ2UgYW5kIGFscmVhZHkgaW4gc29ydCBvcmRlciwgcGFzcyBgdHJ1ZWBcbiAgLy8gZm9yICoqaXNTb3J0ZWQqKiB0byB1c2UgYmluYXJ5IHNlYXJjaC5cbiAgXy5pbmRleE9mID0gY3JlYXRlSW5kZXhGaW5kZXIoMSwgXy5maW5kSW5kZXgsIF8uc29ydGVkSW5kZXgpO1xuICBfLmxhc3RJbmRleE9mID0gY3JlYXRlSW5kZXhGaW5kZXIoLTEsIF8uZmluZExhc3RJbmRleCk7XG5cbiAgLy8gR2VuZXJhdGUgYW4gaW50ZWdlciBBcnJheSBjb250YWluaW5nIGFuIGFyaXRobWV0aWMgcHJvZ3Jlc3Npb24uIEEgcG9ydCBvZlxuICAvLyB0aGUgbmF0aXZlIFB5dGhvbiBgcmFuZ2UoKWAgZnVuY3Rpb24uIFNlZVxuICAvLyBbdGhlIFB5dGhvbiBkb2N1bWVudGF0aW9uXShodHRwOi8vZG9jcy5weXRob24ub3JnL2xpYnJhcnkvZnVuY3Rpb25zLmh0bWwjcmFuZ2UpLlxuICBfLnJhbmdlID0gZnVuY3Rpb24oc3RhcnQsIHN0b3AsIHN0ZXApIHtcbiAgICBpZiAoc3RvcCA9PSBudWxsKSB7XG4gICAgICBzdG9wID0gc3RhcnQgfHwgMDtcbiAgICAgIHN0YXJ0ID0gMDtcbiAgICB9XG4gICAgaWYgKCFzdGVwKSB7XG4gICAgICBzdGVwID0gc3RvcCA8IHN0YXJ0ID8gLTEgOiAxO1xuICAgIH1cblxuICAgIHZhciBsZW5ndGggPSBNYXRoLm1heChNYXRoLmNlaWwoKHN0b3AgLSBzdGFydCkgLyBzdGVwKSwgMCk7XG4gICAgdmFyIHJhbmdlID0gQXJyYXkobGVuZ3RoKTtcblxuICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGxlbmd0aDsgaWR4KyssIHN0YXJ0ICs9IHN0ZXApIHtcbiAgICAgIHJhbmdlW2lkeF0gPSBzdGFydDtcbiAgICB9XG5cbiAgICByZXR1cm4gcmFuZ2U7XG4gIH07XG5cbiAgLy8gQ2h1bmsgYSBzaW5nbGUgYXJyYXkgaW50byBtdWx0aXBsZSBhcnJheXMsIGVhY2ggY29udGFpbmluZyBgY291bnRgIG9yIGZld2VyXG4gIC8vIGl0ZW1zLlxuICBfLmNodW5rID0gZnVuY3Rpb24oYXJyYXksIGNvdW50KSB7XG4gICAgaWYgKGNvdW50ID09IG51bGwgfHwgY291bnQgPCAxKSByZXR1cm4gW107XG4gICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgIHZhciBpID0gMCwgbGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xuICAgIHdoaWxlIChpIDwgbGVuZ3RoKSB7XG4gICAgICByZXN1bHQucHVzaChzbGljZS5jYWxsKGFycmF5LCBpLCBpICs9IGNvdW50KSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgLy8gRnVuY3Rpb24gKGFoZW0pIEZ1bmN0aW9uc1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS1cblxuICAvLyBEZXRlcm1pbmVzIHdoZXRoZXIgdG8gZXhlY3V0ZSBhIGZ1bmN0aW9uIGFzIGEgY29uc3RydWN0b3JcbiAgLy8gb3IgYSBub3JtYWwgZnVuY3Rpb24gd2l0aCB0aGUgcHJvdmlkZWQgYXJndW1lbnRzLlxuICB2YXIgZXhlY3V0ZUJvdW5kID0gZnVuY3Rpb24oc291cmNlRnVuYywgYm91bmRGdW5jLCBjb250ZXh0LCBjYWxsaW5nQ29udGV4dCwgYXJncykge1xuICAgIGlmICghKGNhbGxpbmdDb250ZXh0IGluc3RhbmNlb2YgYm91bmRGdW5jKSkgcmV0dXJuIHNvdXJjZUZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgdmFyIHNlbGYgPSBiYXNlQ3JlYXRlKHNvdXJjZUZ1bmMucHJvdG90eXBlKTtcbiAgICB2YXIgcmVzdWx0ID0gc291cmNlRnVuYy5hcHBseShzZWxmLCBhcmdzKTtcbiAgICBpZiAoXy5pc09iamVjdChyZXN1bHQpKSByZXR1cm4gcmVzdWx0O1xuICAgIHJldHVybiBzZWxmO1xuICB9O1xuXG4gIC8vIENyZWF0ZSBhIGZ1bmN0aW9uIGJvdW5kIHRvIGEgZ2l2ZW4gb2JqZWN0IChhc3NpZ25pbmcgYHRoaXNgLCBhbmQgYXJndW1lbnRzLFxuICAvLyBvcHRpb25hbGx5KS4gRGVsZWdhdGVzIHRvICoqRUNNQVNjcmlwdCA1KioncyBuYXRpdmUgYEZ1bmN0aW9uLmJpbmRgIGlmXG4gIC8vIGF2YWlsYWJsZS5cbiAgXy5iaW5kID0gcmVzdEFyZ3VtZW50cyhmdW5jdGlvbihmdW5jLCBjb250ZXh0LCBhcmdzKSB7XG4gICAgaWYgKCFfLmlzRnVuY3Rpb24oZnVuYykpIHRocm93IG5ldyBUeXBlRXJyb3IoJ0JpbmQgbXVzdCBiZSBjYWxsZWQgb24gYSBmdW5jdGlvbicpO1xuICAgIHZhciBib3VuZCA9IHJlc3RBcmd1bWVudHMoZnVuY3Rpb24oY2FsbEFyZ3MpIHtcbiAgICAgIHJldHVybiBleGVjdXRlQm91bmQoZnVuYywgYm91bmQsIGNvbnRleHQsIHRoaXMsIGFyZ3MuY29uY2F0KGNhbGxBcmdzKSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGJvdW5kO1xuICB9KTtcblxuICAvLyBQYXJ0aWFsbHkgYXBwbHkgYSBmdW5jdGlvbiBieSBjcmVhdGluZyBhIHZlcnNpb24gdGhhdCBoYXMgaGFkIHNvbWUgb2YgaXRzXG4gIC8vIGFyZ3VtZW50cyBwcmUtZmlsbGVkLCB3aXRob3V0IGNoYW5naW5nIGl0cyBkeW5hbWljIGB0aGlzYCBjb250ZXh0LiBfIGFjdHNcbiAgLy8gYXMgYSBwbGFjZWhvbGRlciBieSBkZWZhdWx0LCBhbGxvd2luZyBhbnkgY29tYmluYXRpb24gb2YgYXJndW1lbnRzIHRvIGJlXG4gIC8vIHByZS1maWxsZWQuIFNldCBgXy5wYXJ0aWFsLnBsYWNlaG9sZGVyYCBmb3IgYSBjdXN0b20gcGxhY2Vob2xkZXIgYXJndW1lbnQuXG4gIF8ucGFydGlhbCA9IHJlc3RBcmd1bWVudHMoZnVuY3Rpb24oZnVuYywgYm91bmRBcmdzKSB7XG4gICAgdmFyIHBsYWNlaG9sZGVyID0gXy5wYXJ0aWFsLnBsYWNlaG9sZGVyO1xuICAgIHZhciBib3VuZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHBvc2l0aW9uID0gMCwgbGVuZ3RoID0gYm91bmRBcmdzLmxlbmd0aDtcbiAgICAgIHZhciBhcmdzID0gQXJyYXkobGVuZ3RoKTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgYXJnc1tpXSA9IGJvdW5kQXJnc1tpXSA9PT0gcGxhY2Vob2xkZXIgPyBhcmd1bWVudHNbcG9zaXRpb24rK10gOiBib3VuZEFyZ3NbaV07XG4gICAgICB9XG4gICAgICB3aGlsZSAocG9zaXRpb24gPCBhcmd1bWVudHMubGVuZ3RoKSBhcmdzLnB1c2goYXJndW1lbnRzW3Bvc2l0aW9uKytdKTtcbiAgICAgIHJldHVybiBleGVjdXRlQm91bmQoZnVuYywgYm91bmQsIHRoaXMsIHRoaXMsIGFyZ3MpO1xuICAgIH07XG4gICAgcmV0dXJuIGJvdW5kO1xuICB9KTtcblxuICBfLnBhcnRpYWwucGxhY2Vob2xkZXIgPSBfO1xuXG4gIC8vIEJpbmQgYSBudW1iZXIgb2YgYW4gb2JqZWN0J3MgbWV0aG9kcyB0byB0aGF0IG9iamVjdC4gUmVtYWluaW5nIGFyZ3VtZW50c1xuICAvLyBhcmUgdGhlIG1ldGhvZCBuYW1lcyB0byBiZSBib3VuZC4gVXNlZnVsIGZvciBlbnN1cmluZyB0aGF0IGFsbCBjYWxsYmFja3NcbiAgLy8gZGVmaW5lZCBvbiBhbiBvYmplY3QgYmVsb25nIHRvIGl0LlxuICBfLmJpbmRBbGwgPSByZXN0QXJndW1lbnRzKGZ1bmN0aW9uKG9iaiwga2V5cykge1xuICAgIGtleXMgPSBmbGF0dGVuKGtleXMsIGZhbHNlLCBmYWxzZSk7XG4gICAgdmFyIGluZGV4ID0ga2V5cy5sZW5ndGg7XG4gICAgaWYgKGluZGV4IDwgMSkgdGhyb3cgbmV3IEVycm9yKCdiaW5kQWxsIG11c3QgYmUgcGFzc2VkIGZ1bmN0aW9uIG5hbWVzJyk7XG4gICAgd2hpbGUgKGluZGV4LS0pIHtcbiAgICAgIHZhciBrZXkgPSBrZXlzW2luZGV4XTtcbiAgICAgIG9ialtrZXldID0gXy5iaW5kKG9ialtrZXldLCBvYmopO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gTWVtb2l6ZSBhbiBleHBlbnNpdmUgZnVuY3Rpb24gYnkgc3RvcmluZyBpdHMgcmVzdWx0cy5cbiAgXy5tZW1vaXplID0gZnVuY3Rpb24oZnVuYywgaGFzaGVyKSB7XG4gICAgdmFyIG1lbW9pemUgPSBmdW5jdGlvbihrZXkpIHtcbiAgICAgIHZhciBjYWNoZSA9IG1lbW9pemUuY2FjaGU7XG4gICAgICB2YXIgYWRkcmVzcyA9ICcnICsgKGhhc2hlciA/IGhhc2hlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIDoga2V5KTtcbiAgICAgIGlmICghaGFzKGNhY2hlLCBhZGRyZXNzKSkgY2FjaGVbYWRkcmVzc10gPSBmdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICByZXR1cm4gY2FjaGVbYWRkcmVzc107XG4gICAgfTtcbiAgICBtZW1vaXplLmNhY2hlID0ge307XG4gICAgcmV0dXJuIG1lbW9pemU7XG4gIH07XG5cbiAgLy8gRGVsYXlzIGEgZnVuY3Rpb24gZm9yIHRoZSBnaXZlbiBudW1iZXIgb2YgbWlsbGlzZWNvbmRzLCBhbmQgdGhlbiBjYWxsc1xuICAvLyBpdCB3aXRoIHRoZSBhcmd1bWVudHMgc3VwcGxpZWQuXG4gIF8uZGVsYXkgPSByZXN0QXJndW1lbnRzKGZ1bmN0aW9uKGZ1bmMsIHdhaXQsIGFyZ3MpIHtcbiAgICByZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBmdW5jLmFwcGx5KG51bGwsIGFyZ3MpO1xuICAgIH0sIHdhaXQpO1xuICB9KTtcblxuICAvLyBEZWZlcnMgYSBmdW5jdGlvbiwgc2NoZWR1bGluZyBpdCB0byBydW4gYWZ0ZXIgdGhlIGN1cnJlbnQgY2FsbCBzdGFjayBoYXNcbiAgLy8gY2xlYXJlZC5cbiAgXy5kZWZlciA9IF8ucGFydGlhbChfLmRlbGF5LCBfLCAxKTtcblxuICAvLyBSZXR1cm5zIGEgZnVuY3Rpb24sIHRoYXQsIHdoZW4gaW52b2tlZCwgd2lsbCBvbmx5IGJlIHRyaWdnZXJlZCBhdCBtb3N0IG9uY2VcbiAgLy8gZHVyaW5nIGEgZ2l2ZW4gd2luZG93IG9mIHRpbWUuIE5vcm1hbGx5LCB0aGUgdGhyb3R0bGVkIGZ1bmN0aW9uIHdpbGwgcnVuXG4gIC8vIGFzIG11Y2ggYXMgaXQgY2FuLCB3aXRob3V0IGV2ZXIgZ29pbmcgbW9yZSB0aGFuIG9uY2UgcGVyIGB3YWl0YCBkdXJhdGlvbjtcbiAgLy8gYnV0IGlmIHlvdSdkIGxpa2UgdG8gZGlzYWJsZSB0aGUgZXhlY3V0aW9uIG9uIHRoZSBsZWFkaW5nIGVkZ2UsIHBhc3NcbiAgLy8gYHtsZWFkaW5nOiBmYWxzZX1gLiBUbyBkaXNhYmxlIGV4ZWN1dGlvbiBvbiB0aGUgdHJhaWxpbmcgZWRnZSwgZGl0dG8uXG4gIF8udGhyb3R0bGUgPSBmdW5jdGlvbihmdW5jLCB3YWl0LCBvcHRpb25zKSB7XG4gICAgdmFyIHRpbWVvdXQsIGNvbnRleHQsIGFyZ3MsIHJlc3VsdDtcbiAgICB2YXIgcHJldmlvdXMgPSAwO1xuICAgIGlmICghb3B0aW9ucykgb3B0aW9ucyA9IHt9O1xuXG4gICAgdmFyIGxhdGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICBwcmV2aW91cyA9IG9wdGlvbnMubGVhZGluZyA9PT0gZmFsc2UgPyAwIDogXy5ub3coKTtcbiAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgIGlmICghdGltZW91dCkgY29udGV4dCA9IGFyZ3MgPSBudWxsO1xuICAgIH07XG5cbiAgICB2YXIgdGhyb3R0bGVkID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgbm93ID0gXy5ub3coKTtcbiAgICAgIGlmICghcHJldmlvdXMgJiYgb3B0aW9ucy5sZWFkaW5nID09PSBmYWxzZSkgcHJldmlvdXMgPSBub3c7XG4gICAgICB2YXIgcmVtYWluaW5nID0gd2FpdCAtIChub3cgLSBwcmV2aW91cyk7XG4gICAgICBjb250ZXh0ID0gdGhpcztcbiAgICAgIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICBpZiAocmVtYWluaW5nIDw9IDAgfHwgcmVtYWluaW5nID4gd2FpdCkge1xuICAgICAgICBpZiAodGltZW91dCkge1xuICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBwcmV2aW91cyA9IG5vdztcbiAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgICAgaWYgKCF0aW1lb3V0KSBjb250ZXh0ID0gYXJncyA9IG51bGw7XG4gICAgICB9IGVsc2UgaWYgKCF0aW1lb3V0ICYmIG9wdGlvbnMudHJhaWxpbmcgIT09IGZhbHNlKSB7XG4gICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCByZW1haW5pbmcpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuXG4gICAgdGhyb3R0bGVkLmNhbmNlbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgcHJldmlvdXMgPSAwO1xuICAgICAgdGltZW91dCA9IGNvbnRleHQgPSBhcmdzID0gbnVsbDtcbiAgICB9O1xuXG4gICAgcmV0dXJuIHRocm90dGxlZDtcbiAgfTtcblxuICAvLyBSZXR1cm5zIGEgZnVuY3Rpb24sIHRoYXQsIGFzIGxvbmcgYXMgaXQgY29udGludWVzIHRvIGJlIGludm9rZWQsIHdpbGwgbm90XG4gIC8vIGJlIHRyaWdnZXJlZC4gVGhlIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIGFmdGVyIGl0IHN0b3BzIGJlaW5nIGNhbGxlZCBmb3JcbiAgLy8gTiBtaWxsaXNlY29uZHMuIElmIGBpbW1lZGlhdGVgIGlzIHBhc3NlZCwgdHJpZ2dlciB0aGUgZnVuY3Rpb24gb24gdGhlXG4gIC8vIGxlYWRpbmcgZWRnZSwgaW5zdGVhZCBvZiB0aGUgdHJhaWxpbmcuXG4gIF8uZGVib3VuY2UgPSBmdW5jdGlvbihmdW5jLCB3YWl0LCBpbW1lZGlhdGUpIHtcbiAgICB2YXIgdGltZW91dCwgcmVzdWx0O1xuXG4gICAgdmFyIGxhdGVyID0gZnVuY3Rpb24oY29udGV4dCwgYXJncykge1xuICAgICAgdGltZW91dCA9IG51bGw7XG4gICAgICBpZiAoYXJncykgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICB9O1xuXG4gICAgdmFyIGRlYm91bmNlZCA9IHJlc3RBcmd1bWVudHMoZnVuY3Rpb24oYXJncykge1xuICAgICAgaWYgKHRpbWVvdXQpIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgIGlmIChpbW1lZGlhdGUpIHtcbiAgICAgICAgdmFyIGNhbGxOb3cgPSAhdGltZW91dDtcbiAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQpO1xuICAgICAgICBpZiAoY2FsbE5vdykgcmVzdWx0ID0gZnVuYy5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRpbWVvdXQgPSBfLmRlbGF5KGxhdGVyLCB3YWl0LCB0aGlzLCBhcmdzKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9KTtcblxuICAgIGRlYm91bmNlZC5jYW5jZWwgPSBmdW5jdGlvbigpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgIH07XG5cbiAgICByZXR1cm4gZGVib3VuY2VkO1xuICB9O1xuXG4gIC8vIFJldHVybnMgdGhlIGZpcnN0IGZ1bmN0aW9uIHBhc3NlZCBhcyBhbiBhcmd1bWVudCB0byB0aGUgc2Vjb25kLFxuICAvLyBhbGxvd2luZyB5b3UgdG8gYWRqdXN0IGFyZ3VtZW50cywgcnVuIGNvZGUgYmVmb3JlIGFuZCBhZnRlciwgYW5kXG4gIC8vIGNvbmRpdGlvbmFsbHkgZXhlY3V0ZSB0aGUgb3JpZ2luYWwgZnVuY3Rpb24uXG4gIF8ud3JhcCA9IGZ1bmN0aW9uKGZ1bmMsIHdyYXBwZXIpIHtcbiAgICByZXR1cm4gXy5wYXJ0aWFsKHdyYXBwZXIsIGZ1bmMpO1xuICB9O1xuXG4gIC8vIFJldHVybnMgYSBuZWdhdGVkIHZlcnNpb24gb2YgdGhlIHBhc3NlZC1pbiBwcmVkaWNhdGUuXG4gIF8ubmVnYXRlID0gZnVuY3Rpb24ocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICFwcmVkaWNhdGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xuICB9O1xuXG4gIC8vIFJldHVybnMgYSBmdW5jdGlvbiB0aGF0IGlzIHRoZSBjb21wb3NpdGlvbiBvZiBhIGxpc3Qgb2YgZnVuY3Rpb25zLCBlYWNoXG4gIC8vIGNvbnN1bWluZyB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBmdW5jdGlvbiB0aGF0IGZvbGxvd3MuXG4gIF8uY29tcG9zZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgIHZhciBzdGFydCA9IGFyZ3MubGVuZ3RoIC0gMTtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgaSA9IHN0YXJ0O1xuICAgICAgdmFyIHJlc3VsdCA9IGFyZ3Nbc3RhcnRdLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB3aGlsZSAoaS0tKSByZXN1bHQgPSBhcmdzW2ldLmNhbGwodGhpcywgcmVzdWx0KTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgfTtcblxuICAvLyBSZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCB3aWxsIG9ubHkgYmUgZXhlY3V0ZWQgb24gYW5kIGFmdGVyIHRoZSBOdGggY2FsbC5cbiAgXy5hZnRlciA9IGZ1bmN0aW9uKHRpbWVzLCBmdW5jKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKC0tdGltZXMgPCAxKSB7XG4gICAgICAgIHJldHVybiBmdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9XG4gICAgfTtcbiAgfTtcblxuICAvLyBSZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCB3aWxsIG9ubHkgYmUgZXhlY3V0ZWQgdXAgdG8gKGJ1dCBub3QgaW5jbHVkaW5nKSB0aGUgTnRoIGNhbGwuXG4gIF8uYmVmb3JlID0gZnVuY3Rpb24odGltZXMsIGZ1bmMpIHtcbiAgICB2YXIgbWVtbztcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoLS10aW1lcyA+IDApIHtcbiAgICAgICAgbWVtbyA9IGZ1bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aW1lcyA8PSAxKSBmdW5jID0gbnVsbDtcbiAgICAgIHJldHVybiBtZW1vO1xuICAgIH07XG4gIH07XG5cbiAgLy8gUmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBleGVjdXRlZCBhdCBtb3N0IG9uZSB0aW1lLCBubyBtYXR0ZXIgaG93XG4gIC8vIG9mdGVuIHlvdSBjYWxsIGl0LiBVc2VmdWwgZm9yIGxhenkgaW5pdGlhbGl6YXRpb24uXG4gIF8ub25jZSA9IF8ucGFydGlhbChfLmJlZm9yZSwgMik7XG5cbiAgXy5yZXN0QXJndW1lbnRzID0gcmVzdEFyZ3VtZW50cztcblxuICAvLyBPYmplY3QgRnVuY3Rpb25zXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS1cblxuICAvLyBLZXlzIGluIElFIDwgOSB0aGF0IHdvbid0IGJlIGl0ZXJhdGVkIGJ5IGBmb3Iga2V5IGluIC4uLmAgYW5kIHRodXMgbWlzc2VkLlxuICB2YXIgaGFzRW51bUJ1ZyA9ICF7dG9TdHJpbmc6IG51bGx9LnByb3BlcnR5SXNFbnVtZXJhYmxlKCd0b1N0cmluZycpO1xuICB2YXIgbm9uRW51bWVyYWJsZVByb3BzID0gWyd2YWx1ZU9mJywgJ2lzUHJvdG90eXBlT2YnLCAndG9TdHJpbmcnLFxuICAgICdwcm9wZXJ0eUlzRW51bWVyYWJsZScsICdoYXNPd25Qcm9wZXJ0eScsICd0b0xvY2FsZVN0cmluZyddO1xuXG4gIHZhciBjb2xsZWN0Tm9uRW51bVByb3BzID0gZnVuY3Rpb24ob2JqLCBrZXlzKSB7XG4gICAgdmFyIG5vbkVudW1JZHggPSBub25FbnVtZXJhYmxlUHJvcHMubGVuZ3RoO1xuICAgIHZhciBjb25zdHJ1Y3RvciA9IG9iai5jb25zdHJ1Y3RvcjtcbiAgICB2YXIgcHJvdG8gPSBfLmlzRnVuY3Rpb24oY29uc3RydWN0b3IpICYmIGNvbnN0cnVjdG9yLnByb3RvdHlwZSB8fCBPYmpQcm90bztcblxuICAgIC8vIENvbnN0cnVjdG9yIGlzIGEgc3BlY2lhbCBjYXNlLlxuICAgIHZhciBwcm9wID0gJ2NvbnN0cnVjdG9yJztcbiAgICBpZiAoaGFzKG9iaiwgcHJvcCkgJiYgIV8uY29udGFpbnMoa2V5cywgcHJvcCkpIGtleXMucHVzaChwcm9wKTtcblxuICAgIHdoaWxlIChub25FbnVtSWR4LS0pIHtcbiAgICAgIHByb3AgPSBub25FbnVtZXJhYmxlUHJvcHNbbm9uRW51bUlkeF07XG4gICAgICBpZiAocHJvcCBpbiBvYmogJiYgb2JqW3Byb3BdICE9PSBwcm90b1twcm9wXSAmJiAhXy5jb250YWlucyhrZXlzLCBwcm9wKSkge1xuICAgICAgICBrZXlzLnB1c2gocHJvcCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8vIFJldHJpZXZlIHRoZSBuYW1lcyBvZiBhbiBvYmplY3QncyBvd24gcHJvcGVydGllcy5cbiAgLy8gRGVsZWdhdGVzIHRvICoqRUNNQVNjcmlwdCA1KioncyBuYXRpdmUgYE9iamVjdC5rZXlzYC5cbiAgXy5rZXlzID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgaWYgKCFfLmlzT2JqZWN0KG9iaikpIHJldHVybiBbXTtcbiAgICBpZiAobmF0aXZlS2V5cykgcmV0dXJuIG5hdGl2ZUtleXMob2JqKTtcbiAgICB2YXIga2V5cyA9IFtdO1xuICAgIGZvciAodmFyIGtleSBpbiBvYmopIGlmIChoYXMob2JqLCBrZXkpKSBrZXlzLnB1c2goa2V5KTtcbiAgICAvLyBBaGVtLCBJRSA8IDkuXG4gICAgaWYgKGhhc0VudW1CdWcpIGNvbGxlY3ROb25FbnVtUHJvcHMob2JqLCBrZXlzKTtcbiAgICByZXR1cm4ga2V5cztcbiAgfTtcblxuICAvLyBSZXRyaWV2ZSBhbGwgdGhlIHByb3BlcnR5IG5hbWVzIG9mIGFuIG9iamVjdC5cbiAgXy5hbGxLZXlzID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgaWYgKCFfLmlzT2JqZWN0KG9iaikpIHJldHVybiBbXTtcbiAgICB2YXIga2V5cyA9IFtdO1xuICAgIGZvciAodmFyIGtleSBpbiBvYmopIGtleXMucHVzaChrZXkpO1xuICAgIC8vIEFoZW0sIElFIDwgOS5cbiAgICBpZiAoaGFzRW51bUJ1ZykgY29sbGVjdE5vbkVudW1Qcm9wcyhvYmosIGtleXMpO1xuICAgIHJldHVybiBrZXlzO1xuICB9O1xuXG4gIC8vIFJldHJpZXZlIHRoZSB2YWx1ZXMgb2YgYW4gb2JqZWN0J3MgcHJvcGVydGllcy5cbiAgXy52YWx1ZXMgPSBmdW5jdGlvbihvYmopIHtcbiAgICB2YXIga2V5cyA9IF8ua2V5cyhvYmopO1xuICAgIHZhciBsZW5ndGggPSBrZXlzLmxlbmd0aDtcbiAgICB2YXIgdmFsdWVzID0gQXJyYXkobGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICB2YWx1ZXNbaV0gPSBvYmpba2V5c1tpXV07XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZXM7XG4gIH07XG5cbiAgLy8gUmV0dXJucyB0aGUgcmVzdWx0cyBvZiBhcHBseWluZyB0aGUgaXRlcmF0ZWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBvYmplY3QuXG4gIC8vIEluIGNvbnRyYXN0IHRvIF8ubWFwIGl0IHJldHVybnMgYW4gb2JqZWN0LlxuICBfLm1hcE9iamVjdCA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICBpdGVyYXRlZSA9IGNiKGl0ZXJhdGVlLCBjb250ZXh0KTtcbiAgICB2YXIga2V5cyA9IF8ua2V5cyhvYmopLFxuICAgICAgICBsZW5ndGggPSBrZXlzLmxlbmd0aCxcbiAgICAgICAgcmVzdWx0cyA9IHt9O1xuICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIHZhciBjdXJyZW50S2V5ID0ga2V5c1tpbmRleF07XG4gICAgICByZXN1bHRzW2N1cnJlbnRLZXldID0gaXRlcmF0ZWUob2JqW2N1cnJlbnRLZXldLCBjdXJyZW50S2V5LCBvYmopO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfTtcblxuICAvLyBDb252ZXJ0IGFuIG9iamVjdCBpbnRvIGEgbGlzdCBvZiBgW2tleSwgdmFsdWVdYCBwYWlycy5cbiAgLy8gVGhlIG9wcG9zaXRlIG9mIF8ub2JqZWN0LlxuICBfLnBhaXJzID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgdmFyIGtleXMgPSBfLmtleXMob2JqKTtcbiAgICB2YXIgbGVuZ3RoID0ga2V5cy5sZW5ndGg7XG4gICAgdmFyIHBhaXJzID0gQXJyYXkobGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICBwYWlyc1tpXSA9IFtrZXlzW2ldLCBvYmpba2V5c1tpXV1dO1xuICAgIH1cbiAgICByZXR1cm4gcGFpcnM7XG4gIH07XG5cbiAgLy8gSW52ZXJ0IHRoZSBrZXlzIGFuZCB2YWx1ZXMgb2YgYW4gb2JqZWN0LiBUaGUgdmFsdWVzIG11c3QgYmUgc2VyaWFsaXphYmxlLlxuICBfLmludmVydCA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICB2YXIga2V5cyA9IF8ua2V5cyhvYmopO1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBrZXlzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICByZXN1bHRbb2JqW2tleXNbaV1dXSA9IGtleXNbaV07XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgLy8gUmV0dXJuIGEgc29ydGVkIGxpc3Qgb2YgdGhlIGZ1bmN0aW9uIG5hbWVzIGF2YWlsYWJsZSBvbiB0aGUgb2JqZWN0LlxuICAvLyBBbGlhc2VkIGFzIGBtZXRob2RzYC5cbiAgXy5mdW5jdGlvbnMgPSBfLm1ldGhvZHMgPSBmdW5jdGlvbihvYmopIHtcbiAgICB2YXIgbmFtZXMgPSBbXTtcbiAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgICBpZiAoXy5pc0Z1bmN0aW9uKG9ialtrZXldKSkgbmFtZXMucHVzaChrZXkpO1xuICAgIH1cbiAgICByZXR1cm4gbmFtZXMuc29ydCgpO1xuICB9O1xuXG4gIC8vIEFuIGludGVybmFsIGZ1bmN0aW9uIGZvciBjcmVhdGluZyBhc3NpZ25lciBmdW5jdGlvbnMuXG4gIHZhciBjcmVhdGVBc3NpZ25lciA9IGZ1bmN0aW9uKGtleXNGdW5jLCBkZWZhdWx0cykge1xuICAgIHJldHVybiBmdW5jdGlvbihvYmopIHtcbiAgICAgIHZhciBsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgICAgaWYgKGRlZmF1bHRzKSBvYmogPSBPYmplY3Qob2JqKTtcbiAgICAgIGlmIChsZW5ndGggPCAyIHx8IG9iaiA9PSBudWxsKSByZXR1cm4gb2JqO1xuICAgICAgZm9yICh2YXIgaW5kZXggPSAxOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2luZGV4XSxcbiAgICAgICAgICAgIGtleXMgPSBrZXlzRnVuYyhzb3VyY2UpLFxuICAgICAgICAgICAgbCA9IGtleXMubGVuZ3RoO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuICAgICAgICAgIGlmICghZGVmYXVsdHMgfHwgb2JqW2tleV0gPT09IHZvaWQgMCkgb2JqW2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG9iajtcbiAgICB9O1xuICB9O1xuXG4gIC8vIEV4dGVuZCBhIGdpdmVuIG9iamVjdCB3aXRoIGFsbCB0aGUgcHJvcGVydGllcyBpbiBwYXNzZWQtaW4gb2JqZWN0KHMpLlxuICBfLmV4dGVuZCA9IGNyZWF0ZUFzc2lnbmVyKF8uYWxsS2V5cyk7XG5cbiAgLy8gQXNzaWducyBhIGdpdmVuIG9iamVjdCB3aXRoIGFsbCB0aGUgb3duIHByb3BlcnRpZXMgaW4gdGhlIHBhc3NlZC1pbiBvYmplY3QocykuXG4gIC8vIChodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9PYmplY3QvYXNzaWduKVxuICBfLmV4dGVuZE93biA9IF8uYXNzaWduID0gY3JlYXRlQXNzaWduZXIoXy5rZXlzKTtcblxuICAvLyBSZXR1cm5zIHRoZSBmaXJzdCBrZXkgb24gYW4gb2JqZWN0IHRoYXQgcGFzc2VzIGEgcHJlZGljYXRlIHRlc3QuXG4gIF8uZmluZEtleSA9IGZ1bmN0aW9uKG9iaiwgcHJlZGljYXRlLCBjb250ZXh0KSB7XG4gICAgcHJlZGljYXRlID0gY2IocHJlZGljYXRlLCBjb250ZXh0KTtcbiAgICB2YXIga2V5cyA9IF8ua2V5cyhvYmopLCBrZXk7XG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGtleXMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIGtleSA9IGtleXNbaV07XG4gICAgICBpZiAocHJlZGljYXRlKG9ialtrZXldLCBrZXksIG9iaikpIHJldHVybiBrZXk7XG4gICAgfVxuICB9O1xuXG4gIC8vIEludGVybmFsIHBpY2sgaGVscGVyIGZ1bmN0aW9uIHRvIGRldGVybWluZSBpZiBgb2JqYCBoYXMga2V5IGBrZXlgLlxuICB2YXIga2V5SW5PYmogPSBmdW5jdGlvbih2YWx1ZSwga2V5LCBvYmopIHtcbiAgICByZXR1cm4ga2V5IGluIG9iajtcbiAgfTtcblxuICAvLyBSZXR1cm4gYSBjb3B5IG9mIHRoZSBvYmplY3Qgb25seSBjb250YWluaW5nIHRoZSB3aGl0ZWxpc3RlZCBwcm9wZXJ0aWVzLlxuICBfLnBpY2sgPSByZXN0QXJndW1lbnRzKGZ1bmN0aW9uKG9iaiwga2V5cykge1xuICAgIHZhciByZXN1bHQgPSB7fSwgaXRlcmF0ZWUgPSBrZXlzWzBdO1xuICAgIGlmIChvYmogPT0gbnVsbCkgcmV0dXJuIHJlc3VsdDtcbiAgICBpZiAoXy5pc0Z1bmN0aW9uKGl0ZXJhdGVlKSkge1xuICAgICAgaWYgKGtleXMubGVuZ3RoID4gMSkgaXRlcmF0ZWUgPSBvcHRpbWl6ZUNiKGl0ZXJhdGVlLCBrZXlzWzFdKTtcbiAgICAgIGtleXMgPSBfLmFsbEtleXMob2JqKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaXRlcmF0ZWUgPSBrZXlJbk9iajtcbiAgICAgIGtleXMgPSBmbGF0dGVuKGtleXMsIGZhbHNlLCBmYWxzZSk7XG4gICAgICBvYmogPSBPYmplY3Qob2JqKTtcbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGtleXMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuICAgICAgdmFyIHZhbHVlID0gb2JqW2tleV07XG4gICAgICBpZiAoaXRlcmF0ZWUodmFsdWUsIGtleSwgb2JqKSkgcmVzdWx0W2tleV0gPSB2YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfSk7XG5cbiAgLy8gUmV0dXJuIGEgY29weSBvZiB0aGUgb2JqZWN0IHdpdGhvdXQgdGhlIGJsYWNrbGlzdGVkIHByb3BlcnRpZXMuXG4gIF8ub21pdCA9IHJlc3RBcmd1bWVudHMoZnVuY3Rpb24ob2JqLCBrZXlzKSB7XG4gICAgdmFyIGl0ZXJhdGVlID0ga2V5c1swXSwgY29udGV4dDtcbiAgICBpZiAoXy5pc0Z1bmN0aW9uKGl0ZXJhdGVlKSkge1xuICAgICAgaXRlcmF0ZWUgPSBfLm5lZ2F0ZShpdGVyYXRlZSk7XG4gICAgICBpZiAoa2V5cy5sZW5ndGggPiAxKSBjb250ZXh0ID0ga2V5c1sxXTtcbiAgICB9IGVsc2Uge1xuICAgICAga2V5cyA9IF8ubWFwKGZsYXR0ZW4oa2V5cywgZmFsc2UsIGZhbHNlKSwgU3RyaW5nKTtcbiAgICAgIGl0ZXJhdGVlID0gZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAgICByZXR1cm4gIV8uY29udGFpbnMoa2V5cywga2V5KTtcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBfLnBpY2sob2JqLCBpdGVyYXRlZSwgY29udGV4dCk7XG4gIH0pO1xuXG4gIC8vIEZpbGwgaW4gYSBnaXZlbiBvYmplY3Qgd2l0aCBkZWZhdWx0IHByb3BlcnRpZXMuXG4gIF8uZGVmYXVsdHMgPSBjcmVhdGVBc3NpZ25lcihfLmFsbEtleXMsIHRydWUpO1xuXG4gIC8vIENyZWF0ZXMgYW4gb2JqZWN0IHRoYXQgaW5oZXJpdHMgZnJvbSB0aGUgZ2l2ZW4gcHJvdG90eXBlIG9iamVjdC5cbiAgLy8gSWYgYWRkaXRpb25hbCBwcm9wZXJ0aWVzIGFyZSBwcm92aWRlZCB0aGVuIHRoZXkgd2lsbCBiZSBhZGRlZCB0byB0aGVcbiAgLy8gY3JlYXRlZCBvYmplY3QuXG4gIF8uY3JlYXRlID0gZnVuY3Rpb24ocHJvdG90eXBlLCBwcm9wcykge1xuICAgIHZhciByZXN1bHQgPSBiYXNlQ3JlYXRlKHByb3RvdHlwZSk7XG4gICAgaWYgKHByb3BzKSBfLmV4dGVuZE93bihyZXN1bHQsIHByb3BzKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIC8vIENyZWF0ZSBhIChzaGFsbG93LWNsb25lZCkgZHVwbGljYXRlIG9mIGFuIG9iamVjdC5cbiAgXy5jbG9uZSA9IGZ1bmN0aW9uKG9iaikge1xuICAgIGlmICghXy5pc09iamVjdChvYmopKSByZXR1cm4gb2JqO1xuICAgIHJldHVybiBfLmlzQXJyYXkob2JqKSA/IG9iai5zbGljZSgpIDogXy5leHRlbmQoe30sIG9iaik7XG4gIH07XG5cbiAgLy8gSW52b2tlcyBpbnRlcmNlcHRvciB3aXRoIHRoZSBvYmosIGFuZCB0aGVuIHJldHVybnMgb2JqLlxuICAvLyBUaGUgcHJpbWFyeSBwdXJwb3NlIG9mIHRoaXMgbWV0aG9kIGlzIHRvIFwidGFwIGludG9cIiBhIG1ldGhvZCBjaGFpbiwgaW5cbiAgLy8gb3JkZXIgdG8gcGVyZm9ybSBvcGVyYXRpb25zIG9uIGludGVybWVkaWF0ZSByZXN1bHRzIHdpdGhpbiB0aGUgY2hhaW4uXG4gIF8udGFwID0gZnVuY3Rpb24ob2JqLCBpbnRlcmNlcHRvcikge1xuICAgIGludGVyY2VwdG9yKG9iaik7XG4gICAgcmV0dXJuIG9iajtcbiAgfTtcblxuICAvLyBSZXR1cm5zIHdoZXRoZXIgYW4gb2JqZWN0IGhhcyBhIGdpdmVuIHNldCBvZiBga2V5OnZhbHVlYCBwYWlycy5cbiAgXy5pc01hdGNoID0gZnVuY3Rpb24ob2JqZWN0LCBhdHRycykge1xuICAgIHZhciBrZXlzID0gXy5rZXlzKGF0dHJzKSwgbGVuZ3RoID0ga2V5cy5sZW5ndGg7XG4gICAgaWYgKG9iamVjdCA9PSBudWxsKSByZXR1cm4gIWxlbmd0aDtcbiAgICB2YXIgb2JqID0gT2JqZWN0KG9iamVjdCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGtleSA9IGtleXNbaV07XG4gICAgICBpZiAoYXR0cnNba2V5XSAhPT0gb2JqW2tleV0gfHwgIShrZXkgaW4gb2JqKSkgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcblxuXG4gIC8vIEludGVybmFsIHJlY3Vyc2l2ZSBjb21wYXJpc29uIGZ1bmN0aW9uIGZvciBgaXNFcXVhbGAuXG4gIHZhciBlcSwgZGVlcEVxO1xuICBlcSA9IGZ1bmN0aW9uKGEsIGIsIGFTdGFjaywgYlN0YWNrKSB7XG4gICAgLy8gSWRlbnRpY2FsIG9iamVjdHMgYXJlIGVxdWFsLiBgMCA9PT0gLTBgLCBidXQgdGhleSBhcmVuJ3QgaWRlbnRpY2FsLlxuICAgIC8vIFNlZSB0aGUgW0hhcm1vbnkgYGVnYWxgIHByb3Bvc2FsXShodHRwOi8vd2lraS5lY21hc2NyaXB0Lm9yZy9kb2t1LnBocD9pZD1oYXJtb255OmVnYWwpLlxuICAgIGlmIChhID09PSBiKSByZXR1cm4gYSAhPT0gMCB8fCAxIC8gYSA9PT0gMSAvIGI7XG4gICAgLy8gYG51bGxgIG9yIGB1bmRlZmluZWRgIG9ubHkgZXF1YWwgdG8gaXRzZWxmIChzdHJpY3QgY29tcGFyaXNvbikuXG4gICAgaWYgKGEgPT0gbnVsbCB8fCBiID09IG51bGwpIHJldHVybiBmYWxzZTtcbiAgICAvLyBgTmFOYHMgYXJlIGVxdWl2YWxlbnQsIGJ1dCBub24tcmVmbGV4aXZlLlxuICAgIGlmIChhICE9PSBhKSByZXR1cm4gYiAhPT0gYjtcbiAgICAvLyBFeGhhdXN0IHByaW1pdGl2ZSBjaGVja3NcbiAgICB2YXIgdHlwZSA9IHR5cGVvZiBhO1xuICAgIGlmICh0eXBlICE9PSAnZnVuY3Rpb24nICYmIHR5cGUgIT09ICdvYmplY3QnICYmIHR5cGVvZiBiICE9ICdvYmplY3QnKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIGRlZXBFcShhLCBiLCBhU3RhY2ssIGJTdGFjayk7XG4gIH07XG5cbiAgLy8gSW50ZXJuYWwgcmVjdXJzaXZlIGNvbXBhcmlzb24gZnVuY3Rpb24gZm9yIGBpc0VxdWFsYC5cbiAgZGVlcEVxID0gZnVuY3Rpb24oYSwgYiwgYVN0YWNrLCBiU3RhY2spIHtcbiAgICAvLyBVbndyYXAgYW55IHdyYXBwZWQgb2JqZWN0cy5cbiAgICBpZiAoYSBpbnN0YW5jZW9mIF8pIGEgPSBhLl93cmFwcGVkO1xuICAgIGlmIChiIGluc3RhbmNlb2YgXykgYiA9IGIuX3dyYXBwZWQ7XG4gICAgLy8gQ29tcGFyZSBgW1tDbGFzc11dYCBuYW1lcy5cbiAgICB2YXIgY2xhc3NOYW1lID0gdG9TdHJpbmcuY2FsbChhKTtcbiAgICBpZiAoY2xhc3NOYW1lICE9PSB0b1N0cmluZy5jYWxsKGIpKSByZXR1cm4gZmFsc2U7XG4gICAgc3dpdGNoIChjbGFzc05hbWUpIHtcbiAgICAgIC8vIFN0cmluZ3MsIG51bWJlcnMsIHJlZ3VsYXIgZXhwcmVzc2lvbnMsIGRhdGVzLCBhbmQgYm9vbGVhbnMgYXJlIGNvbXBhcmVkIGJ5IHZhbHVlLlxuICAgICAgY2FzZSAnW29iamVjdCBSZWdFeHBdJzpcbiAgICAgIC8vIFJlZ0V4cHMgYXJlIGNvZXJjZWQgdG8gc3RyaW5ncyBmb3IgY29tcGFyaXNvbiAoTm90ZTogJycgKyAvYS9pID09PSAnL2EvaScpXG4gICAgICBjYXNlICdbb2JqZWN0IFN0cmluZ10nOlxuICAgICAgICAvLyBQcmltaXRpdmVzIGFuZCB0aGVpciBjb3JyZXNwb25kaW5nIG9iamVjdCB3cmFwcGVycyBhcmUgZXF1aXZhbGVudDsgdGh1cywgYFwiNVwiYCBpc1xuICAgICAgICAvLyBlcXVpdmFsZW50IHRvIGBuZXcgU3RyaW5nKFwiNVwiKWAuXG4gICAgICAgIHJldHVybiAnJyArIGEgPT09ICcnICsgYjtcbiAgICAgIGNhc2UgJ1tvYmplY3QgTnVtYmVyXSc6XG4gICAgICAgIC8vIGBOYU5gcyBhcmUgZXF1aXZhbGVudCwgYnV0IG5vbi1yZWZsZXhpdmUuXG4gICAgICAgIC8vIE9iamVjdChOYU4pIGlzIGVxdWl2YWxlbnQgdG8gTmFOLlxuICAgICAgICBpZiAoK2EgIT09ICthKSByZXR1cm4gK2IgIT09ICtiO1xuICAgICAgICAvLyBBbiBgZWdhbGAgY29tcGFyaXNvbiBpcyBwZXJmb3JtZWQgZm9yIG90aGVyIG51bWVyaWMgdmFsdWVzLlxuICAgICAgICByZXR1cm4gK2EgPT09IDAgPyAxIC8gK2EgPT09IDEgLyBiIDogK2EgPT09ICtiO1xuICAgICAgY2FzZSAnW29iamVjdCBEYXRlXSc6XG4gICAgICBjYXNlICdbb2JqZWN0IEJvb2xlYW5dJzpcbiAgICAgICAgLy8gQ29lcmNlIGRhdGVzIGFuZCBib29sZWFucyB0byBudW1lcmljIHByaW1pdGl2ZSB2YWx1ZXMuIERhdGVzIGFyZSBjb21wYXJlZCBieSB0aGVpclxuICAgICAgICAvLyBtaWxsaXNlY29uZCByZXByZXNlbnRhdGlvbnMuIE5vdGUgdGhhdCBpbnZhbGlkIGRhdGVzIHdpdGggbWlsbGlzZWNvbmQgcmVwcmVzZW50YXRpb25zXG4gICAgICAgIC8vIG9mIGBOYU5gIGFyZSBub3QgZXF1aXZhbGVudC5cbiAgICAgICAgcmV0dXJuICthID09PSArYjtcbiAgICAgIGNhc2UgJ1tvYmplY3QgU3ltYm9sXSc6XG4gICAgICAgIHJldHVybiBTeW1ib2xQcm90by52YWx1ZU9mLmNhbGwoYSkgPT09IFN5bWJvbFByb3RvLnZhbHVlT2YuY2FsbChiKTtcbiAgICB9XG5cbiAgICB2YXIgYXJlQXJyYXlzID0gY2xhc3NOYW1lID09PSAnW29iamVjdCBBcnJheV0nO1xuICAgIGlmICghYXJlQXJyYXlzKSB7XG4gICAgICBpZiAodHlwZW9mIGEgIT0gJ29iamVjdCcgfHwgdHlwZW9mIGIgIT0gJ29iamVjdCcpIHJldHVybiBmYWxzZTtcblxuICAgICAgLy8gT2JqZWN0cyB3aXRoIGRpZmZlcmVudCBjb25zdHJ1Y3RvcnMgYXJlIG5vdCBlcXVpdmFsZW50LCBidXQgYE9iamVjdGBzIG9yIGBBcnJheWBzXG4gICAgICAvLyBmcm9tIGRpZmZlcmVudCBmcmFtZXMgYXJlLlxuICAgICAgdmFyIGFDdG9yID0gYS5jb25zdHJ1Y3RvciwgYkN0b3IgPSBiLmNvbnN0cnVjdG9yO1xuICAgICAgaWYgKGFDdG9yICE9PSBiQ3RvciAmJiAhKF8uaXNGdW5jdGlvbihhQ3RvcikgJiYgYUN0b3IgaW5zdGFuY2VvZiBhQ3RvciAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF8uaXNGdW5jdGlvbihiQ3RvcikgJiYgYkN0b3IgaW5zdGFuY2VvZiBiQ3RvcilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgKCdjb25zdHJ1Y3RvcicgaW4gYSAmJiAnY29uc3RydWN0b3InIGluIGIpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gQXNzdW1lIGVxdWFsaXR5IGZvciBjeWNsaWMgc3RydWN0dXJlcy4gVGhlIGFsZ29yaXRobSBmb3IgZGV0ZWN0aW5nIGN5Y2xpY1xuICAgIC8vIHN0cnVjdHVyZXMgaXMgYWRhcHRlZCBmcm9tIEVTIDUuMSBzZWN0aW9uIDE1LjEyLjMsIGFic3RyYWN0IG9wZXJhdGlvbiBgSk9gLlxuXG4gICAgLy8gSW5pdGlhbGl6aW5nIHN0YWNrIG9mIHRyYXZlcnNlZCBvYmplY3RzLlxuICAgIC8vIEl0J3MgZG9uZSBoZXJlIHNpbmNlIHdlIG9ubHkgbmVlZCB0aGVtIGZvciBvYmplY3RzIGFuZCBhcnJheXMgY29tcGFyaXNvbi5cbiAgICBhU3RhY2sgPSBhU3RhY2sgfHwgW107XG4gICAgYlN0YWNrID0gYlN0YWNrIHx8IFtdO1xuICAgIHZhciBsZW5ndGggPSBhU3RhY2subGVuZ3RoO1xuICAgIHdoaWxlIChsZW5ndGgtLSkge1xuICAgICAgLy8gTGluZWFyIHNlYXJjaC4gUGVyZm9ybWFuY2UgaXMgaW52ZXJzZWx5IHByb3BvcnRpb25hbCB0byB0aGUgbnVtYmVyIG9mXG4gICAgICAvLyB1bmlxdWUgbmVzdGVkIHN0cnVjdHVyZXMuXG4gICAgICBpZiAoYVN0YWNrW2xlbmd0aF0gPT09IGEpIHJldHVybiBiU3RhY2tbbGVuZ3RoXSA9PT0gYjtcbiAgICB9XG5cbiAgICAvLyBBZGQgdGhlIGZpcnN0IG9iamVjdCB0byB0aGUgc3RhY2sgb2YgdHJhdmVyc2VkIG9iamVjdHMuXG4gICAgYVN0YWNrLnB1c2goYSk7XG4gICAgYlN0YWNrLnB1c2goYik7XG5cbiAgICAvLyBSZWN1cnNpdmVseSBjb21wYXJlIG9iamVjdHMgYW5kIGFycmF5cy5cbiAgICBpZiAoYXJlQXJyYXlzKSB7XG4gICAgICAvLyBDb21wYXJlIGFycmF5IGxlbmd0aHMgdG8gZGV0ZXJtaW5lIGlmIGEgZGVlcCBjb21wYXJpc29uIGlzIG5lY2Vzc2FyeS5cbiAgICAgIGxlbmd0aCA9IGEubGVuZ3RoO1xuICAgICAgaWYgKGxlbmd0aCAhPT0gYi5sZW5ndGgpIHJldHVybiBmYWxzZTtcbiAgICAgIC8vIERlZXAgY29tcGFyZSB0aGUgY29udGVudHMsIGlnbm9yaW5nIG5vbi1udW1lcmljIHByb3BlcnRpZXMuXG4gICAgICB3aGlsZSAobGVuZ3RoLS0pIHtcbiAgICAgICAgaWYgKCFlcShhW2xlbmd0aF0sIGJbbGVuZ3RoXSwgYVN0YWNrLCBiU3RhY2spKSByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIERlZXAgY29tcGFyZSBvYmplY3RzLlxuICAgICAgdmFyIGtleXMgPSBfLmtleXMoYSksIGtleTtcbiAgICAgIGxlbmd0aCA9IGtleXMubGVuZ3RoO1xuICAgICAgLy8gRW5zdXJlIHRoYXQgYm90aCBvYmplY3RzIGNvbnRhaW4gdGhlIHNhbWUgbnVtYmVyIG9mIHByb3BlcnRpZXMgYmVmb3JlIGNvbXBhcmluZyBkZWVwIGVxdWFsaXR5LlxuICAgICAgaWYgKF8ua2V5cyhiKS5sZW5ndGggIT09IGxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuICAgICAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgICAgIC8vIERlZXAgY29tcGFyZSBlYWNoIG1lbWJlclxuICAgICAgICBrZXkgPSBrZXlzW2xlbmd0aF07XG4gICAgICAgIGlmICghKGhhcyhiLCBrZXkpICYmIGVxKGFba2V5XSwgYltrZXldLCBhU3RhY2ssIGJTdGFjaykpKSByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIFJlbW92ZSB0aGUgZmlyc3Qgb2JqZWN0IGZyb20gdGhlIHN0YWNrIG9mIHRyYXZlcnNlZCBvYmplY3RzLlxuICAgIGFTdGFjay5wb3AoKTtcbiAgICBiU3RhY2sucG9wKCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH07XG5cbiAgLy8gUGVyZm9ybSBhIGRlZXAgY29tcGFyaXNvbiB0byBjaGVjayBpZiB0d28gb2JqZWN0cyBhcmUgZXF1YWwuXG4gIF8uaXNFcXVhbCA9IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICByZXR1cm4gZXEoYSwgYik7XG4gIH07XG5cbiAgLy8gSXMgYSBnaXZlbiBhcnJheSwgc3RyaW5nLCBvciBvYmplY3QgZW1wdHk/XG4gIC8vIEFuIFwiZW1wdHlcIiBvYmplY3QgaGFzIG5vIGVudW1lcmFibGUgb3duLXByb3BlcnRpZXMuXG4gIF8uaXNFbXB0eSA9IGZ1bmN0aW9uKG9iaikge1xuICAgIGlmIChvYmogPT0gbnVsbCkgcmV0dXJuIHRydWU7XG4gICAgaWYgKGlzQXJyYXlMaWtlKG9iaikgJiYgKF8uaXNBcnJheShvYmopIHx8IF8uaXNTdHJpbmcob2JqKSB8fCBfLmlzQXJndW1lbnRzKG9iaikpKSByZXR1cm4gb2JqLmxlbmd0aCA9PT0gMDtcbiAgICByZXR1cm4gXy5rZXlzKG9iaikubGVuZ3RoID09PSAwO1xuICB9O1xuXG4gIC8vIElzIGEgZ2l2ZW4gdmFsdWUgYSBET00gZWxlbWVudD9cbiAgXy5pc0VsZW1lbnQgPSBmdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gISEob2JqICYmIG9iai5ub2RlVHlwZSA9PT0gMSk7XG4gIH07XG5cbiAgLy8gSXMgYSBnaXZlbiB2YWx1ZSBhbiBhcnJheT9cbiAgLy8gRGVsZWdhdGVzIHRvIEVDTUE1J3MgbmF0aXZlIEFycmF5LmlzQXJyYXlcbiAgXy5pc0FycmF5ID0gbmF0aXZlSXNBcnJheSB8fCBmdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gdG9TdHJpbmcuY2FsbChvYmopID09PSAnW29iamVjdCBBcnJheV0nO1xuICB9O1xuXG4gIC8vIElzIGEgZ2l2ZW4gdmFyaWFibGUgYW4gb2JqZWN0P1xuICBfLmlzT2JqZWN0ID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgdmFyIHR5cGUgPSB0eXBlb2Ygb2JqO1xuICAgIHJldHVybiB0eXBlID09PSAnZnVuY3Rpb24nIHx8IHR5cGUgPT09ICdvYmplY3QnICYmICEhb2JqO1xuICB9O1xuXG4gIC8vIEFkZCBzb21lIGlzVHlwZSBtZXRob2RzOiBpc0FyZ3VtZW50cywgaXNGdW5jdGlvbiwgaXNTdHJpbmcsIGlzTnVtYmVyLCBpc0RhdGUsIGlzUmVnRXhwLCBpc0Vycm9yLCBpc01hcCwgaXNXZWFrTWFwLCBpc1NldCwgaXNXZWFrU2V0LlxuICBfLmVhY2goWydBcmd1bWVudHMnLCAnRnVuY3Rpb24nLCAnU3RyaW5nJywgJ051bWJlcicsICdEYXRlJywgJ1JlZ0V4cCcsICdFcnJvcicsICdTeW1ib2wnLCAnTWFwJywgJ1dlYWtNYXAnLCAnU2V0JywgJ1dlYWtTZXQnXSwgZnVuY3Rpb24obmFtZSkge1xuICAgIF9bJ2lzJyArIG5hbWVdID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgICByZXR1cm4gdG9TdHJpbmcuY2FsbChvYmopID09PSAnW29iamVjdCAnICsgbmFtZSArICddJztcbiAgICB9O1xuICB9KTtcblxuICAvLyBEZWZpbmUgYSBmYWxsYmFjayB2ZXJzaW9uIG9mIHRoZSBtZXRob2QgaW4gYnJvd3NlcnMgKGFoZW0sIElFIDwgOSksIHdoZXJlXG4gIC8vIHRoZXJlIGlzbid0IGFueSBpbnNwZWN0YWJsZSBcIkFyZ3VtZW50c1wiIHR5cGUuXG4gIGlmICghXy5pc0FyZ3VtZW50cyhhcmd1bWVudHMpKSB7XG4gICAgXy5pc0FyZ3VtZW50cyA9IGZ1bmN0aW9uKG9iaikge1xuICAgICAgcmV0dXJuIGhhcyhvYmosICdjYWxsZWUnKTtcbiAgICB9O1xuICB9XG5cbiAgLy8gT3B0aW1pemUgYGlzRnVuY3Rpb25gIGlmIGFwcHJvcHJpYXRlLiBXb3JrIGFyb3VuZCBzb21lIHR5cGVvZiBidWdzIGluIG9sZCB2OCxcbiAgLy8gSUUgMTEgKCMxNjIxKSwgU2FmYXJpIDggKCMxOTI5KSwgYW5kIFBoYW50b21KUyAoIzIyMzYpLlxuICB2YXIgbm9kZWxpc3QgPSByb290LmRvY3VtZW50ICYmIHJvb3QuZG9jdW1lbnQuY2hpbGROb2RlcztcbiAgaWYgKHR5cGVvZiAvLi8gIT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgSW50OEFycmF5ICE9ICdvYmplY3QnICYmIHR5cGVvZiBub2RlbGlzdCAhPSAnZnVuY3Rpb24nKSB7XG4gICAgXy5pc0Z1bmN0aW9uID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgICByZXR1cm4gdHlwZW9mIG9iaiA9PSAnZnVuY3Rpb24nIHx8IGZhbHNlO1xuICAgIH07XG4gIH1cblxuICAvLyBJcyBhIGdpdmVuIG9iamVjdCBhIGZpbml0ZSBudW1iZXI/XG4gIF8uaXNGaW5pdGUgPSBmdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gIV8uaXNTeW1ib2wob2JqKSAmJiBpc0Zpbml0ZShvYmopICYmICFpc05hTihwYXJzZUZsb2F0KG9iaikpO1xuICB9O1xuXG4gIC8vIElzIHRoZSBnaXZlbiB2YWx1ZSBgTmFOYD9cbiAgXy5pc05hTiA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiBfLmlzTnVtYmVyKG9iaikgJiYgaXNOYU4ob2JqKTtcbiAgfTtcblxuICAvLyBJcyBhIGdpdmVuIHZhbHVlIGEgYm9vbGVhbj9cbiAgXy5pc0Jvb2xlYW4gPSBmdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gb2JqID09PSB0cnVlIHx8IG9iaiA9PT0gZmFsc2UgfHwgdG9TdHJpbmcuY2FsbChvYmopID09PSAnW29iamVjdCBCb29sZWFuXSc7XG4gIH07XG5cbiAgLy8gSXMgYSBnaXZlbiB2YWx1ZSBlcXVhbCB0byBudWxsP1xuICBfLmlzTnVsbCA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiBvYmogPT09IG51bGw7XG4gIH07XG5cbiAgLy8gSXMgYSBnaXZlbiB2YXJpYWJsZSB1bmRlZmluZWQ/XG4gIF8uaXNVbmRlZmluZWQgPSBmdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gb2JqID09PSB2b2lkIDA7XG4gIH07XG5cbiAgLy8gU2hvcnRjdXQgZnVuY3Rpb24gZm9yIGNoZWNraW5nIGlmIGFuIG9iamVjdCBoYXMgYSBnaXZlbiBwcm9wZXJ0eSBkaXJlY3RseVxuICAvLyBvbiBpdHNlbGYgKGluIG90aGVyIHdvcmRzLCBub3Qgb24gYSBwcm90b3R5cGUpLlxuICBfLmhhcyA9IGZ1bmN0aW9uKG9iaiwgcGF0aCkge1xuICAgIGlmICghXy5pc0FycmF5KHBhdGgpKSB7XG4gICAgICByZXR1cm4gaGFzKG9iaiwgcGF0aCk7XG4gICAgfVxuICAgIHZhciBsZW5ndGggPSBwYXRoLmxlbmd0aDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIga2V5ID0gcGF0aFtpXTtcbiAgICAgIGlmIChvYmogPT0gbnVsbCB8fCAhaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgb2JqID0gb2JqW2tleV07XG4gICAgfVxuICAgIHJldHVybiAhIWxlbmd0aDtcbiAgfTtcblxuICAvLyBVdGlsaXR5IEZ1bmN0aW9uc1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLVxuXG4gIC8vIFJ1biBVbmRlcnNjb3JlLmpzIGluICpub0NvbmZsaWN0KiBtb2RlLCByZXR1cm5pbmcgdGhlIGBfYCB2YXJpYWJsZSB0byBpdHNcbiAgLy8gcHJldmlvdXMgb3duZXIuIFJldHVybnMgYSByZWZlcmVuY2UgdG8gdGhlIFVuZGVyc2NvcmUgb2JqZWN0LlxuICBfLm5vQ29uZmxpY3QgPSBmdW5jdGlvbigpIHtcbiAgICByb290Ll8gPSBwcmV2aW91c1VuZGVyc2NvcmU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLy8gS2VlcCB0aGUgaWRlbnRpdHkgZnVuY3Rpb24gYXJvdW5kIGZvciBkZWZhdWx0IGl0ZXJhdGVlcy5cbiAgXy5pZGVudGl0eSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9O1xuXG4gIC8vIFByZWRpY2F0ZS1nZW5lcmF0aW5nIGZ1bmN0aW9ucy4gT2Z0ZW4gdXNlZnVsIG91dHNpZGUgb2YgVW5kZXJzY29yZS5cbiAgXy5jb25zdGFudCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH07XG4gIH07XG5cbiAgXy5ub29wID0gZnVuY3Rpb24oKXt9O1xuXG4gIC8vIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0LCB3aGVuIHBhc3NlZCBhbiBvYmplY3QsIHdpbGwgdHJhdmVyc2UgdGhhdCBvYmplY3TigJlzXG4gIC8vIHByb3BlcnRpZXMgZG93biB0aGUgZ2l2ZW4gYHBhdGhgLCBzcGVjaWZpZWQgYXMgYW4gYXJyYXkgb2Yga2V5cyBvciBpbmRleGVzLlxuICBfLnByb3BlcnR5ID0gZnVuY3Rpb24ocGF0aCkge1xuICAgIGlmICghXy5pc0FycmF5KHBhdGgpKSB7XG4gICAgICByZXR1cm4gc2hhbGxvd1Byb3BlcnR5KHBhdGgpO1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24ob2JqKSB7XG4gICAgICByZXR1cm4gZGVlcEdldChvYmosIHBhdGgpO1xuICAgIH07XG4gIH07XG5cbiAgLy8gR2VuZXJhdGVzIGEgZnVuY3Rpb24gZm9yIGEgZ2l2ZW4gb2JqZWN0IHRoYXQgcmV0dXJucyBhIGdpdmVuIHByb3BlcnR5LlxuICBfLnByb3BlcnR5T2YgPSBmdW5jdGlvbihvYmopIHtcbiAgICBpZiAob2JqID09IG51bGwpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbigpe307XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbihwYXRoKSB7XG4gICAgICByZXR1cm4gIV8uaXNBcnJheShwYXRoKSA/IG9ialtwYXRoXSA6IGRlZXBHZXQob2JqLCBwYXRoKTtcbiAgICB9O1xuICB9O1xuXG4gIC8vIFJldHVybnMgYSBwcmVkaWNhdGUgZm9yIGNoZWNraW5nIHdoZXRoZXIgYW4gb2JqZWN0IGhhcyBhIGdpdmVuIHNldCBvZlxuICAvLyBga2V5OnZhbHVlYCBwYWlycy5cbiAgXy5tYXRjaGVyID0gXy5tYXRjaGVzID0gZnVuY3Rpb24oYXR0cnMpIHtcbiAgICBhdHRycyA9IF8uZXh0ZW5kT3duKHt9LCBhdHRycyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKG9iaikge1xuICAgICAgcmV0dXJuIF8uaXNNYXRjaChvYmosIGF0dHJzKTtcbiAgICB9O1xuICB9O1xuXG4gIC8vIFJ1biBhIGZ1bmN0aW9uICoqbioqIHRpbWVzLlxuICBfLnRpbWVzID0gZnVuY3Rpb24obiwgaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICB2YXIgYWNjdW0gPSBBcnJheShNYXRoLm1heCgwLCBuKSk7XG4gICAgaXRlcmF0ZWUgPSBvcHRpbWl6ZUNiKGl0ZXJhdGVlLCBjb250ZXh0LCAxKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47IGkrKykgYWNjdW1baV0gPSBpdGVyYXRlZShpKTtcbiAgICByZXR1cm4gYWNjdW07XG4gIH07XG5cbiAgLy8gUmV0dXJuIGEgcmFuZG9tIGludGVnZXIgYmV0d2VlbiBtaW4gYW5kIG1heCAoaW5jbHVzaXZlKS5cbiAgXy5yYW5kb20gPSBmdW5jdGlvbihtaW4sIG1heCkge1xuICAgIGlmIChtYXggPT0gbnVsbCkge1xuICAgICAgbWF4ID0gbWluO1xuICAgICAgbWluID0gMDtcbiAgICB9XG4gICAgcmV0dXJuIG1pbiArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4gKyAxKSk7XG4gIH07XG5cbiAgLy8gQSAocG9zc2libHkgZmFzdGVyKSB3YXkgdG8gZ2V0IHRoZSBjdXJyZW50IHRpbWVzdGFtcCBhcyBhbiBpbnRlZ2VyLlxuICBfLm5vdyA9IERhdGUubm93IHx8IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgfTtcblxuICAvLyBMaXN0IG9mIEhUTUwgZW50aXRpZXMgZm9yIGVzY2FwaW5nLlxuICB2YXIgZXNjYXBlTWFwID0ge1xuICAgICcmJzogJyZhbXA7JyxcbiAgICAnPCc6ICcmbHQ7JyxcbiAgICAnPic6ICcmZ3Q7JyxcbiAgICAnXCInOiAnJnF1b3Q7JyxcbiAgICBcIidcIjogJyYjeDI3OycsXG4gICAgJ2AnOiAnJiN4NjA7J1xuICB9O1xuICB2YXIgdW5lc2NhcGVNYXAgPSBfLmludmVydChlc2NhcGVNYXApO1xuXG4gIC8vIEZ1bmN0aW9ucyBmb3IgZXNjYXBpbmcgYW5kIHVuZXNjYXBpbmcgc3RyaW5ncyB0by9mcm9tIEhUTUwgaW50ZXJwb2xhdGlvbi5cbiAgdmFyIGNyZWF0ZUVzY2FwZXIgPSBmdW5jdGlvbihtYXApIHtcbiAgICB2YXIgZXNjYXBlciA9IGZ1bmN0aW9uKG1hdGNoKSB7XG4gICAgICByZXR1cm4gbWFwW21hdGNoXTtcbiAgICB9O1xuICAgIC8vIFJlZ2V4ZXMgZm9yIGlkZW50aWZ5aW5nIGEga2V5IHRoYXQgbmVlZHMgdG8gYmUgZXNjYXBlZC5cbiAgICB2YXIgc291cmNlID0gJyg/OicgKyBfLmtleXMobWFwKS5qb2luKCd8JykgKyAnKSc7XG4gICAgdmFyIHRlc3RSZWdleHAgPSBSZWdFeHAoc291cmNlKTtcbiAgICB2YXIgcmVwbGFjZVJlZ2V4cCA9IFJlZ0V4cChzb3VyY2UsICdnJyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHN0cmluZykge1xuICAgICAgc3RyaW5nID0gc3RyaW5nID09IG51bGwgPyAnJyA6ICcnICsgc3RyaW5nO1xuICAgICAgcmV0dXJuIHRlc3RSZWdleHAudGVzdChzdHJpbmcpID8gc3RyaW5nLnJlcGxhY2UocmVwbGFjZVJlZ2V4cCwgZXNjYXBlcikgOiBzdHJpbmc7XG4gICAgfTtcbiAgfTtcbiAgXy5lc2NhcGUgPSBjcmVhdGVFc2NhcGVyKGVzY2FwZU1hcCk7XG4gIF8udW5lc2NhcGUgPSBjcmVhdGVFc2NhcGVyKHVuZXNjYXBlTWFwKTtcblxuICAvLyBUcmF2ZXJzZXMgdGhlIGNoaWxkcmVuIG9mIGBvYmpgIGFsb25nIGBwYXRoYC4gSWYgYSBjaGlsZCBpcyBhIGZ1bmN0aW9uLCBpdFxuICAvLyBpcyBpbnZva2VkIHdpdGggaXRzIHBhcmVudCBhcyBjb250ZXh0LiBSZXR1cm5zIHRoZSB2YWx1ZSBvZiB0aGUgZmluYWxcbiAgLy8gY2hpbGQsIG9yIGBmYWxsYmFja2AgaWYgYW55IGNoaWxkIGlzIHVuZGVmaW5lZC5cbiAgXy5yZXN1bHQgPSBmdW5jdGlvbihvYmosIHBhdGgsIGZhbGxiYWNrKSB7XG4gICAgaWYgKCFfLmlzQXJyYXkocGF0aCkpIHBhdGggPSBbcGF0aF07XG4gICAgdmFyIGxlbmd0aCA9IHBhdGgubGVuZ3RoO1xuICAgIGlmICghbGVuZ3RoKSB7XG4gICAgICByZXR1cm4gXy5pc0Z1bmN0aW9uKGZhbGxiYWNrKSA/IGZhbGxiYWNrLmNhbGwob2JqKSA6IGZhbGxiYWNrO1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgcHJvcCA9IG9iaiA9PSBudWxsID8gdm9pZCAwIDogb2JqW3BhdGhbaV1dO1xuICAgICAgaWYgKHByb3AgPT09IHZvaWQgMCkge1xuICAgICAgICBwcm9wID0gZmFsbGJhY2s7XG4gICAgICAgIGkgPSBsZW5ndGg7IC8vIEVuc3VyZSB3ZSBkb24ndCBjb250aW51ZSBpdGVyYXRpbmcuXG4gICAgICB9XG4gICAgICBvYmogPSBfLmlzRnVuY3Rpb24ocHJvcCkgPyBwcm9wLmNhbGwob2JqKSA6IHByb3A7XG4gICAgfVxuICAgIHJldHVybiBvYmo7XG4gIH07XG5cbiAgLy8gR2VuZXJhdGUgYSB1bmlxdWUgaW50ZWdlciBpZCAodW5pcXVlIHdpdGhpbiB0aGUgZW50aXJlIGNsaWVudCBzZXNzaW9uKS5cbiAgLy8gVXNlZnVsIGZvciB0ZW1wb3JhcnkgRE9NIGlkcy5cbiAgdmFyIGlkQ291bnRlciA9IDA7XG4gIF8udW5pcXVlSWQgPSBmdW5jdGlvbihwcmVmaXgpIHtcbiAgICB2YXIgaWQgPSArK2lkQ291bnRlciArICcnO1xuICAgIHJldHVybiBwcmVmaXggPyBwcmVmaXggKyBpZCA6IGlkO1xuICB9O1xuXG4gIC8vIEJ5IGRlZmF1bHQsIFVuZGVyc2NvcmUgdXNlcyBFUkItc3R5bGUgdGVtcGxhdGUgZGVsaW1pdGVycywgY2hhbmdlIHRoZVxuICAvLyBmb2xsb3dpbmcgdGVtcGxhdGUgc2V0dGluZ3MgdG8gdXNlIGFsdGVybmF0aXZlIGRlbGltaXRlcnMuXG4gIF8udGVtcGxhdGVTZXR0aW5ncyA9IHtcbiAgICBldmFsdWF0ZTogLzwlKFtcXHNcXFNdKz8pJT4vZyxcbiAgICBpbnRlcnBvbGF0ZTogLzwlPShbXFxzXFxTXSs/KSU+L2csXG4gICAgZXNjYXBlOiAvPCUtKFtcXHNcXFNdKz8pJT4vZ1xuICB9O1xuXG4gIC8vIFdoZW4gY3VzdG9taXppbmcgYHRlbXBsYXRlU2V0dGluZ3NgLCBpZiB5b3UgZG9uJ3Qgd2FudCB0byBkZWZpbmUgYW5cbiAgLy8gaW50ZXJwb2xhdGlvbiwgZXZhbHVhdGlvbiBvciBlc2NhcGluZyByZWdleCwgd2UgbmVlZCBvbmUgdGhhdCBpc1xuICAvLyBndWFyYW50ZWVkIG5vdCB0byBtYXRjaC5cbiAgdmFyIG5vTWF0Y2ggPSAvKC4pXi87XG5cbiAgLy8gQ2VydGFpbiBjaGFyYWN0ZXJzIG5lZWQgdG8gYmUgZXNjYXBlZCBzbyB0aGF0IHRoZXkgY2FuIGJlIHB1dCBpbnRvIGFcbiAgLy8gc3RyaW5nIGxpdGVyYWwuXG4gIHZhciBlc2NhcGVzID0ge1xuICAgIFwiJ1wiOiBcIidcIixcbiAgICAnXFxcXCc6ICdcXFxcJyxcbiAgICAnXFxyJzogJ3InLFxuICAgICdcXG4nOiAnbicsXG4gICAgJ1xcdTIwMjgnOiAndTIwMjgnLFxuICAgICdcXHUyMDI5JzogJ3UyMDI5J1xuICB9O1xuXG4gIHZhciBlc2NhcGVSZWdFeHAgPSAvXFxcXHwnfFxccnxcXG58XFx1MjAyOHxcXHUyMDI5L2c7XG5cbiAgdmFyIGVzY2FwZUNoYXIgPSBmdW5jdGlvbihtYXRjaCkge1xuICAgIHJldHVybiAnXFxcXCcgKyBlc2NhcGVzW21hdGNoXTtcbiAgfTtcblxuICAvLyBKYXZhU2NyaXB0IG1pY3JvLXRlbXBsYXRpbmcsIHNpbWlsYXIgdG8gSm9obiBSZXNpZydzIGltcGxlbWVudGF0aW9uLlxuICAvLyBVbmRlcnNjb3JlIHRlbXBsYXRpbmcgaGFuZGxlcyBhcmJpdHJhcnkgZGVsaW1pdGVycywgcHJlc2VydmVzIHdoaXRlc3BhY2UsXG4gIC8vIGFuZCBjb3JyZWN0bHkgZXNjYXBlcyBxdW90ZXMgd2l0aGluIGludGVycG9sYXRlZCBjb2RlLlxuICAvLyBOQjogYG9sZFNldHRpbmdzYCBvbmx5IGV4aXN0cyBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuXG4gIF8udGVtcGxhdGUgPSBmdW5jdGlvbih0ZXh0LCBzZXR0aW5ncywgb2xkU2V0dGluZ3MpIHtcbiAgICBpZiAoIXNldHRpbmdzICYmIG9sZFNldHRpbmdzKSBzZXR0aW5ncyA9IG9sZFNldHRpbmdzO1xuICAgIHNldHRpbmdzID0gXy5kZWZhdWx0cyh7fSwgc2V0dGluZ3MsIF8udGVtcGxhdGVTZXR0aW5ncyk7XG5cbiAgICAvLyBDb21iaW5lIGRlbGltaXRlcnMgaW50byBvbmUgcmVndWxhciBleHByZXNzaW9uIHZpYSBhbHRlcm5hdGlvbi5cbiAgICB2YXIgbWF0Y2hlciA9IFJlZ0V4cChbXG4gICAgICAoc2V0dGluZ3MuZXNjYXBlIHx8IG5vTWF0Y2gpLnNvdXJjZSxcbiAgICAgIChzZXR0aW5ncy5pbnRlcnBvbGF0ZSB8fCBub01hdGNoKS5zb3VyY2UsXG4gICAgICAoc2V0dGluZ3MuZXZhbHVhdGUgfHwgbm9NYXRjaCkuc291cmNlXG4gICAgXS5qb2luKCd8JykgKyAnfCQnLCAnZycpO1xuXG4gICAgLy8gQ29tcGlsZSB0aGUgdGVtcGxhdGUgc291cmNlLCBlc2NhcGluZyBzdHJpbmcgbGl0ZXJhbHMgYXBwcm9wcmlhdGVseS5cbiAgICB2YXIgaW5kZXggPSAwO1xuICAgIHZhciBzb3VyY2UgPSBcIl9fcCs9J1wiO1xuICAgIHRleHQucmVwbGFjZShtYXRjaGVyLCBmdW5jdGlvbihtYXRjaCwgZXNjYXBlLCBpbnRlcnBvbGF0ZSwgZXZhbHVhdGUsIG9mZnNldCkge1xuICAgICAgc291cmNlICs9IHRleHQuc2xpY2UoaW5kZXgsIG9mZnNldCkucmVwbGFjZShlc2NhcGVSZWdFeHAsIGVzY2FwZUNoYXIpO1xuICAgICAgaW5kZXggPSBvZmZzZXQgKyBtYXRjaC5sZW5ndGg7XG5cbiAgICAgIGlmIChlc2NhcGUpIHtcbiAgICAgICAgc291cmNlICs9IFwiJytcXG4oKF9fdD0oXCIgKyBlc2NhcGUgKyBcIikpPT1udWxsPycnOl8uZXNjYXBlKF9fdCkpK1xcbidcIjtcbiAgICAgIH0gZWxzZSBpZiAoaW50ZXJwb2xhdGUpIHtcbiAgICAgICAgc291cmNlICs9IFwiJytcXG4oKF9fdD0oXCIgKyBpbnRlcnBvbGF0ZSArIFwiKSk9PW51bGw/Jyc6X190KStcXG4nXCI7XG4gICAgICB9IGVsc2UgaWYgKGV2YWx1YXRlKSB7XG4gICAgICAgIHNvdXJjZSArPSBcIic7XFxuXCIgKyBldmFsdWF0ZSArIFwiXFxuX19wKz0nXCI7XG4gICAgICB9XG5cbiAgICAgIC8vIEFkb2JlIFZNcyBuZWVkIHRoZSBtYXRjaCByZXR1cm5lZCB0byBwcm9kdWNlIHRoZSBjb3JyZWN0IG9mZnNldC5cbiAgICAgIHJldHVybiBtYXRjaDtcbiAgICB9KTtcbiAgICBzb3VyY2UgKz0gXCInO1xcblwiO1xuXG4gICAgLy8gSWYgYSB2YXJpYWJsZSBpcyBub3Qgc3BlY2lmaWVkLCBwbGFjZSBkYXRhIHZhbHVlcyBpbiBsb2NhbCBzY29wZS5cbiAgICBpZiAoIXNldHRpbmdzLnZhcmlhYmxlKSBzb3VyY2UgPSAnd2l0aChvYmp8fHt9KXtcXG4nICsgc291cmNlICsgJ31cXG4nO1xuXG4gICAgc291cmNlID0gXCJ2YXIgX190LF9fcD0nJyxfX2o9QXJyYXkucHJvdG90eXBlLmpvaW4sXCIgK1xuICAgICAgXCJwcmludD1mdW5jdGlvbigpe19fcCs9X19qLmNhbGwoYXJndW1lbnRzLCcnKTt9O1xcblwiICtcbiAgICAgIHNvdXJjZSArICdyZXR1cm4gX19wO1xcbic7XG5cbiAgICB2YXIgcmVuZGVyO1xuICAgIHRyeSB7XG4gICAgICByZW5kZXIgPSBuZXcgRnVuY3Rpb24oc2V0dGluZ3MudmFyaWFibGUgfHwgJ29iaicsICdfJywgc291cmNlKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBlLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRocm93IGU7XG4gICAgfVxuXG4gICAgdmFyIHRlbXBsYXRlID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgcmV0dXJuIHJlbmRlci5jYWxsKHRoaXMsIGRhdGEsIF8pO1xuICAgIH07XG5cbiAgICAvLyBQcm92aWRlIHRoZSBjb21waWxlZCBzb3VyY2UgYXMgYSBjb252ZW5pZW5jZSBmb3IgcHJlY29tcGlsYXRpb24uXG4gICAgdmFyIGFyZ3VtZW50ID0gc2V0dGluZ3MudmFyaWFibGUgfHwgJ29iaic7XG4gICAgdGVtcGxhdGUuc291cmNlID0gJ2Z1bmN0aW9uKCcgKyBhcmd1bWVudCArICcpe1xcbicgKyBzb3VyY2UgKyAnfSc7XG5cbiAgICByZXR1cm4gdGVtcGxhdGU7XG4gIH07XG5cbiAgLy8gQWRkIGEgXCJjaGFpblwiIGZ1bmN0aW9uLiBTdGFydCBjaGFpbmluZyBhIHdyYXBwZWQgVW5kZXJzY29yZSBvYmplY3QuXG4gIF8uY2hhaW4gPSBmdW5jdGlvbihvYmopIHtcbiAgICB2YXIgaW5zdGFuY2UgPSBfKG9iaik7XG4gICAgaW5zdGFuY2UuX2NoYWluID0gdHJ1ZTtcbiAgICByZXR1cm4gaW5zdGFuY2U7XG4gIH07XG5cbiAgLy8gT09QXG4gIC8vIC0tLS0tLS0tLS0tLS0tLVxuICAvLyBJZiBVbmRlcnNjb3JlIGlzIGNhbGxlZCBhcyBhIGZ1bmN0aW9uLCBpdCByZXR1cm5zIGEgd3JhcHBlZCBvYmplY3QgdGhhdFxuICAvLyBjYW4gYmUgdXNlZCBPTy1zdHlsZS4gVGhpcyB3cmFwcGVyIGhvbGRzIGFsdGVyZWQgdmVyc2lvbnMgb2YgYWxsIHRoZVxuICAvLyB1bmRlcnNjb3JlIGZ1bmN0aW9ucy4gV3JhcHBlZCBvYmplY3RzIG1heSBiZSBjaGFpbmVkLlxuXG4gIC8vIEhlbHBlciBmdW5jdGlvbiB0byBjb250aW51ZSBjaGFpbmluZyBpbnRlcm1lZGlhdGUgcmVzdWx0cy5cbiAgdmFyIGNoYWluUmVzdWx0ID0gZnVuY3Rpb24oaW5zdGFuY2UsIG9iaikge1xuICAgIHJldHVybiBpbnN0YW5jZS5fY2hhaW4gPyBfKG9iaikuY2hhaW4oKSA6IG9iajtcbiAgfTtcblxuICAvLyBBZGQgeW91ciBvd24gY3VzdG9tIGZ1bmN0aW9ucyB0byB0aGUgVW5kZXJzY29yZSBvYmplY3QuXG4gIF8ubWl4aW4gPSBmdW5jdGlvbihvYmopIHtcbiAgICBfLmVhY2goXy5mdW5jdGlvbnMob2JqKSwgZnVuY3Rpb24obmFtZSkge1xuICAgICAgdmFyIGZ1bmMgPSBfW25hbWVdID0gb2JqW25hbWVdO1xuICAgICAgXy5wcm90b3R5cGVbbmFtZV0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSBbdGhpcy5fd3JhcHBlZF07XG4gICAgICAgIHB1c2guYXBwbHkoYXJncywgYXJndW1lbnRzKTtcbiAgICAgICAgcmV0dXJuIGNoYWluUmVzdWx0KHRoaXMsIGZ1bmMuYXBwbHkoXywgYXJncykpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgICByZXR1cm4gXztcbiAgfTtcblxuICAvLyBBZGQgYWxsIG9mIHRoZSBVbmRlcnNjb3JlIGZ1bmN0aW9ucyB0byB0aGUgd3JhcHBlciBvYmplY3QuXG4gIF8ubWl4aW4oXyk7XG5cbiAgLy8gQWRkIGFsbCBtdXRhdG9yIEFycmF5IGZ1bmN0aW9ucyB0byB0aGUgd3JhcHBlci5cbiAgXy5lYWNoKFsncG9wJywgJ3B1c2gnLCAncmV2ZXJzZScsICdzaGlmdCcsICdzb3J0JywgJ3NwbGljZScsICd1bnNoaWZ0J10sIGZ1bmN0aW9uKG5hbWUpIHtcbiAgICB2YXIgbWV0aG9kID0gQXJyYXlQcm90b1tuYW1lXTtcbiAgICBfLnByb3RvdHlwZVtuYW1lXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIG9iaiA9IHRoaXMuX3dyYXBwZWQ7XG4gICAgICBtZXRob2QuYXBwbHkob2JqLCBhcmd1bWVudHMpO1xuICAgICAgaWYgKChuYW1lID09PSAnc2hpZnQnIHx8IG5hbWUgPT09ICdzcGxpY2UnKSAmJiBvYmoubGVuZ3RoID09PSAwKSBkZWxldGUgb2JqWzBdO1xuICAgICAgcmV0dXJuIGNoYWluUmVzdWx0KHRoaXMsIG9iaik7XG4gICAgfTtcbiAgfSk7XG5cbiAgLy8gQWRkIGFsbCBhY2Nlc3NvciBBcnJheSBmdW5jdGlvbnMgdG8gdGhlIHdyYXBwZXIuXG4gIF8uZWFjaChbJ2NvbmNhdCcsICdqb2luJywgJ3NsaWNlJ10sIGZ1bmN0aW9uKG5hbWUpIHtcbiAgICB2YXIgbWV0aG9kID0gQXJyYXlQcm90b1tuYW1lXTtcbiAgICBfLnByb3RvdHlwZVtuYW1lXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGNoYWluUmVzdWx0KHRoaXMsIG1ldGhvZC5hcHBseSh0aGlzLl93cmFwcGVkLCBhcmd1bWVudHMpKTtcbiAgICB9O1xuICB9KTtcblxuICAvLyBFeHRyYWN0cyB0aGUgcmVzdWx0IGZyb20gYSB3cmFwcGVkIGFuZCBjaGFpbmVkIG9iamVjdC5cbiAgXy5wcm90b3R5cGUudmFsdWUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fd3JhcHBlZDtcbiAgfTtcblxuICAvLyBQcm92aWRlIHVud3JhcHBpbmcgcHJveHkgZm9yIHNvbWUgbWV0aG9kcyB1c2VkIGluIGVuZ2luZSBvcGVyYXRpb25zXG4gIC8vIHN1Y2ggYXMgYXJpdGhtZXRpYyBhbmQgSlNPTiBzdHJpbmdpZmljYXRpb24uXG4gIF8ucHJvdG90eXBlLnZhbHVlT2YgPSBfLnByb3RvdHlwZS50b0pTT04gPSBfLnByb3RvdHlwZS52YWx1ZTtcblxuICBfLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBTdHJpbmcodGhpcy5fd3JhcHBlZCk7XG4gIH07XG5cbiAgLy8gQU1EIHJlZ2lzdHJhdGlvbiBoYXBwZW5zIGF0IHRoZSBlbmQgZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBBTUQgbG9hZGVyc1xuICAvLyB0aGF0IG1heSBub3QgZW5mb3JjZSBuZXh0LXR1cm4gc2VtYW50aWNzIG9uIG1vZHVsZXMuIEV2ZW4gdGhvdWdoIGdlbmVyYWxcbiAgLy8gcHJhY3RpY2UgZm9yIEFNRCByZWdpc3RyYXRpb24gaXMgdG8gYmUgYW5vbnltb3VzLCB1bmRlcnNjb3JlIHJlZ2lzdGVyc1xuICAvLyBhcyBhIG5hbWVkIG1vZHVsZSBiZWNhdXNlLCBsaWtlIGpRdWVyeSwgaXQgaXMgYSBiYXNlIGxpYnJhcnkgdGhhdCBpc1xuICAvLyBwb3B1bGFyIGVub3VnaCB0byBiZSBidW5kbGVkIGluIGEgdGhpcmQgcGFydHkgbGliLCBidXQgbm90IGJlIHBhcnQgb2ZcbiAgLy8gYW4gQU1EIGxvYWQgcmVxdWVzdC4gVGhvc2UgY2FzZXMgY291bGQgZ2VuZXJhdGUgYW4gZXJyb3Igd2hlbiBhblxuICAvLyBhbm9ueW1vdXMgZGVmaW5lKCkgaXMgY2FsbGVkIG91dHNpZGUgb2YgYSBsb2FkZXIgcmVxdWVzdC5cbiAgaWYgKHR5cGVvZiBkZWZpbmUgPT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgZGVmaW5lKCd1bmRlcnNjb3JlJywgW10sIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIF87XG4gICAgfSk7XG4gIH1cbn0oKSk7XG4iLCIvL2ltcG9ydCB0ZXN0ZGF0YSBmcm9tICcuL3Rlc3RkYXRhJ1xyXG5pbXBvcnQgeyB0ZW1wbGF0ZSB9IGZyb20gJ3VuZGVyc2NvcmUnXHJcblxyXG5jb25zdCBhcnRpY2xlVGVtcGxhdGUgPSB0ZW1wbGF0ZShcclxuICAgICc8YXJ0aWNsZT4nICtcclxuICAgICAgICAnPGRpdiBjbGFzcz1cImFydGljbGUtaW5mb1wiPicgK1xyXG4gICAgICAgICAgICAnPGgzPjxhIHRhcmdldD1cIl9ibGFua1wiIGhyZWY9XCI8JT0gdXJsICU+XCI+PCU9IHRpdGxlICU+PC9hPjwvaDM+JyArXHJcbiAgICAgICAgICAgICc8cD48JT0gZGVzY3JpcHRpb24gJT48L3A+JyArXHJcbiAgICAgICAgJzwvZGl2PicgK1xyXG4gICAgICAgICc8ZGl2IGNsYXNzPVwiYXJ0aWNsZS1yYXRpbmdcIiBzdHlsZT1cImNvbG9yOiA8JT0gY29sb3IgJT5cIj48JT0gcmF0aW5nICU+PC9kaXY+JyArXHJcbiAgICAnPC9hcnRpY2xlPidcclxuKVxyXG5cclxuY29uc3QgdG90YWxTY29yZVRlbXBsYXRlID0gdGVtcGxhdGUoXHJcbiAgICAnPHNwYW4+QmFzZWQgb24gc2NvcmVzIGZyb20gPCU9IGNvdW50ICU+IHNpdGVzIHRoZSBwcm9kdWN0XFwncyB0b3RhbCBzY29yZSBpczwvc3Bhbj48c3BhbiBjbGFzcz1cInRvdGFsLXNjb3JlLXZhbHVlXCIgc3R5bGU9XCJjb2xvcjogPCU9IGNvbG9yICU+XCI+PCU9IHNjb3JlICU+PC9zcGFuPidcclxuKVxyXG5cclxuZnVuY3Rpb24gc2VhcmNoKCkge1xyXG4gICAgY29uc3Qgc2VhcmNoa2V5ID0gKDxIVE1MSW5wdXRFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWFyY2hrZXknKSkudmFsdWU7XHJcblxyXG4gICAgaWYgKHNlYXJjaGtleSAmJiBzZWFyY2hrZXkubGVuZ3RoID4gNSkge1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlcnJvcicpLnRleHRDb250ZW50ID0gJyc7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0c0xpc3RFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3VsdHMtbGlzdCcpO1xyXG4gICAgICAgIGNvbnN0IHRvdGFsU2NvcmVFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvdGFsLXNjb3JlJylcclxuICAgICAgICByZXN1bHRzTGlzdEVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgdG90YWxTY29yZUVsZW1lbnQuaW5uZXJIVE1MID0gJ1NlYXJjaGluZy4uLic7XHJcblxyXG4gICAgICAgIFByb21pc2UuYWxsKFtcclxuICAgICAgICAgICAgZmV0Y2hSZXN1bHRzUGFnZShzZWFyY2hrZXksIDEpLFxyXG4gICAgICAgICAgICBmZXRjaFJlc3VsdHNQYWdlKHNlYXJjaGtleSwgMiksXHJcbiAgICAgICAgICAgIGZldGNoUmVzdWx0c1BhZ2Uoc2VhcmNoa2V5LCAzKSxcclxuICAgICAgICAgICAgZmV0Y2hSZXN1bHRzUGFnZShzZWFyY2hrZXksIDQpLFxyXG4gICAgICAgICAgICBmZXRjaFJlc3VsdHNQYWdlKHNlYXJjaGtleSwgNSksXHJcbiAgICAgICAgXSkudGhlbihyZXNwb25zZXMgPT4gUHJvbWlzZS5hbGwocmVzcG9uc2VzLm1hcChyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpKSlcclxuICAgICAgICAudGhlbigocmVzcG9uc2VKc29uczogYW55W10pID0+IHJlc3BvbnNlSnNvbnMubWFwKHJlc3BvbnNlSnNvbiA9PiByZXNwb25zZUpzb24uaXRlbXMgfHwgcmVzcG9uc2VKc29uLmVycm9yKS5mbGF0KCkpXHJcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oaXRlbXMpIHtcclxuICAgICAgICAgICAgbGV0IHJhdGluZ3NUb3RhbENvdW50ID0gMDtcclxuICAgICAgICAgICAgbGV0IHJhdGluZ3NUb3RhbFZhbHVlID0gMDtcclxuXHJcbiAgICAgICAgICAgIGl0ZW1zLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWl0ZW0pIHJldHVybjtcclxuICAgICAgICAgICAgICAgIGlmIChpdGVtLmVycm9ycyAmJiBpdGVtLmVycm9yc1swXS5yZWFzb24gPT09ICdkYWlseUxpbWl0RXhjZWVkZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Vycm9yJykudGV4dENvbnRlbnQgPSAnTWF4aW11bSBudW1iZXIgb2YgcXVlcmllcyBmb3IgdGhlIGRheSBoYXMgYmVlbiByZWFjaGVkLiBUcnkgYWdhaW4gdG9tb3Jyb3cuJztcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGxldCBwcmludCA9IGl0ZW0udGl0bGUgKyAnIC0tICc7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5wYWdlbWFwLmFnZ3JlZ2F0ZXJhdGluZyAmJiBpdGVtLnBhZ2VtYXAuYWdncmVnYXRlcmF0aW5nLmxlbmd0aCAmJiBpdGVtLnBhZ2VtYXAuYWdncmVnYXRlcmF0aW5nWzBdLmJlc3RyYXRpbmcgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRSYXRpbmcgPSBub3JtYWxpemVSYXRpbmcocGFyc2VGbG9hdChpdGVtLnBhZ2VtYXAuYWdncmVnYXRlcmF0aW5nWzBdLnJhdGluZ3ZhbHVlKSwgcGFyc2VGbG9hdChpdGVtLnBhZ2VtYXAuYWdncmVnYXRlcmF0aW5nWzBdLmJlc3RyYXRpbmcpKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNOYU4obm9ybWFsaXplZFJhdGluZykpIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICBwcmludCArPSAnU2NvcmU6ICcgKyBub3JtYWxpemVkUmF0aW5nO1xyXG4gICAgICAgICAgICAgICAgICAgIHJhdGluZ3NUb3RhbENvdW50ICsrO1xyXG4gICAgICAgICAgICAgICAgICAgIHJhdGluZ3NUb3RhbFZhbHVlICs9IG5vcm1hbGl6ZWRSYXRpbmc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpdGVtLnBhZ2VtYXAucmF0aW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFnZVJhdGluZ3MgPSBpdGVtLnBhZ2VtYXAucmF0aW5nLm1hcCgocmF0aW5nIDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRSYXRpbmcgPSBub3JtYWxpemVSYXRpbmcocGFyc2VGbG9hdChyYXRpbmcucmF0aW5ndmFsdWUpLCBwYXJzZUZsb2F0KHJhdGluZy5iZXN0cmF0aW5nKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc05hTihub3JtYWxpemVkUmF0aW5nKSkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByYXRpbmdzVG90YWxDb3VudCArKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmF0aW5nc1RvdGFsVmFsdWUgKz0gbm9ybWFsaXplZFJhdGluZztcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5vcm1hbGl6ZWRSYXRpbmc7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2NvcmUgPSBwYWdlUmF0aW5ncy5yZWR1Y2UoKGN1bXVsYXRlZFZhbHVlIDogbnVtYmVyLCB2YWx1ZSA6IG51bWJlcikgPT4gY3VtdWxhdGVkVmFsdWUgKyB2YWx1ZSwgMCApIC8gcGFnZVJhdGluZ3MubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc05hTihzY29yZSkpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0c0xpc3RFbGVtZW50LmlubmVySFRNTCArPSBhcnRpY2xlVGVtcGxhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogaXRlbS50aXRsZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBpdGVtLmxpbmssXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBpdGVtLnNuaXBwZXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhdGluZzogKHNjb3JlICogNSkudG9GaXhlZCgxKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IGdldENvbG9yRm9yU2NvcmUoc2NvcmUgKiA1KVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBwcmludCArPSAnU2NvcmU6ICcgKyBzY29yZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChyYXRpbmdzVG90YWxDb3VudCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNjb3JlID0gKHJhdGluZ3NUb3RhbFZhbHVlICogNSAvIHJhdGluZ3NUb3RhbENvdW50KTtcclxuICAgICAgICAgICAgICAgIHRvdGFsU2NvcmVFbGVtZW50LmlubmVySFRNTCA9IHRvdGFsU2NvcmVUZW1wbGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcmU6IHNjb3JlLnRvRml4ZWQoMSksXHJcbiAgICAgICAgICAgICAgICAgICAgY291bnQ6IHJhdGluZ3NUb3RhbENvdW50LFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiBnZXRDb2xvckZvclNjb3JlKHNjb3JlKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Vycm9yJykudGV4dENvbnRlbnQgPSAnU2VhcmNoIHRlcm0gbWluaW11bSBsZW5ndGggaXMgJyArIDU7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldENvbG9yRm9yU2NvcmUgKHNjb3JlIDogbnVtYmVyKSB7XHJcbiAgICBpZiAoc2NvcmUgPCAyKSByZXR1cm4gJ2Jyb3duJ1xyXG4gICAgaWYgKHNjb3JlIDwgMykgcmV0dXJuICdyZWQnXHJcbiAgICBpZiAoc2NvcmUgPCA0KSByZXR1cm4gJyNmMWYxMDAnXHJcbiAgICBpZiAoc2NvcmUgPCA0LjUpIHJldHVybiAnbGltZWdyZWVuJ1xyXG4gICAgcmV0dXJuICdzZWFncmVlbidcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGZldGNoUmVzdWx0c1BhZ2Uoc2VhcmNoa2V5OnN0cmluZywgcGFnZSA9IDEpIDogUHJvbWlzZTxSZXNwb25zZT4ge1xyXG4gICAgaWYgKCFzZWFyY2hrZXkpIHJldHVybiBudWxsO1xyXG5cclxuICAgIC8qdmFyIGZha2VSZXNwb25zZSA9IG5ldyBSZXNwb25zZShuZXcgQmxvYihbSlNPTi5zdHJpbmdpZnkodGVzdGRhdGFbcGFnZSAtIDFdKV0sIHt0eXBlIDogJ2FwcGxpY2F0aW9uL2pzb24nfSkpO1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlPFJlc3BvbnNlPigocmVzb2x2ZSkgPT4ge1xyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4gcmVzb2x2ZShmYWtlUmVzcG9uc2UpLCBNYXRoLnJhbmRvbSgpICogMjAwMCk7XHJcbiAgICB9KTsqL1xyXG5cclxuICAgIHJldHVybiBmZXRjaChgaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vY3VzdG9tc2VhcmNoL3YxP2N4PTAwNTA0MjA3MDY4NjMzMTIzMTUwMjo3Y3JsZWwtNmFlOCZrZXk9QUl6YVN5Q0x1X0Z5ZXJQb1VaWnBjaTVxMFotY3czSVltRDByR0N3JnE9JHtzZWFyY2hrZXl9Jm51bT0xMCZzdGFydD0ke3BhZ2UgKiAxMH1gLCB7XHJcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgICBoZWFkZXJzOntcclxuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBub3JtYWxpemVSYXRpbmcocmF0aW5nOm51bWJlciwgYmVzdHJhdGluZzpudW1iZXIpeyAgXHJcbiAgICByZXR1cm4gcmF0aW5nIC8gYmVzdHJhdGluZztcclxufVxyXG5cclxuXHJcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdWJtaXQnKS5vbmNsaWNrID0gc2VhcmNoO1xyXG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoa2V5Jykub25rZXlwcmVzcyA9IChldmVudCkgPT4ge1xyXG4gICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IDEzKSB7XHJcbiAgICAgICAgc2VhcmNoKCk7XHJcbiAgICB9XHJcbn07IiwidmFyIGc7XG5cbi8vIFRoaXMgd29ya3MgaW4gbm9uLXN0cmljdCBtb2RlXG5nID0gKGZ1bmN0aW9uKCkge1xuXHRyZXR1cm4gdGhpcztcbn0pKCk7XG5cbnRyeSB7XG5cdC8vIFRoaXMgd29ya3MgaWYgZXZhbCBpcyBhbGxvd2VkIChzZWUgQ1NQKVxuXHRnID0gZyB8fCBuZXcgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpO1xufSBjYXRjaCAoZSkge1xuXHQvLyBUaGlzIHdvcmtzIGlmIHRoZSB3aW5kb3cgcmVmZXJlbmNlIGlzIGF2YWlsYWJsZVxuXHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJvYmplY3RcIikgZyA9IHdpbmRvdztcbn1cblxuLy8gZyBjYW4gc3RpbGwgYmUgdW5kZWZpbmVkLCBidXQgbm90aGluZyB0byBkbyBhYm91dCBpdC4uLlxuLy8gV2UgcmV0dXJuIHVuZGVmaW5lZCwgaW5zdGVhZCBvZiBub3RoaW5nIGhlcmUsIHNvIGl0J3Ncbi8vIGVhc2llciB0byBoYW5kbGUgdGhpcyBjYXNlLiBpZighZ2xvYmFsKSB7IC4uLn1cblxubW9kdWxlLmV4cG9ydHMgPSBnO1xuIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihtb2R1bGUpIHtcblx0aWYgKCFtb2R1bGUud2VicGFja1BvbHlmaWxsKSB7XG5cdFx0bW9kdWxlLmRlcHJlY2F0ZSA9IGZ1bmN0aW9uKCkge307XG5cdFx0bW9kdWxlLnBhdGhzID0gW107XG5cdFx0Ly8gbW9kdWxlLnBhcmVudCA9IHVuZGVmaW5lZCBieSBkZWZhdWx0XG5cdFx0aWYgKCFtb2R1bGUuY2hpbGRyZW4pIG1vZHVsZS5jaGlsZHJlbiA9IFtdO1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShtb2R1bGUsIFwibG9hZGVkXCIsIHtcblx0XHRcdGVudW1lcmFibGU6IHRydWUsXG5cdFx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gbW9kdWxlLmw7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG1vZHVsZSwgXCJpZFwiLCB7XG5cdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuXHRcdFx0Z2V0OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuIG1vZHVsZS5pO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdG1vZHVsZS53ZWJwYWNrUG9seWZpbGwgPSAxO1xuXHR9XG5cdHJldHVybiBtb2R1bGU7XG59O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==